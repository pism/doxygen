<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PISM, A Parallel Ice Sheet Model: src/coupler/surface/SurfaceModel.cc Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="browser.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PISM, A Parallel Ice Sheet Model
   &#160;<span id="projectnumber">stable v2.1-1-g6902d5502 committed by Ed Bueler on 2023-12-20 08:38:27 -0800</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_0171d4959defe1f65341fde2c6309901.html">coupler</a></li><li class="navelem"><a class="el" href="dir_21634f6868024c5438a18f69ca9f47a1.html">surface</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">SurfaceModel.cc</div>  </div>
</div><!--header-->
<div class="contents">
<a href="SurfaceModel_8cc.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Copyright (C) 2008-2023 Ed Bueler, Constantine Khroulev, Ricarda Winkelmann,</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// Gudfinna Adalgeirsdottir and Andy Aschwanden</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// This file is part of PISM.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// PISM is free software; you can redistribute it and/or modify it under the</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">// terms of the GNU General Public License as published by the Free Software</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">// Foundation; either version 3 of the License, or (at your option) any later</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// version.</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// PISM is distributed in the hope that it will be useful, but WITHOUT ANY</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">// FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">// details.</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">// You should have received a copy of the GNU General Public License</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">// along with PISM; if not, write to the Free Software</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">// Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160; </div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &lt;cassert&gt;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &lt;gsl/gsl_math.h&gt;</span>       <span class="comment">// GSL_NAN</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &lt;memory&gt;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160; </div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;pism/coupler/SurfaceModel.hh&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;pism/coupler/AtmosphereModel.hh&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;pism/util/io/File.hh&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;pism/util/Grid.hh&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;pism/util/MaxTimestep.hh&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;pism/util/pism_utilities.hh&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;pism/util/Context.hh&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160; </div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacepism.html">pism</a> {</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="keyword">namespace </span>surface {</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160; </div>
<div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1SurfaceModel_a8bb12e76aa2f6e223fb33268f1c4a1ff.html#a8bb12e76aa2f6e223fb33268f1c4a1ff">   35</a></span>&#160;std::shared_ptr&lt;array::Scalar&gt; <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a8bb12e76aa2f6e223fb33268f1c4a1ff.html#a8bb12e76aa2f6e223fb33268f1c4a1ff">SurfaceModel::allocate_layer_mass</a>(std::shared_ptr&lt;const Grid&gt; grid) {</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  <span class="keyword">auto</span> result = std::make_shared&lt;array::Scalar&gt;(<a class="code" href="classpism_1_1Component_a1d7fa2a58f259a9c5e464f8738db6ef0.html#a1d7fa2a58f259a9c5e464f8738db6ef0">grid</a>, <span class="stringliteral">&quot;surface_layer_mass&quot;</span>);</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160; </div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  result-&gt;metadata(0)</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;      .long_name(<span class="stringliteral">&quot;mass held in the surface layer&quot;</span>)</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;      .units(<span class="stringliteral">&quot;kg&quot;</span>);</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160; </div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  result-&gt;metadata()[<span class="stringliteral">&quot;valid_min&quot;</span>] = { 0.0 };</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160; </div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;}</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1SurfaceModel_a5c770412f37f5201274f1f12658c1935.html#a5c770412f37f5201274f1f12658c1935">   47</a></span>&#160;std::shared_ptr&lt;array::Scalar&gt; <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a5c770412f37f5201274f1f12658c1935.html#a5c770412f37f5201274f1f12658c1935">SurfaceModel::allocate_layer_thickness</a>(std::shared_ptr&lt;const Grid&gt; grid) {</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160; </div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  <span class="keyword">auto</span> result = std::make_shared&lt;array::Scalar&gt;(<a class="code" href="classpism_1_1Component_a1d7fa2a58f259a9c5e464f8738db6ef0.html#a1d7fa2a58f259a9c5e464f8738db6ef0">grid</a>, <span class="stringliteral">&quot;surface_layer_thickness&quot;</span>);</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160; </div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  result-&gt;metadata(0)</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;      .long_name(<span class="stringliteral">&quot;thickness of the surface process layer at the top surface of the ice&quot;</span>)</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;      .units(<span class="stringliteral">&quot;m&quot;</span>);</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  result-&gt;metadata()[<span class="stringliteral">&quot;valid_min&quot;</span>] = { 0.0 };</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160; </div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;}</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160; </div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1SurfaceModel_afb40e99e6ee5b177a4d8b783e7329973.html#afb40e99e6ee5b177a4d8b783e7329973">   60</a></span>&#160;std::shared_ptr&lt;array::Scalar&gt; <a class="code" href="classpism_1_1surface_1_1SurfaceModel_afb40e99e6ee5b177a4d8b783e7329973.html#afb40e99e6ee5b177a4d8b783e7329973">SurfaceModel::allocate_liquid_water_fraction</a>(std::shared_ptr&lt;const Grid&gt; grid) {</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160; </div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <span class="keyword">auto</span> result = std::make_shared&lt;array::Scalar&gt;(<a class="code" href="classpism_1_1Component_a1d7fa2a58f259a9c5e464f8738db6ef0.html#a1d7fa2a58f259a9c5e464f8738db6ef0">grid</a>, <span class="stringliteral">&quot;ice_surface_liquid_water_fraction&quot;</span>);</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160; </div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  result-&gt;metadata(0)</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;      .long_name(<span class="stringliteral">&quot;liquid water fraction of the ice at the top surface&quot;</span>)</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;      .units(<span class="stringliteral">&quot;1&quot;</span>);</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160; </div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  result-&gt;metadata()[<span class="stringliteral">&quot;valid_range&quot;</span>] = { 0.0, 1.0 };</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160; </div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;}</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160; </div>
<div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1SurfaceModel_a2430149f4b9d6e36bfb1f5bcaa5601a7.html#a2430149f4b9d6e36bfb1f5bcaa5601a7">   73</a></span>&#160;std::shared_ptr&lt;array::Scalar&gt; <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a2430149f4b9d6e36bfb1f5bcaa5601a7.html#a2430149f4b9d6e36bfb1f5bcaa5601a7">SurfaceModel::allocate_mass_flux</a>(std::shared_ptr&lt;const Grid&gt; grid) {</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160; </div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <span class="keyword">auto</span> result = std::make_shared&lt;array::Scalar&gt;(<a class="code" href="classpism_1_1Component_a1d7fa2a58f259a9c5e464f8738db6ef0.html#a1d7fa2a58f259a9c5e464f8738db6ef0">grid</a>, <span class="stringliteral">&quot;climatic_mass_balance&quot;</span>);</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160; </div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  result-&gt;metadata(0)</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;      .long_name(<span class="stringliteral">&quot;surface mass balance (accumulation/ablation) rate&quot;</span>)</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;      .units(<span class="stringliteral">&quot;kg m-2 second-1&quot;</span>)</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;      .output_units(<span class="stringliteral">&quot;kg m-2 year-1&quot;</span>)</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;      .standard_name(<span class="stringliteral">&quot;land_ice_surface_specific_mass_balance_flux&quot;</span>);</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160; </div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <span class="keyword">auto</span> config = <a class="code" href="classpism_1_1Component_a1d7fa2a58f259a9c5e464f8738db6ef0.html#a1d7fa2a58f259a9c5e464f8738db6ef0">grid</a>-&gt;ctx()-&gt;config();</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> smb_max = config-&gt;get_number(<span class="stringliteral">&quot;surface.given.smb_max&quot;</span>, <span class="stringliteral">&quot;kg m-2 second-1&quot;</span>);</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160; </div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  result-&gt;metadata()[<span class="stringliteral">&quot;valid_range&quot;</span>] = { -smb_max, smb_max };</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160; </div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;}</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160; </div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;std::shared_ptr&lt;array::Scalar&gt;</div>
<div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1SurfaceModel_a32219dd14a6a9d77222fb9c600e91f4e.html#a32219dd14a6a9d77222fb9c600e91f4e">   92</a></span>&#160;<a class="code" href="classpism_1_1surface_1_1SurfaceModel_a32219dd14a6a9d77222fb9c600e91f4e.html#a32219dd14a6a9d77222fb9c600e91f4e">SurfaceModel::allocate_temperature</a>(std::shared_ptr&lt;const Grid&gt; grid) {</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; </div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <span class="keyword">auto</span> result = std::make_shared&lt;array::Scalar&gt;(<a class="code" href="classpism_1_1Component_a1d7fa2a58f259a9c5e464f8738db6ef0.html#a1d7fa2a58f259a9c5e464f8738db6ef0">grid</a>, <span class="stringliteral">&quot;ice_surface_temp&quot;</span>);</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  result-&gt;metadata(0)</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;      .long_name(<span class="stringliteral">&quot;temperature of the ice at the ice surface but below firn processes&quot;</span>)</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      .units(<span class="stringliteral">&quot;Kelvin&quot;</span>);</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160; </div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  result-&gt;metadata()[<span class="stringliteral">&quot;valid_range&quot;</span>] = { 0.0, 323.15 }; <span class="comment">// [0C, 50C]</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160; </div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;}</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;std::shared_ptr&lt;array::Scalar&gt;</div>
<div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1SurfaceModel_a459787d4d0c29c321bf56698190f2f12.html#a459787d4d0c29c321bf56698190f2f12">  106</a></span>&#160;<a class="code" href="classpism_1_1surface_1_1SurfaceModel_a459787d4d0c29c321bf56698190f2f12.html#a459787d4d0c29c321bf56698190f2f12">SurfaceModel::allocate_accumulation</a>(std::shared_ptr&lt;const Grid&gt; grid) {</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160; </div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <span class="keyword">auto</span> result = std::make_shared&lt;array::Scalar&gt;(<a class="code" href="classpism_1_1Component_a1d7fa2a58f259a9c5e464f8738db6ef0.html#a1d7fa2a58f259a9c5e464f8738db6ef0">grid</a>, <span class="stringliteral">&quot;surface_accumulation_flux&quot;</span>);</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160; </div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  result-&gt;metadata(0).long_name(<span class="stringliteral">&quot;surface accumulation (precipitation minus rain)&quot;</span>).units(<span class="stringliteral">&quot;kg m-2&quot;</span>);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160; </div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;}</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160; </div>
<div class="line"><a name="l00115"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1SurfaceModel_a4b35686cb1a1884ddbe2d21689a46df7.html#a4b35686cb1a1884ddbe2d21689a46df7">  115</a></span>&#160;std::shared_ptr&lt;array::Scalar&gt; <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a4b35686cb1a1884ddbe2d21689a46df7.html#a4b35686cb1a1884ddbe2d21689a46df7">SurfaceModel::allocate_melt</a>(std::shared_ptr&lt;const Grid&gt; grid) {</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="keyword">auto</span> result = std::make_shared&lt;array::Scalar&gt;(<a class="code" href="classpism_1_1Component_a1d7fa2a58f259a9c5e464f8738db6ef0.html#a1d7fa2a58f259a9c5e464f8738db6ef0">grid</a>, <span class="stringliteral">&quot;surface_melt_flux&quot;</span>);</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160; </div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  result-&gt;metadata(0).long_name(<span class="stringliteral">&quot;surface melt&quot;</span>).units(<span class="stringliteral">&quot;kg m-2&quot;</span>);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160; </div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;}</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160; </div>
<div class="line"><a name="l00124"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1SurfaceModel_a0bc45dacd90ee84e94695505d3123ec6.html#a0bc45dacd90ee84e94695505d3123ec6">  124</a></span>&#160;std::shared_ptr&lt;array::Scalar&gt; <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a0bc45dacd90ee84e94695505d3123ec6.html#a0bc45dacd90ee84e94695505d3123ec6">SurfaceModel::allocate_runoff</a>(std::shared_ptr&lt;const Grid&gt; grid) {</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160; </div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <span class="keyword">auto</span> result = std::make_shared&lt;array::Scalar&gt;(<a class="code" href="classpism_1_1Component_a1d7fa2a58f259a9c5e464f8738db6ef0.html#a1d7fa2a58f259a9c5e464f8738db6ef0">grid</a>, <span class="stringliteral">&quot;surface_runoff_flux&quot;</span>);</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160; </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  result-&gt;metadata(0).long_name(<span class="stringliteral">&quot;surface meltwater runoff&quot;</span>).units(<span class="stringliteral">&quot;kg m-2&quot;</span>);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160; </div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;}</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160; </div>
<div class="line"><a name="l00133"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1SurfaceModel_a5a44a5205121f46aea0e2aae11de6bc8.html#a5a44a5205121f46aea0e2aae11de6bc8">  133</a></span>&#160;<a class="code" href="classpism_1_1surface_1_1SurfaceModel_a5a44a5205121f46aea0e2aae11de6bc8.html#a5a44a5205121f46aea0e2aae11de6bc8">SurfaceModel::SurfaceModel</a>(std::shared_ptr&lt;const Grid&gt; grid)</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  : <a class="code" href="classpism_1_1Component.html">Component</a>(grid) {</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160; </div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <a class="code" href="classpism_1_1surface_1_1SurfaceModel_acef85e81cf91fd47f9a03a2a571f4861.html#acef85e81cf91fd47f9a03a2a571f4861">m_liquid_water_fraction</a> = <a class="code" href="classpism_1_1surface_1_1SurfaceModel_afb40e99e6ee5b177a4d8b783e7329973.html#afb40e99e6ee5b177a4d8b783e7329973">allocate_liquid_water_fraction</a>(<a class="code" href="classpism_1_1Component_a1d7fa2a58f259a9c5e464f8738db6ef0.html#a1d7fa2a58f259a9c5e464f8738db6ef0">grid</a>);</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <a class="code" href="classpism_1_1surface_1_1SurfaceModel_aa6b840dc7d294c56acf584792f1c2655.html#aa6b840dc7d294c56acf584792f1c2655">m_layer_mass</a>            = <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a8bb12e76aa2f6e223fb33268f1c4a1ff.html#a8bb12e76aa2f6e223fb33268f1c4a1ff">allocate_layer_mass</a>(<a class="code" href="classpism_1_1Component_a1d7fa2a58f259a9c5e464f8738db6ef0.html#a1d7fa2a58f259a9c5e464f8738db6ef0">grid</a>);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a3128cde9cc2a24937e1959f0fbd6d64b.html#a3128cde9cc2a24937e1959f0fbd6d64b">m_layer_thickness</a>       = <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a5c770412f37f5201274f1f12658c1935.html#a5c770412f37f5201274f1f12658c1935">allocate_layer_thickness</a>(<a class="code" href="classpism_1_1Component_a1d7fa2a58f259a9c5e464f8738db6ef0.html#a1d7fa2a58f259a9c5e464f8738db6ef0">grid</a>);</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <a class="code" href="classpism_1_1surface_1_1SurfaceModel_acda04081d1de45b0b4996264dd58896c.html#acda04081d1de45b0b4996264dd58896c">m_accumulation</a>          = <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a459787d4d0c29c321bf56698190f2f12.html#a459787d4d0c29c321bf56698190f2f12">allocate_accumulation</a>(<a class="code" href="classpism_1_1Component_a1d7fa2a58f259a9c5e464f8738db6ef0.html#a1d7fa2a58f259a9c5e464f8738db6ef0">grid</a>);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a28b0421a4a06f1f0086d6599b17f418a.html#a28b0421a4a06f1f0086d6599b17f418a">m_melt</a>                  = <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a4b35686cb1a1884ddbe2d21689a46df7.html#a4b35686cb1a1884ddbe2d21689a46df7">allocate_melt</a>(<a class="code" href="classpism_1_1Component_a1d7fa2a58f259a9c5e464f8738db6ef0.html#a1d7fa2a58f259a9c5e464f8738db6ef0">grid</a>);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a5b33896b5a67acdb275214c64e499967.html#a5b33896b5a67acdb275214c64e499967">m_runoff</a>                = <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a0bc45dacd90ee84e94695505d3123ec6.html#a0bc45dacd90ee84e94695505d3123ec6">allocate_runoff</a>(<a class="code" href="classpism_1_1Component_a1d7fa2a58f259a9c5e464f8738db6ef0.html#a1d7fa2a58f259a9c5e464f8738db6ef0">grid</a>);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160; </div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <span class="comment">// default values</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a3128cde9cc2a24937e1959f0fbd6d64b.html#a3128cde9cc2a24937e1959f0fbd6d64b">m_layer_thickness</a>-&gt;set(0.0);</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  <a class="code" href="classpism_1_1surface_1_1SurfaceModel_aa6b840dc7d294c56acf584792f1c2655.html#aa6b840dc7d294c56acf584792f1c2655">m_layer_mass</a>-&gt;set(0.0);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <a class="code" href="classpism_1_1surface_1_1SurfaceModel_acef85e81cf91fd47f9a03a2a571f4861.html#acef85e81cf91fd47f9a03a2a571f4861">m_liquid_water_fraction</a>-&gt;set(0.0);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  <a class="code" href="classpism_1_1surface_1_1SurfaceModel_acda04081d1de45b0b4996264dd58896c.html#acda04081d1de45b0b4996264dd58896c">m_accumulation</a>-&gt;set(0.0);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a28b0421a4a06f1f0086d6599b17f418a.html#a28b0421a4a06f1f0086d6599b17f418a">m_melt</a>-&gt;set(0.0);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a5b33896b5a67acdb275214c64e499967.html#a5b33896b5a67acdb275214c64e499967">m_runoff</a>-&gt;set(0.0);</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;}</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160; </div>
<div class="line"><a name="l00152"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1SurfaceModel_abd156a3003ed3abaf12dd49294c9cd7d.html#abd156a3003ed3abaf12dd49294c9cd7d">  152</a></span>&#160;<a class="code" href="classpism_1_1surface_1_1SurfaceModel_a5a44a5205121f46aea0e2aae11de6bc8.html#a5a44a5205121f46aea0e2aae11de6bc8">SurfaceModel::SurfaceModel</a>(std::shared_ptr&lt;const Grid&gt; <a class="code" href="namespacepism_a47d754ed3e959d5866b02a1b78b6a5b5.html#a47d754ed3e959d5866b02a1b78b6a5b5">g</a>, std::shared_ptr&lt;SurfaceModel&gt; input)</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  : <a class="code" href="classpism_1_1Component.html">Component</a>(<a class="code" href="namespacepism_a47d754ed3e959d5866b02a1b78b6a5b5.html#a47d754ed3e959d5866b02a1b78b6a5b5">g</a>) {</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a7d5c078c2dbf02ac0a12fc4e209651c1.html#a7d5c078c2dbf02ac0a12fc4e209651c1">m_input_model</a> = input;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <span class="comment">// this is a modifier: allocate storage only if necessary (in derived classes)</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;}</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160; </div>
<div class="line"><a name="l00158"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1SurfaceModel_a511e60c60b647028011ba236d2ea2dcf.html#a511e60c60b647028011ba236d2ea2dcf">  158</a></span>&#160;<a class="code" href="classpism_1_1surface_1_1SurfaceModel_a5a44a5205121f46aea0e2aae11de6bc8.html#a5a44a5205121f46aea0e2aae11de6bc8">SurfaceModel::SurfaceModel</a>(std::shared_ptr&lt;const Grid&gt; grid,</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                           std::shared_ptr&lt;atmosphere::AtmosphereModel&gt; atmosphere)</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  : <a class="code" href="classpism_1_1surface_1_1SurfaceModel.html">SurfaceModel</a>(grid) {        <span class="comment">// this constructor will allocate storage</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160; </div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a22e31b57b550f96a22d16be8103d2bcc.html#a22e31b57b550f96a22d16be8103d2bcc">m_atmosphere</a> = atmosphere;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;}</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160; </div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment">//! \brief Returns accumulation</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment"></span><span class="comment">/*!</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment"> * Basic surface models currently implemented in PISM do not model accumulation</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00170"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1SurfaceModel_a356651c8125dcb5552ea01d27b29ce1d.html#a356651c8125dcb5552ea01d27b29ce1d">  170</a></span>&#160;<span class="keyword">const</span> <a class="code" href="classpism_1_1array_1_1Scalar.html">array::Scalar</a>&amp; <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a356651c8125dcb5552ea01d27b29ce1d.html#a356651c8125dcb5552ea01d27b29ce1d">SurfaceModel::accumulation</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a34763695b3bc8d2d80ef0c5f6fb66e20.html#a34763695b3bc8d2d80ef0c5f6fb66e20">accumulation_impl</a>();</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;}</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment">//! \brief Returns melt</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment"></span><span class="comment">/*!</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment"> * Basic surface models currently implemented in PISM do not model melt</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00178"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1SurfaceModel_a058528b11b0add13753a5c5eb6307744.html#a058528b11b0add13753a5c5eb6307744">  178</a></span>&#160;<span class="keyword">const</span> <a class="code" href="classpism_1_1array_1_1Scalar.html">array::Scalar</a>&amp; <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a058528b11b0add13753a5c5eb6307744.html#a058528b11b0add13753a5c5eb6307744">SurfaceModel::melt</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classpism_1_1surface_1_1SurfaceModel_aecd7af4c3aef21e45a1954b141422f33.html#aecd7af4c3aef21e45a1954b141422f33">melt_impl</a>();</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;}</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment">//! \brief Returns runoff</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment"></span><span class="comment">/*!</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment"> * Basic surface models currently implemented in PISM do not model runoff</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00186"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1SurfaceModel_aea81322270ddd2fc7c428c99f48dcda5.html#aea81322270ddd2fc7c428c99f48dcda5">  186</a></span>&#160;<span class="keyword">const</span> <a class="code" href="classpism_1_1array_1_1Scalar.html">array::Scalar</a>&amp; <a class="code" href="classpism_1_1surface_1_1SurfaceModel_aea81322270ddd2fc7c428c99f48dcda5.html#aea81322270ddd2fc7c428c99f48dcda5">SurfaceModel::runoff</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classpism_1_1surface_1_1SurfaceModel_ac88c8c944c2c1722351589125c603b5e.html#ac88c8c944c2c1722351589125c603b5e">runoff_impl</a>();</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;}</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160; </div>
<div class="line"><a name="l00190"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1SurfaceModel_a31ee22d6c222a8672863eae196e10f87.html#a31ee22d6c222a8672863eae196e10f87">  190</a></span>&#160;<span class="keyword">const</span> <a class="code" href="classpism_1_1array_1_1Scalar.html">array::Scalar</a>&amp; <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a31ee22d6c222a8672863eae196e10f87.html#a31ee22d6c222a8672863eae196e10f87">SurfaceModel::mass_flux</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classpism_1_1surface_1_1SurfaceModel_aa73b80c8ebb294587f206b7d45977a30.html#aa73b80c8ebb294587f206b7d45977a30">mass_flux_impl</a>();</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;}</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160; </div>
<div class="line"><a name="l00194"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1SurfaceModel_a99619f416c4c3549f5b1f1d3ae81be79.html#a99619f416c4c3549f5b1f1d3ae81be79">  194</a></span>&#160;<span class="keyword">const</span> <a class="code" href="classpism_1_1array_1_1Scalar.html">array::Scalar</a>&amp; <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a99619f416c4c3549f5b1f1d3ae81be79.html#a99619f416c4c3549f5b1f1d3ae81be79">SurfaceModel::temperature</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classpism_1_1surface_1_1SurfaceModel_afaca7f71589a0b66947c88af47b6b5d1.html#afaca7f71589a0b66947c88af47b6b5d1">temperature_impl</a>();</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;}</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment">//! \brief Returns the liquid water fraction of the ice at the top ice surface.</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment"></span><span class="comment">/*!</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment"> * Most PISM surface models return 0.</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00202"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1SurfaceModel_a13a6a476c9e3057ce86bd9e1096cbf84.html#a13a6a476c9e3057ce86bd9e1096cbf84">  202</a></span>&#160;<span class="keyword">const</span> <a class="code" href="classpism_1_1array_1_1Scalar.html">array::Scalar</a>&amp; <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a13a6a476c9e3057ce86bd9e1096cbf84.html#a13a6a476c9e3057ce86bd9e1096cbf84">SurfaceModel::liquid_water_fraction</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a406fd2b8bf810e92e257275ed39f995a.html#a406fd2b8bf810e92e257275ed39f995a">liquid_water_fraction_impl</a>();</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;}</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment">//! \brief Returns mass held in the surface layer.</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment"></span><span class="comment">/*!</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment"> * Basic surface models currently implemented in PISM do not model the mass of</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment"> * the surface layer.</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00211"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1SurfaceModel_a1e53c5049ea1688a117e3f975eff5465.html#a1e53c5049ea1688a117e3f975eff5465">  211</a></span>&#160;<span class="keyword">const</span> <a class="code" href="classpism_1_1array_1_1Scalar.html">array::Scalar</a>&amp; <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a1e53c5049ea1688a117e3f975eff5465.html#a1e53c5049ea1688a117e3f975eff5465">SurfaceModel::layer_mass</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a104eba2c6613cfecd423c2a8771a20ee.html#a104eba2c6613cfecd423c2a8771a20ee">layer_mass_impl</a>();</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;}</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment">//! \brief Returns thickness of the surface layer. Could be used to compute surface</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment">//! elevation as a sum of elevation of the top surface of the ice and surface layer (firn,</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment">//! etc) thickness.</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment"></span><span class="comment">/*!</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment"> * Basic surface models currently implemented in PISM do not model surface</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment"> * layer thickness.</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00222"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1SurfaceModel_ae37a02de4c933356c550faba073e4427.html#ae37a02de4c933356c550faba073e4427">  222</a></span>&#160;<span class="keyword">const</span> <a class="code" href="classpism_1_1array_1_1Scalar.html">array::Scalar</a>&amp; <a class="code" href="classpism_1_1surface_1_1SurfaceModel_ae37a02de4c933356c550faba073e4427.html#ae37a02de4c933356c550faba073e4427">SurfaceModel::layer_thickness</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classpism_1_1surface_1_1SurfaceModel_af750b591bb3d15c2bf851c6fcb201470.html#af750b591bb3d15c2bf851c6fcb201470">layer_thickness_impl</a>();</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;}</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160; </div>
<div class="line"><a name="l00226"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1SurfaceModel_a34763695b3bc8d2d80ef0c5f6fb66e20.html#a34763695b3bc8d2d80ef0c5f6fb66e20">  226</a></span>&#160;<span class="keyword">const</span> <a class="code" href="classpism_1_1array_1_1Scalar.html">array::Scalar</a>&amp; <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a34763695b3bc8d2d80ef0c5f6fb66e20.html#a34763695b3bc8d2d80ef0c5f6fb66e20">SurfaceModel::accumulation_impl</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classpism_1_1surface_1_1SurfaceModel_a7d5c078c2dbf02ac0a12fc4e209651c1.html#a7d5c078c2dbf02ac0a12fc4e209651c1">m_input_model</a>) {</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a7d5c078c2dbf02ac0a12fc4e209651c1.html#a7d5c078c2dbf02ac0a12fc4e209651c1">m_input_model</a>-&gt;accumulation();</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  }</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160; </div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <span class="keywordflow">throw</span> <a class="code" href="classpism_1_1RuntimeError_ad0ed5f05a9a4e3e403a1d62f8d1e4e7d.html#ad0ed5f05a9a4e3e403a1d62f8d1e4e7d">RuntimeError::formatted</a>(<a class="code" href="error__handling_8hh_aa0c260bffe8a4dbd77d48e8feee7c526.html#aa0c260bffe8a4dbd77d48e8feee7c526">PISM_ERROR_LOCATION</a>, <span class="stringliteral">&quot;no input model&quot;</span>);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;}</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160; </div>
<div class="line"><a name="l00234"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1SurfaceModel_aecd7af4c3aef21e45a1954b141422f33.html#aecd7af4c3aef21e45a1954b141422f33">  234</a></span>&#160;<span class="keyword">const</span> <a class="code" href="classpism_1_1array_1_1Scalar.html">array::Scalar</a>&amp; <a class="code" href="classpism_1_1surface_1_1SurfaceModel_aecd7af4c3aef21e45a1954b141422f33.html#aecd7af4c3aef21e45a1954b141422f33">SurfaceModel::melt_impl</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classpism_1_1surface_1_1SurfaceModel_a7d5c078c2dbf02ac0a12fc4e209651c1.html#a7d5c078c2dbf02ac0a12fc4e209651c1">m_input_model</a>) {</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a7d5c078c2dbf02ac0a12fc4e209651c1.html#a7d5c078c2dbf02ac0a12fc4e209651c1">m_input_model</a>-&gt;melt();</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  }</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160; </div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <span class="keywordflow">throw</span> <a class="code" href="classpism_1_1RuntimeError_ad0ed5f05a9a4e3e403a1d62f8d1e4e7d.html#ad0ed5f05a9a4e3e403a1d62f8d1e4e7d">RuntimeError::formatted</a>(<a class="code" href="error__handling_8hh_aa0c260bffe8a4dbd77d48e8feee7c526.html#aa0c260bffe8a4dbd77d48e8feee7c526">PISM_ERROR_LOCATION</a>, <span class="stringliteral">&quot;no input model&quot;</span>);</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;}</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160; </div>
<div class="line"><a name="l00242"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1SurfaceModel_ac88c8c944c2c1722351589125c603b5e.html#ac88c8c944c2c1722351589125c603b5e">  242</a></span>&#160;<span class="keyword">const</span> <a class="code" href="classpism_1_1array_1_1Scalar.html">array::Scalar</a>&amp; <a class="code" href="classpism_1_1surface_1_1SurfaceModel_ac88c8c944c2c1722351589125c603b5e.html#ac88c8c944c2c1722351589125c603b5e">SurfaceModel::runoff_impl</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classpism_1_1surface_1_1SurfaceModel_a7d5c078c2dbf02ac0a12fc4e209651c1.html#a7d5c078c2dbf02ac0a12fc4e209651c1">m_input_model</a>) {</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a7d5c078c2dbf02ac0a12fc4e209651c1.html#a7d5c078c2dbf02ac0a12fc4e209651c1">m_input_model</a>-&gt;runoff();</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  }</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160; </div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <span class="keywordflow">throw</span> <a class="code" href="classpism_1_1RuntimeError_ad0ed5f05a9a4e3e403a1d62f8d1e4e7d.html#ad0ed5f05a9a4e3e403a1d62f8d1e4e7d">RuntimeError::formatted</a>(<a class="code" href="error__handling_8hh_aa0c260bffe8a4dbd77d48e8feee7c526.html#aa0c260bffe8a4dbd77d48e8feee7c526">PISM_ERROR_LOCATION</a>, <span class="stringliteral">&quot;no input model&quot;</span>);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;}</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160; </div>
<div class="line"><a name="l00250"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1SurfaceModel_aa73b80c8ebb294587f206b7d45977a30.html#aa73b80c8ebb294587f206b7d45977a30">  250</a></span>&#160;<span class="keyword">const</span> <a class="code" href="classpism_1_1array_1_1Scalar.html">array::Scalar</a>&amp; <a class="code" href="classpism_1_1surface_1_1SurfaceModel_aa73b80c8ebb294587f206b7d45977a30.html#aa73b80c8ebb294587f206b7d45977a30">SurfaceModel::mass_flux_impl</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classpism_1_1surface_1_1SurfaceModel_a7d5c078c2dbf02ac0a12fc4e209651c1.html#a7d5c078c2dbf02ac0a12fc4e209651c1">m_input_model</a>) {</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a7d5c078c2dbf02ac0a12fc4e209651c1.html#a7d5c078c2dbf02ac0a12fc4e209651c1">m_input_model</a>-&gt;mass_flux();</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  }</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160; </div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <span class="keywordflow">throw</span> <a class="code" href="classpism_1_1RuntimeError_ad0ed5f05a9a4e3e403a1d62f8d1e4e7d.html#ad0ed5f05a9a4e3e403a1d62f8d1e4e7d">RuntimeError::formatted</a>(<a class="code" href="error__handling_8hh_aa0c260bffe8a4dbd77d48e8feee7c526.html#aa0c260bffe8a4dbd77d48e8feee7c526">PISM_ERROR_LOCATION</a>, <span class="stringliteral">&quot;no input model&quot;</span>);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;}</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160; </div>
<div class="line"><a name="l00258"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1SurfaceModel_afaca7f71589a0b66947c88af47b6b5d1.html#afaca7f71589a0b66947c88af47b6b5d1">  258</a></span>&#160;<span class="keyword">const</span> <a class="code" href="classpism_1_1array_1_1Scalar.html">array::Scalar</a>&amp; <a class="code" href="classpism_1_1surface_1_1SurfaceModel_afaca7f71589a0b66947c88af47b6b5d1.html#afaca7f71589a0b66947c88af47b6b5d1">SurfaceModel::temperature_impl</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classpism_1_1surface_1_1SurfaceModel_a7d5c078c2dbf02ac0a12fc4e209651c1.html#a7d5c078c2dbf02ac0a12fc4e209651c1">m_input_model</a>) {</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a7d5c078c2dbf02ac0a12fc4e209651c1.html#a7d5c078c2dbf02ac0a12fc4e209651c1">m_input_model</a>-&gt;temperature();</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  }</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160; </div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="keywordflow">throw</span> <a class="code" href="classpism_1_1RuntimeError_ad0ed5f05a9a4e3e403a1d62f8d1e4e7d.html#ad0ed5f05a9a4e3e403a1d62f8d1e4e7d">RuntimeError::formatted</a>(<a class="code" href="error__handling_8hh_aa0c260bffe8a4dbd77d48e8feee7c526.html#aa0c260bffe8a4dbd77d48e8feee7c526">PISM_ERROR_LOCATION</a>, <span class="stringliteral">&quot;no input model&quot;</span>);</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;}</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160; </div>
<div class="line"><a name="l00266"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1SurfaceModel_a406fd2b8bf810e92e257275ed39f995a.html#a406fd2b8bf810e92e257275ed39f995a">  266</a></span>&#160;<span class="keyword">const</span> <a class="code" href="classpism_1_1array_1_1Scalar.html">array::Scalar</a>&amp; <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a406fd2b8bf810e92e257275ed39f995a.html#a406fd2b8bf810e92e257275ed39f995a">SurfaceModel::liquid_water_fraction_impl</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classpism_1_1surface_1_1SurfaceModel_a7d5c078c2dbf02ac0a12fc4e209651c1.html#a7d5c078c2dbf02ac0a12fc4e209651c1">m_input_model</a>) {</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a7d5c078c2dbf02ac0a12fc4e209651c1.html#a7d5c078c2dbf02ac0a12fc4e209651c1">m_input_model</a>-&gt;liquid_water_fraction();</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  }</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160; </div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <span class="keywordflow">return</span> *<a class="code" href="classpism_1_1surface_1_1SurfaceModel_acef85e81cf91fd47f9a03a2a571f4861.html#acef85e81cf91fd47f9a03a2a571f4861">m_liquid_water_fraction</a>;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;}</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160; </div>
<div class="line"><a name="l00274"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1SurfaceModel_a104eba2c6613cfecd423c2a8771a20ee.html#a104eba2c6613cfecd423c2a8771a20ee">  274</a></span>&#160;<span class="keyword">const</span> <a class="code" href="classpism_1_1array_1_1Scalar.html">array::Scalar</a>&amp; <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a104eba2c6613cfecd423c2a8771a20ee.html#a104eba2c6613cfecd423c2a8771a20ee">SurfaceModel::layer_mass_impl</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classpism_1_1surface_1_1SurfaceModel_a7d5c078c2dbf02ac0a12fc4e209651c1.html#a7d5c078c2dbf02ac0a12fc4e209651c1">m_input_model</a>) {</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a7d5c078c2dbf02ac0a12fc4e209651c1.html#a7d5c078c2dbf02ac0a12fc4e209651c1">m_input_model</a>-&gt;layer_mass();</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  }</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160; </div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <span class="keywordflow">return</span> *<a class="code" href="classpism_1_1surface_1_1SurfaceModel_aa6b840dc7d294c56acf584792f1c2655.html#aa6b840dc7d294c56acf584792f1c2655">m_layer_mass</a>;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;}</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160; </div>
<div class="line"><a name="l00282"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1SurfaceModel_af750b591bb3d15c2bf851c6fcb201470.html#af750b591bb3d15c2bf851c6fcb201470">  282</a></span>&#160;<span class="keyword">const</span> <a class="code" href="classpism_1_1array_1_1Scalar.html">array::Scalar</a>&amp; <a class="code" href="classpism_1_1surface_1_1SurfaceModel_af750b591bb3d15c2bf851c6fcb201470.html#af750b591bb3d15c2bf851c6fcb201470">SurfaceModel::layer_thickness_impl</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classpism_1_1surface_1_1SurfaceModel_a7d5c078c2dbf02ac0a12fc4e209651c1.html#a7d5c078c2dbf02ac0a12fc4e209651c1">m_input_model</a>) {</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a7d5c078c2dbf02ac0a12fc4e209651c1.html#a7d5c078c2dbf02ac0a12fc4e209651c1">m_input_model</a>-&gt;layer_thickness();</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  }</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160; </div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  <span class="keywordflow">return</span> *<a class="code" href="classpism_1_1surface_1_1SurfaceModel_a3128cde9cc2a24937e1959f0fbd6d64b.html#a3128cde9cc2a24937e1959f0fbd6d64b">m_layer_thickness</a>;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;}</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160; </div>
<div class="line"><a name="l00290"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1SurfaceModel_a2a0de4064fef0a537c91e49bad13f023.html#a2a0de4064fef0a537c91e49bad13f023">  290</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a2a0de4064fef0a537c91e49bad13f023.html#a2a0de4064fef0a537c91e49bad13f023">SurfaceModel::init</a>(<span class="keyword">const</span> <a class="code" href="classpism_1_1Geometry.html">Geometry</a> &amp;geometry) {</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  this-&gt;<a class="code" href="classpism_1_1surface_1_1SurfaceModel_ad96db6e402a90adb744b7e7ad9322cb3.html#ad96db6e402a90adb744b7e7ad9322cb3">init_impl</a>(geometry);</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;}</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160; </div>
<div class="line"><a name="l00294"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1SurfaceModel_ad96db6e402a90adb744b7e7ad9322cb3.html#ad96db6e402a90adb744b7e7ad9322cb3">  294</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classpism_1_1surface_1_1SurfaceModel_ad96db6e402a90adb744b7e7ad9322cb3.html#ad96db6e402a90adb744b7e7ad9322cb3">SurfaceModel::init_impl</a>(<span class="keyword">const</span> <a class="code" href="classpism_1_1Geometry.html">Geometry</a> &amp;geometry) {</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classpism_1_1surface_1_1SurfaceModel_a22e31b57b550f96a22d16be8103d2bcc.html#a22e31b57b550f96a22d16be8103d2bcc">m_atmosphere</a>) {</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a22e31b57b550f96a22d16be8103d2bcc.html#a22e31b57b550f96a22d16be8103d2bcc">m_atmosphere</a>-&gt;init(geometry);</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  }</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160; </div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classpism_1_1surface_1_1SurfaceModel_a7d5c078c2dbf02ac0a12fc4e209651c1.html#a7d5c078c2dbf02ac0a12fc4e209651c1">m_input_model</a>) {</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a7d5c078c2dbf02ac0a12fc4e209651c1.html#a7d5c078c2dbf02ac0a12fc4e209651c1">m_input_model</a>-&gt;init(geometry);</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  }</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;}</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160; </div>
<div class="line"><a name="l00304"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1SurfaceModel_a22c70c6c04eed7800c882e8948fbd1a2.html#a22c70c6c04eed7800c882e8948fbd1a2">  304</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a22c70c6c04eed7800c882e8948fbd1a2.html#a22c70c6c04eed7800c882e8948fbd1a2">SurfaceModel::update</a>(<span class="keyword">const</span> <a class="code" href="classpism_1_1Geometry.html">Geometry</a> &amp;geometry, <span class="keywordtype">double</span> t, <span class="keywordtype">double</span> dt) {</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  this-&gt;<a class="code" href="classpism_1_1surface_1_1SurfaceModel_a28adc37bcde341bc0027d181ba838d40.html#a28adc37bcde341bc0027d181ba838d40">update_impl</a>(geometry, t, dt);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;}</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160; </div>
<div class="line"><a name="l00308"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1SurfaceModel_a28adc37bcde341bc0027d181ba838d40.html#a28adc37bcde341bc0027d181ba838d40">  308</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a28adc37bcde341bc0027d181ba838d40.html#a28adc37bcde341bc0027d181ba838d40">SurfaceModel::update_impl</a>(<span class="keyword">const</span> <a class="code" href="classpism_1_1Geometry.html">Geometry</a> &amp;geometry, <span class="keywordtype">double</span> t, <span class="keywordtype">double</span> dt) {</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classpism_1_1surface_1_1SurfaceModel_a22e31b57b550f96a22d16be8103d2bcc.html#a22e31b57b550f96a22d16be8103d2bcc">m_atmosphere</a>) {</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a22e31b57b550f96a22d16be8103d2bcc.html#a22e31b57b550f96a22d16be8103d2bcc">m_atmosphere</a>-&gt;update(geometry, t, dt);</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  }</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160; </div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classpism_1_1surface_1_1SurfaceModel_a7d5c078c2dbf02ac0a12fc4e209651c1.html#a7d5c078c2dbf02ac0a12fc4e209651c1">m_input_model</a>) {</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a7d5c078c2dbf02ac0a12fc4e209651c1.html#a7d5c078c2dbf02ac0a12fc4e209651c1">m_input_model</a>-&gt;update(geometry, t, dt);</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  }</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;}</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160; </div>
<div class="line"><a name="l00318"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1SurfaceModel_a2e6c1ed05226d150c8240ad865946999.html#a2e6c1ed05226d150c8240ad865946999">  318</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a2e6c1ed05226d150c8240ad865946999.html#a2e6c1ed05226d150c8240ad865946999">SurfaceModel::define_model_state_impl</a>(<span class="keyword">const</span> <a class="code" href="classpism_1_1File.html">File</a> &amp;output)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classpism_1_1surface_1_1SurfaceModel_a22e31b57b550f96a22d16be8103d2bcc.html#a22e31b57b550f96a22d16be8103d2bcc">m_atmosphere</a>) {</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a22e31b57b550f96a22d16be8103d2bcc.html#a22e31b57b550f96a22d16be8103d2bcc">m_atmosphere</a>-&gt;define_model_state(output);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  }</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160; </div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classpism_1_1surface_1_1SurfaceModel_a7d5c078c2dbf02ac0a12fc4e209651c1.html#a7d5c078c2dbf02ac0a12fc4e209651c1">m_input_model</a>) {</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a7d5c078c2dbf02ac0a12fc4e209651c1.html#a7d5c078c2dbf02ac0a12fc4e209651c1">m_input_model</a>-&gt;define_model_state(output);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  }</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;}</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160; </div>
<div class="line"><a name="l00328"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1SurfaceModel_a2d7e7c56b9feab53f1b9058ed738ff24.html#a2d7e7c56b9feab53f1b9058ed738ff24">  328</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a2d7e7c56b9feab53f1b9058ed738ff24.html#a2d7e7c56b9feab53f1b9058ed738ff24">SurfaceModel::write_model_state_impl</a>(<span class="keyword">const</span> <a class="code" href="classpism_1_1File.html">File</a> &amp;output)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classpism_1_1surface_1_1SurfaceModel_a22e31b57b550f96a22d16be8103d2bcc.html#a22e31b57b550f96a22d16be8103d2bcc">m_atmosphere</a>) {</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a22e31b57b550f96a22d16be8103d2bcc.html#a22e31b57b550f96a22d16be8103d2bcc">m_atmosphere</a>-&gt;write_model_state(output);</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  }</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160; </div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classpism_1_1surface_1_1SurfaceModel_a7d5c078c2dbf02ac0a12fc4e209651c1.html#a7d5c078c2dbf02ac0a12fc4e209651c1">m_input_model</a>) {</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a7d5c078c2dbf02ac0a12fc4e209651c1.html#a7d5c078c2dbf02ac0a12fc4e209651c1">m_input_model</a>-&gt;write_model_state(output);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  }</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;}</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160; </div>
<div class="line"><a name="l00338"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1SurfaceModel_a4a8a5b6d913f4d57a7dfe69d0a939192.html#a4a8a5b6d913f4d57a7dfe69d0a939192">  338</a></span>&#160;<a class="code" href="classpism_1_1MaxTimestep.html">MaxTimestep</a> <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a4a8a5b6d913f4d57a7dfe69d0a939192.html#a4a8a5b6d913f4d57a7dfe69d0a939192">SurfaceModel::max_timestep_impl</a>(<span class="keywordtype">double</span> t)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classpism_1_1surface_1_1SurfaceModel_a22e31b57b550f96a22d16be8103d2bcc.html#a22e31b57b550f96a22d16be8103d2bcc">m_atmosphere</a>) {</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a22e31b57b550f96a22d16be8103d2bcc.html#a22e31b57b550f96a22d16be8103d2bcc">m_atmosphere</a>-&gt;max_timestep(t);</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  }</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160; </div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classpism_1_1surface_1_1SurfaceModel_a7d5c078c2dbf02ac0a12fc4e209651c1.html#a7d5c078c2dbf02ac0a12fc4e209651c1">m_input_model</a>) {</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a7d5c078c2dbf02ac0a12fc4e209651c1.html#a7d5c078c2dbf02ac0a12fc4e209651c1">m_input_model</a>-&gt;max_timestep(t);</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  }</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160; </div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classpism_1_1MaxTimestep.html">MaxTimestep</a>(<span class="stringliteral">&quot;surface model&quot;</span>);</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;}</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="comment">/*!</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="comment"> * Use the surface mass balance to compute dummy accumulation.</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="comment"> * This is used by surface models that compute the SMB but do not provide accumulation,</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="comment"> * melt, and runoff.</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="comment"> * We assume that the positive part of the SMB is accumulation and the negative part is</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="comment"> * runoff. This ensures that outputs of PISM&#39;s surface models satisfy &quot;SMB = accumulation</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="comment"> * - runoff&quot;.</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00360"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1SurfaceModel_a2672ef3ce9378b9da9d834dad76a04b4.html#a2672ef3ce9378b9da9d834dad76a04b4">  360</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a2672ef3ce9378b9da9d834dad76a04b4.html#a2672ef3ce9378b9da9d834dad76a04b4">SurfaceModel::dummy_accumulation</a>(<span class="keyword">const</span> <a class="code" href="classpism_1_1array_1_1Scalar.html">array::Scalar</a>&amp; smb, <a class="code" href="classpism_1_1array_1_1Scalar.html">array::Scalar</a>&amp; result) {</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160; </div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  <a class="code" href="classpism_1_1array_1_1AccessScope.html">array::AccessScope</a> list{&amp;result, &amp;smb};</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160; </div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> p = <a class="code" href="classpism_1_1Component_a745aa37bc1b5da6db5bfc280ecb3c811.html#a745aa37bc1b5da6db5bfc280ecb3c811">m_grid</a>-&gt;points(); p; p.next()) {</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> i = p.i(), j = p.j();</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    result(i,j) = <a class="code" href="namespacepism_1_1array_a8957d08741c6f48d1e554ac7ea98530a.html#a8957d08741c6f48d1e554ac7ea98530a">std::max</a>(smb(i,j), 0.0);</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  }</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;}</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="comment">/*!</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="comment"> * Use the surface mass balance to compute dummy runoff.</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="comment"> * This is used by surface models that compute the SMB but do not provide accumulation,</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="comment"> * melt, and runoff.</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="comment"> * We assume that the positive part of the SMB is accumulation and the negative part is</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="comment"> * runoff. This ensures that outputs of PISM&#39;s surface models satisfy &quot;SMB = accumulation</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="comment"> * - runoff&quot;.</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00380"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1SurfaceModel_af7718482a79bc0ad7c8fa8b7ccfe2ffc.html#af7718482a79bc0ad7c8fa8b7ccfe2ffc">  380</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classpism_1_1surface_1_1SurfaceModel_af7718482a79bc0ad7c8fa8b7ccfe2ffc.html#af7718482a79bc0ad7c8fa8b7ccfe2ffc">SurfaceModel::dummy_runoff</a>(<span class="keyword">const</span> <a class="code" href="classpism_1_1array_1_1Scalar.html">array::Scalar</a>&amp; smb, <a class="code" href="classpism_1_1array_1_1Scalar.html">array::Scalar</a>&amp; result) {</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160; </div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  <a class="code" href="classpism_1_1array_1_1AccessScope.html">array::AccessScope</a> list{&amp;result, &amp;smb};</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160; </div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> p = <a class="code" href="classpism_1_1Component_a745aa37bc1b5da6db5bfc280ecb3c811.html#a745aa37bc1b5da6db5bfc280ecb3c811">m_grid</a>-&gt;points(); p; p.next()) {</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> i = p.i(), j = p.j();</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    result(i,j) = <a class="code" href="namespacepism_1_1array_a8957d08741c6f48d1e554ac7ea98530a.html#a8957d08741c6f48d1e554ac7ea98530a">std::max</a>(-smb(i,j), 0.0);</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  }</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;}</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment">/*!</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="comment"> * Use the surface mass balance to compute dummy runoff.</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="comment"> * This is used by surface models that compute the SMB but do not provide accumulation,</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="comment"> * melt, and runoff.</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="comment"> * We assume that all melt runs off, i.e. runoff = melt, but treat melt as a &quot;derived&quot;</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="comment"> * quantity.</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00399"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1SurfaceModel_a7b9a08a3dd1e7b83f722ac4badb98e55.html#a7b9a08a3dd1e7b83f722ac4badb98e55">  399</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a7b9a08a3dd1e7b83f722ac4badb98e55.html#a7b9a08a3dd1e7b83f722ac4badb98e55">SurfaceModel::dummy_melt</a>(<span class="keyword">const</span> <a class="code" href="classpism_1_1array_1_1Scalar.html">array::Scalar</a>&amp; smb, <a class="code" href="classpism_1_1array_1_1Scalar.html">array::Scalar</a>&amp; result) {</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <a class="code" href="classpism_1_1surface_1_1SurfaceModel_af7718482a79bc0ad7c8fa8b7ccfe2ffc.html#af7718482a79bc0ad7c8fa8b7ccfe2ffc">dummy_runoff</a>(smb, result);</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;}</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160; </div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;<span class="keyword">namespace </span>diagnostics {</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160; </div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="comment">// SurfaceModel diagnostics (these don&#39;t need to be in the header)</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="comment">/*! @brief Climatic mass balance */</span></div>
<div class="line"><a name="l00408"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1diagnostics_1_1PS__climatic__mass__balance.html">  408</a></span>&#160;<span class="keyword">class </span><a class="code" href="classpism_1_1surface_1_1diagnostics_1_1PS__climatic__mass__balance.html">PS_climatic_mass_balance</a> : <span class="keyword">public</span> <a class="code" href="classpism_1_1Diag.html">Diag</a>&lt;SurfaceModel&gt;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;{</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <a class="code" href="classpism_1_1surface_1_1diagnostics_1_1PS__climatic__mass__balance_a1002a2b3728685e7740c54b6f95eea6f.html#a1002a2b3728685e7740c54b6f95eea6f">PS_climatic_mass_balance</a>(<span class="keyword">const</span> <a class="code" href="classpism_1_1surface_1_1SurfaceModel.html">SurfaceModel</a> *m);</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="keyword">protected</span>:</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  std::shared_ptr&lt;array::Array&gt; <a class="code" href="classpism_1_1surface_1_1diagnostics_1_1PS__climatic__mass__balance_a85ee4c8baea81c199cd04d78480862de.html#a85ee4c8baea81c199cd04d78480862de">compute_impl</a>() <span class="keyword">const</span>;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;};</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="comment">/*! @brief Ice surface temperature. */</span></div>
<div class="line"><a name="l00417"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1diagnostics_1_1PS__ice__surface__temp.html">  417</a></span>&#160;<span class="keyword">class </span><a class="code" href="classpism_1_1surface_1_1diagnostics_1_1PS__ice__surface__temp.html">PS_ice_surface_temp</a> : <span class="keyword">public</span> <a class="code" href="classpism_1_1Diag.html">Diag</a>&lt;SurfaceModel&gt;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;{</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  <a class="code" href="classpism_1_1surface_1_1diagnostics_1_1PS__ice__surface__temp_aca7440a29432d92d6f56f8705b337a5d.html#aca7440a29432d92d6f56f8705b337a5d">PS_ice_surface_temp</a>(<span class="keyword">const</span> <a class="code" href="classpism_1_1surface_1_1SurfaceModel.html">SurfaceModel</a> *m);</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="keyword">protected</span>:</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  std::shared_ptr&lt;array::Array&gt; <a class="code" href="classpism_1_1surface_1_1diagnostics_1_1PS__ice__surface__temp_a65e86b3bf823a0c62baf1538e31dee21.html#a65e86b3bf823a0c62baf1538e31dee21">compute_impl</a>() <span class="keyword">const</span>;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;};</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="comment">/*! @brief Ice liquid water fraction at the ice surface. */</span></div>
<div class="line"><a name="l00426"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1diagnostics_1_1PS__liquid__water__fraction.html">  426</a></span>&#160;<span class="keyword">class </span><a class="code" href="classpism_1_1surface_1_1diagnostics_1_1PS__liquid__water__fraction.html">PS_liquid_water_fraction</a> : <span class="keyword">public</span> <a class="code" href="classpism_1_1Diag.html">Diag</a>&lt;SurfaceModel&gt;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;{</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  <a class="code" href="classpism_1_1surface_1_1diagnostics_1_1PS__liquid__water__fraction_aa6c56cfccf09b828ce501ece98e5b8fb.html#aa6c56cfccf09b828ce501ece98e5b8fb">PS_liquid_water_fraction</a>(<span class="keyword">const</span> <a class="code" href="classpism_1_1surface_1_1SurfaceModel.html">SurfaceModel</a> *m);</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="keyword">protected</span>:</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  std::shared_ptr&lt;array::Array&gt; <a class="code" href="classpism_1_1surface_1_1diagnostics_1_1PS__liquid__water__fraction_a0b0792d414e0b20c91ce2e3482812c4e.html#a0b0792d414e0b20c91ce2e3482812c4e">compute_impl</a>() <span class="keyword">const</span>;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;};</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="comment">/*! @brief Mass of the surface layer (snow and firn). */</span></div>
<div class="line"><a name="l00435"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1diagnostics_1_1PS__layer__mass.html">  435</a></span>&#160;<span class="keyword">class </span><a class="code" href="classpism_1_1surface_1_1diagnostics_1_1PS__layer__mass.html">PS_layer_mass</a> : <span class="keyword">public</span> <a class="code" href="classpism_1_1Diag.html">Diag</a>&lt;SurfaceModel&gt;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;{</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  <a class="code" href="classpism_1_1surface_1_1diagnostics_1_1PS__layer__mass_ae41c7cfa31339ee9c6a706d31ceece37.html#ae41c7cfa31339ee9c6a706d31ceece37">PS_layer_mass</a>(<span class="keyword">const</span> <a class="code" href="classpism_1_1surface_1_1SurfaceModel.html">SurfaceModel</a> *m);</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="keyword">protected</span>:</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  std::shared_ptr&lt;array::Array&gt; <a class="code" href="classpism_1_1surface_1_1diagnostics_1_1PS__layer__mass_ac966d78670dfca68f45f8c507c8c7549.html#ac966d78670dfca68f45f8c507c8c7549">compute_impl</a>() <span class="keyword">const</span>;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;};</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="comment">/*! @brief Surface layer (snow and firn) thickness. */</span></div>
<div class="line"><a name="l00444"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1diagnostics_1_1PS__layer__thickness.html">  444</a></span>&#160;<span class="keyword">class </span><a class="code" href="classpism_1_1surface_1_1diagnostics_1_1PS__layer__thickness.html">PS_layer_thickness</a> : <span class="keyword">public</span> <a class="code" href="classpism_1_1Diag.html">Diag</a>&lt;SurfaceModel&gt;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;{</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  <a class="code" href="classpism_1_1surface_1_1diagnostics_1_1PS__layer__thickness_a69d7d189f78d53142a0a4044e018e8c8.html#a69d7d189f78d53142a0a4044e018e8c8">PS_layer_thickness</a>(<span class="keyword">const</span> <a class="code" href="classpism_1_1surface_1_1SurfaceModel.html">SurfaceModel</a> *m);</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="keyword">protected</span>:</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  std::shared_ptr&lt;array::Array&gt; <a class="code" href="classpism_1_1surface_1_1diagnostics_1_1PS__layer__thickness_a97d5d07803328d9cc478d9aa79b25862.html#a97d5d07803328d9cc478d9aa79b25862">compute_impl</a>() <span class="keyword">const</span>;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;};</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160; </div>
<div class="line"><a name="l00452"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1diagnostics_1_1PS__climatic__mass__balance_a1002a2b3728685e7740c54b6f95eea6f.html#a1002a2b3728685e7740c54b6f95eea6f">  452</a></span>&#160;<a class="code" href="classpism_1_1surface_1_1diagnostics_1_1PS__climatic__mass__balance_a1002a2b3728685e7740c54b6f95eea6f.html#a1002a2b3728685e7740c54b6f95eea6f">PS_climatic_mass_balance::PS_climatic_mass_balance</a>(<span class="keyword">const</span> <a class="code" href="classpism_1_1surface_1_1SurfaceModel.html">SurfaceModel</a> *m)</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  : <a class="code" href="classpism_1_1Diag.html">Diag</a>&lt;<a class="code" href="classpism_1_1surface_1_1SurfaceModel.html">SurfaceModel</a>&gt;(m) {</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160; </div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  <span class="comment">/* set metadata: */</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  <a class="code" href="classpism_1_1Diagnostic_a7590d3d6d714ca1bbc99787baea537e0.html#a7590d3d6d714ca1bbc99787baea537e0">m_vars</a> = { { <a class="code" href="classpism_1_1Diagnostic_a66c35ec2a3236c20757ba9ce5880eb6d.html#a66c35ec2a3236c20757ba9ce5880eb6d">m_sys</a>, <span class="stringliteral">&quot;climatic_mass_balance&quot;</span> } };</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  <a class="code" href="classpism_1_1Diagnostic_a7590d3d6d714ca1bbc99787baea537e0.html#a7590d3d6d714ca1bbc99787baea537e0">m_vars</a>[0]</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;      .long_name(<span class="stringliteral">&quot;surface mass balance (accumulation/ablation) rate&quot;</span>)</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;      .standard_name(<span class="stringliteral">&quot;land_ice_surface_specific_mass_balance_flux&quot;</span>)</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;      .units(<span class="stringliteral">&quot;kg m-2 second-1&quot;</span>)</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;      .output_units(<span class="stringliteral">&quot;kg m-2 year-1&quot;</span>);</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;}</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160; </div>
<div class="line"><a name="l00464"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1diagnostics_1_1PS__climatic__mass__balance_a85ee4c8baea81c199cd04d78480862de.html#a85ee4c8baea81c199cd04d78480862de">  464</a></span>&#160;std::shared_ptr&lt;array::Array&gt; <a class="code" href="classpism_1_1surface_1_1diagnostics_1_1PS__climatic__mass__balance_a85ee4c8baea81c199cd04d78480862de.html#a85ee4c8baea81c199cd04d78480862de">PS_climatic_mass_balance::compute_impl</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  <span class="keyword">auto</span> result = allocate&lt;array::Scalar&gt;(<span class="stringliteral">&quot;climatic_mass_balance&quot;</span>);</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160; </div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  result-&gt;copy_from(<a class="code" href="classpism_1_1Diag_aa3e0516ca815c840bfa479256aa1f711.html#aa3e0516ca815c840bfa479256aa1f711">model</a>-&gt;mass_flux());</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160; </div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;}</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160; </div>
<div class="line"><a name="l00472"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1diagnostics_1_1PS__ice__surface__temp_aca7440a29432d92d6f56f8705b337a5d.html#aca7440a29432d92d6f56f8705b337a5d">  472</a></span>&#160;<a class="code" href="classpism_1_1surface_1_1diagnostics_1_1PS__ice__surface__temp_aca7440a29432d92d6f56f8705b337a5d.html#aca7440a29432d92d6f56f8705b337a5d">PS_ice_surface_temp::PS_ice_surface_temp</a>(<span class="keyword">const</span> <a class="code" href="classpism_1_1surface_1_1SurfaceModel.html">SurfaceModel</a> *m) : <a class="code" href="classpism_1_1Diag.html">Diag</a>&lt;<a class="code" href="classpism_1_1surface_1_1SurfaceModel.html">SurfaceModel</a>&gt;(m) {</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160; </div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  <span class="keyword">auto</span> ismip6 = <a class="code" href="classpism_1_1Diagnostic_afdafdc402891ace41badf7a4c33bac10.html#afdafdc402891ace41badf7a4c33bac10">m_config</a>-&gt;get_flag(<span class="stringliteral">&quot;output.ISMIP6&quot;</span>);</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160; </div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  <a class="code" href="classpism_1_1Diagnostic_a7590d3d6d714ca1bbc99787baea537e0.html#a7590d3d6d714ca1bbc99787baea537e0">m_vars</a> = { { <a class="code" href="classpism_1_1Diagnostic_a66c35ec2a3236c20757ba9ce5880eb6d.html#a66c35ec2a3236c20757ba9ce5880eb6d">m_sys</a>, ismip6 ? <span class="stringliteral">&quot;litemptop&quot;</span> : <span class="stringliteral">&quot;ice_surface_temp&quot;</span> } };</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  <a class="code" href="classpism_1_1Diagnostic_a7590d3d6d714ca1bbc99787baea537e0.html#a7590d3d6d714ca1bbc99787baea537e0">m_vars</a>[0]</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;      .long_name(<span class="stringliteral">&quot;ice temperature at the top ice surface&quot;</span>)</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;      .standard_name(<span class="stringliteral">&quot;temperature_at_top_of_ice_sheet_model&quot;</span>)</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;      .units(<span class="stringliteral">&quot;K&quot;</span>);</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;}</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160; </div>
<div class="line"><a name="l00483"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1diagnostics_1_1PS__ice__surface__temp_a65e86b3bf823a0c62baf1538e31dee21.html#a65e86b3bf823a0c62baf1538e31dee21">  483</a></span>&#160;std::shared_ptr&lt;array::Array&gt; <a class="code" href="classpism_1_1surface_1_1diagnostics_1_1PS__ice__surface__temp_a65e86b3bf823a0c62baf1538e31dee21.html#a65e86b3bf823a0c62baf1538e31dee21">PS_ice_surface_temp::compute_impl</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;  <span class="keyword">auto</span> result = allocate&lt;array::Scalar&gt;(<span class="stringliteral">&quot;ice_surface_temp&quot;</span>);</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160; </div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;  result-&gt;copy_from(<a class="code" href="classpism_1_1Diag_aa3e0516ca815c840bfa479256aa1f711.html#aa3e0516ca815c840bfa479256aa1f711">model</a>-&gt;temperature());</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160; </div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;}</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160; </div>
<div class="line"><a name="l00491"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1diagnostics_1_1PS__liquid__water__fraction_aa6c56cfccf09b828ce501ece98e5b8fb.html#aa6c56cfccf09b828ce501ece98e5b8fb">  491</a></span>&#160;<a class="code" href="classpism_1_1surface_1_1diagnostics_1_1PS__liquid__water__fraction_aa6c56cfccf09b828ce501ece98e5b8fb.html#aa6c56cfccf09b828ce501ece98e5b8fb">PS_liquid_water_fraction::PS_liquid_water_fraction</a>(<span class="keyword">const</span> <a class="code" href="classpism_1_1surface_1_1SurfaceModel.html">SurfaceModel</a> *m) : <a class="code" href="classpism_1_1Diag.html">Diag</a>&lt;<a class="code" href="classpism_1_1surface_1_1SurfaceModel.html">SurfaceModel</a>&gt;(m) {</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  <a class="code" href="classpism_1_1Diagnostic_a7590d3d6d714ca1bbc99787baea537e0.html#a7590d3d6d714ca1bbc99787baea537e0">m_vars</a> = { { <a class="code" href="classpism_1_1Diagnostic_a66c35ec2a3236c20757ba9ce5880eb6d.html#a66c35ec2a3236c20757ba9ce5880eb6d">m_sys</a>, <span class="stringliteral">&quot;ice_surface_liquid_water_fraction&quot;</span> } };</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  <a class="code" href="classpism_1_1Diagnostic_a7590d3d6d714ca1bbc99787baea537e0.html#a7590d3d6d714ca1bbc99787baea537e0">m_vars</a>[0].long_name(<span class="stringliteral">&quot;ice liquid water fraction at the ice surface&quot;</span>).units(<span class="stringliteral">&quot;1&quot;</span>);</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;}</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160; </div>
<div class="line"><a name="l00496"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1diagnostics_1_1PS__liquid__water__fraction_a0b0792d414e0b20c91ce2e3482812c4e.html#a0b0792d414e0b20c91ce2e3482812c4e">  496</a></span>&#160;std::shared_ptr&lt;array::Array&gt; <a class="code" href="classpism_1_1surface_1_1diagnostics_1_1PS__liquid__water__fraction_a0b0792d414e0b20c91ce2e3482812c4e.html#a0b0792d414e0b20c91ce2e3482812c4e">PS_liquid_water_fraction::compute_impl</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160; </div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  <span class="keyword">auto</span> result = allocate&lt;array::Scalar&gt;(<span class="stringliteral">&quot;ice_surface_liquid_water_fraction&quot;</span>);</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160; </div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  result-&gt;copy_from(<a class="code" href="classpism_1_1Diag_aa3e0516ca815c840bfa479256aa1f711.html#aa3e0516ca815c840bfa479256aa1f711">model</a>-&gt;liquid_water_fraction());</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160; </div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;}</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160; </div>
<div class="line"><a name="l00505"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1diagnostics_1_1PS__layer__mass_ae41c7cfa31339ee9c6a706d31ceece37.html#ae41c7cfa31339ee9c6a706d31ceece37">  505</a></span>&#160;<a class="code" href="classpism_1_1surface_1_1diagnostics_1_1PS__layer__mass_ae41c7cfa31339ee9c6a706d31ceece37.html#ae41c7cfa31339ee9c6a706d31ceece37">PS_layer_mass::PS_layer_mass</a>(<span class="keyword">const</span> <a class="code" href="classpism_1_1surface_1_1SurfaceModel.html">SurfaceModel</a> *m) : <a class="code" href="classpism_1_1Diag.html">Diag</a>&lt;<a class="code" href="classpism_1_1surface_1_1SurfaceModel.html">SurfaceModel</a>&gt;(m) {</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  <a class="code" href="classpism_1_1Diagnostic_a7590d3d6d714ca1bbc99787baea537e0.html#a7590d3d6d714ca1bbc99787baea537e0">m_vars</a> = { { <a class="code" href="classpism_1_1Diagnostic_a66c35ec2a3236c20757ba9ce5880eb6d.html#a66c35ec2a3236c20757ba9ce5880eb6d">m_sys</a>, <span class="stringliteral">&quot;surface_layer_mass&quot;</span> } };</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  <a class="code" href="classpism_1_1Diagnostic_a7590d3d6d714ca1bbc99787baea537e0.html#a7590d3d6d714ca1bbc99787baea537e0">m_vars</a>[0].long_name(<span class="stringliteral">&quot;mass of the surface layer (snow and firn)&quot;</span>).units(<span class="stringliteral">&quot;kg&quot;</span>);</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;}</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160; </div>
<div class="line"><a name="l00510"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1diagnostics_1_1PS__layer__mass_ac966d78670dfca68f45f8c507c8c7549.html#ac966d78670dfca68f45f8c507c8c7549">  510</a></span>&#160;std::shared_ptr&lt;array::Array&gt; <a class="code" href="classpism_1_1surface_1_1diagnostics_1_1PS__layer__mass_ac966d78670dfca68f45f8c507c8c7549.html#ac966d78670dfca68f45f8c507c8c7549">PS_layer_mass::compute_impl</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160; </div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  <span class="keyword">auto</span> result = allocate&lt;array::Scalar&gt;(<span class="stringliteral">&quot;surface_layer_mass&quot;</span>);</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160; </div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  result-&gt;copy_from(<a class="code" href="classpism_1_1Diag_aa3e0516ca815c840bfa479256aa1f711.html#aa3e0516ca815c840bfa479256aa1f711">model</a>-&gt;layer_mass());</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160; </div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;}</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160; </div>
<div class="line"><a name="l00519"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1diagnostics_1_1PS__layer__thickness_a69d7d189f78d53142a0a4044e018e8c8.html#a69d7d189f78d53142a0a4044e018e8c8">  519</a></span>&#160;<a class="code" href="classpism_1_1surface_1_1diagnostics_1_1PS__layer__thickness_a69d7d189f78d53142a0a4044e018e8c8.html#a69d7d189f78d53142a0a4044e018e8c8">PS_layer_thickness::PS_layer_thickness</a>(<span class="keyword">const</span> <a class="code" href="classpism_1_1surface_1_1SurfaceModel.html">SurfaceModel</a> *m) : <a class="code" href="classpism_1_1Diag.html">Diag</a>&lt;<a class="code" href="classpism_1_1surface_1_1SurfaceModel.html">SurfaceModel</a>&gt;(m) {</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  <a class="code" href="classpism_1_1Diagnostic_a7590d3d6d714ca1bbc99787baea537e0.html#a7590d3d6d714ca1bbc99787baea537e0">m_vars</a> = { { <a class="code" href="classpism_1_1Diagnostic_a66c35ec2a3236c20757ba9ce5880eb6d.html#a66c35ec2a3236c20757ba9ce5880eb6d">m_sys</a>, <span class="stringliteral">&quot;surface_layer_thickness&quot;</span> } };</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  <a class="code" href="classpism_1_1Diagnostic_a7590d3d6d714ca1bbc99787baea537e0.html#a7590d3d6d714ca1bbc99787baea537e0">m_vars</a>[0].long_name(<span class="stringliteral">&quot;thickness of the surface layer (snow and firn)&quot;</span>).units(<span class="stringliteral">&quot;meters&quot;</span>);</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;}</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160; </div>
<div class="line"><a name="l00524"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1diagnostics_1_1PS__layer__thickness_a97d5d07803328d9cc478d9aa79b25862.html#a97d5d07803328d9cc478d9aa79b25862">  524</a></span>&#160;std::shared_ptr&lt;array::Array&gt; <a class="code" href="classpism_1_1surface_1_1diagnostics_1_1PS__layer__thickness_a97d5d07803328d9cc478d9aa79b25862.html#a97d5d07803328d9cc478d9aa79b25862">PS_layer_thickness::compute_impl</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160; </div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  <span class="keyword">auto</span> result = allocate&lt;array::Scalar&gt;(<span class="stringliteral">&quot;surface_layer_thickness&quot;</span>);</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160; </div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  result-&gt;copy_from(<a class="code" href="classpism_1_1Diag_aa3e0516ca815c840bfa479256aa1f711.html#aa3e0516ca815c840bfa479256aa1f711">model</a>-&gt;layer_thickness());</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160; </div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;}</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160; </div>
<div class="line"><a name="l00533"></a><span class="lineno"><a class="line" href="namespacepism_1_1surface_1_1diagnostics_acadff920eb40e3febfa8f0cbd19b2986.html#acadff920eb40e3febfa8f0cbd19b2986">  533</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="namespacepism_1_1surface_1_1diagnostics_acadff920eb40e3febfa8f0cbd19b2986.html#acadff920eb40e3febfa8f0cbd19b2986">AmountKind</a> {<a class="code" href="namespacepism_1_1surface_1_1diagnostics_acadff920eb40e3febfa8f0cbd19b2986.html#acadff920eb40e3febfa8f0cbd19b2986ad6b52059629f1a3bbbbac787b803b93f">AMOUNT</a>, <a class="code" href="namespacepism_1_1surface_1_1diagnostics_acadff920eb40e3febfa8f0cbd19b2986.html#acadff920eb40e3febfa8f0cbd19b2986a0a5cd199a02768d6005905118e4e8a0b">MASS</a>};</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="comment">/*! @brief Report surface melt, averaged over the reporting interval */</span></div>
<div class="line"><a name="l00536"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1diagnostics_1_1SurfaceMelt.html">  536</a></span>&#160;<span class="keyword">class </span><a class="code" href="classpism_1_1surface_1_1diagnostics_1_1SurfaceMelt.html">SurfaceMelt</a> : <span class="keyword">public</span> <a class="code" href="classpism_1_1DiagAverageRate.html">DiagAverageRate</a>&lt;SurfaceModel&gt;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;{</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00539"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1diagnostics_1_1SurfaceMelt_a777e1b0c7e865ea1a56b34ebd1e14e58.html#a777e1b0c7e865ea1a56b34ebd1e14e58">  539</a></span>&#160;  <a class="code" href="classpism_1_1surface_1_1diagnostics_1_1SurfaceMelt_a777e1b0c7e865ea1a56b34ebd1e14e58.html#a777e1b0c7e865ea1a56b34ebd1e14e58">SurfaceMelt</a>(<span class="keyword">const</span> <a class="code" href="classpism_1_1surface_1_1SurfaceModel.html">SurfaceModel</a> *m, <a class="code" href="namespacepism_1_1surface_1_1diagnostics_acadff920eb40e3febfa8f0cbd19b2986.html#acadff920eb40e3febfa8f0cbd19b2986">AmountKind</a> kind)</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    : <a class="code" href="classpism_1_1DiagAverageRate.html">DiagAverageRate</a>&lt;<a class="code" href="classpism_1_1surface_1_1SurfaceModel.html">SurfaceModel</a>&gt;(m,</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;                                        kind == <a class="code" href="namespacepism_1_1surface_1_1diagnostics_acadff920eb40e3febfa8f0cbd19b2986.html#acadff920eb40e3febfa8f0cbd19b2986ad6b52059629f1a3bbbbac787b803b93f">AMOUNT</a></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;                                        ? <span class="stringliteral">&quot;surface_melt_flux&quot;</span></div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;                                        : <span class="stringliteral">&quot;surface_melt_rate&quot;</span>,</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                                        <a class="code" href="classpism_1_1DiagAverageRate_a44a50685701b5dcd19e71e4f2cc1e46f.html#a44a50685701b5dcd19e71e4f2cc1e46fa5ff14e4c51b9dfcb0540c0ce28d67cdd">TOTAL_CHANGE</a>),</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;      <a class="code" href="classpism_1_1surface_1_1diagnostics_1_1SurfaceMelt_ac9e93461309f8b580fd1da27e40c8467.html#ac9e93461309f8b580fd1da27e40c8467">m_melt_mass</a>(<a class="code" href="classpism_1_1Diagnostic_af0eaf7c1c949d96b5c5ac945c7b744ca.html#af0eaf7c1c949d96b5c5ac945c7b744ca">m_grid</a>, <span class="stringliteral">&quot;melt_mass&quot;</span>),</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;      <a class="code" href="classpism_1_1surface_1_1diagnostics_1_1SurfaceMelt_adfc219d74ef48196eebffeae45033372.html#adfc219d74ef48196eebffeae45033372">m_kind</a>(kind)</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  {</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160; </div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    std::string</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;      name              = <span class="stringliteral">&quot;surface_melt_flux&quot;</span>,</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;      long_name         = <span class="stringliteral">&quot;surface melt, averaged over the reporting interval&quot;</span>,</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;      standard_name     = <span class="stringliteral">&quot;surface_snow_and_ice_melt_flux&quot;</span>,</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      accumulator_units = <span class="stringliteral">&quot;kg m-2&quot;</span>,</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      internal_units    = <span class="stringliteral">&quot;kg m-2 second-1&quot;</span>,</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;      external_units    = <span class="stringliteral">&quot;kg m-2 year-1&quot;</span>;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <span class="keywordflow">if</span> (kind == <a class="code" href="namespacepism_1_1surface_1_1diagnostics_acadff920eb40e3febfa8f0cbd19b2986.html#acadff920eb40e3febfa8f0cbd19b2986a0a5cd199a02768d6005905118e4e8a0b">MASS</a>) {</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;      name              = <span class="stringliteral">&quot;surface_melt_rate&quot;</span>;</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;      standard_name     = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;      accumulator_units = <span class="stringliteral">&quot;kg&quot;</span>,</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;      internal_units    = <span class="stringliteral">&quot;kg second-1&quot;</span>;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      external_units    = <span class="stringliteral">&quot;Gt year-1&quot;</span> ;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    }</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160; </div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <a class="code" href="classpism_1_1DiagAverageRate_a252d2c1d0942cf6f75fd5c85255aae93.html#a252d2c1d0942cf6f75fd5c85255aae93">m_accumulator</a>.<a class="code" href="classpism_1_1array_1_1Array_af9eece42153cd03bfc8ba237ae5310c4.html#af9eece42153cd03bfc8ba237ae5310c4">metadata</a>()[<span class="stringliteral">&quot;units&quot;</span>] = accumulator_units;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160; </div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    <a class="code" href="classpism_1_1Diagnostic_a7590d3d6d714ca1bbc99787baea537e0.html#a7590d3d6d714ca1bbc99787baea537e0">m_vars</a> = { { <a class="code" href="classpism_1_1Diagnostic_a66c35ec2a3236c20757ba9ce5880eb6d.html#a66c35ec2a3236c20757ba9ce5880eb6d">m_sys</a>, name } };</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <a class="code" href="classpism_1_1Diagnostic_a7590d3d6d714ca1bbc99787baea537e0.html#a7590d3d6d714ca1bbc99787baea537e0">m_vars</a>[0]</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        .long_name(long_name)</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        .standard_name(standard_name)</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        .units(internal_units)</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        .output_units(external_units);</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <a class="code" href="classpism_1_1Diagnostic_a7590d3d6d714ca1bbc99787baea537e0.html#a7590d3d6d714ca1bbc99787baea537e0">m_vars</a>[0][<span class="stringliteral">&quot;cell_methods&quot;</span>] = <span class="stringliteral">&quot;time: mean&quot;</span>;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <a class="code" href="classpism_1_1Diagnostic_a7590d3d6d714ca1bbc99787baea537e0.html#a7590d3d6d714ca1bbc99787baea537e0">m_vars</a>[0][<span class="stringliteral">&quot;_FillValue&quot;</span>] = {<a class="code" href="classpism_1_1Diagnostic_a71431ab62fe704b0a9317140f3ab3bd3.html#a71431ab62fe704b0a9317140f3ab3bd3">to_internal</a>(<a class="code" href="classpism_1_1Diagnostic_a4d9fd84fa2feaaf986df8ecbe6832506.html#a4d9fd84fa2feaaf986df8ecbe6832506">m_fill_value</a>)};</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;  }</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160; </div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;<span class="keyword">protected</span>:</div>
<div class="line"><a name="l00577"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1diagnostics_1_1SurfaceMelt_aa6f28a94303d66bf64e89cc75e9731b8.html#aa6f28a94303d66bf64e89cc75e9731b8">  577</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="classpism_1_1array_1_1Scalar.html">array::Scalar</a>&amp; <a class="code" href="classpism_1_1surface_1_1diagnostics_1_1SurfaceMelt_aa6f28a94303d66bf64e89cc75e9731b8.html#aa6f28a94303d66bf64e89cc75e9731b8">model_input</a>() {</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <span class="keyword">const</span> <a class="code" href="classpism_1_1array_1_1Scalar.html">array::Scalar</a> &amp;melt_amount = <a class="code" href="classpism_1_1Diag_aa3e0516ca815c840bfa479256aa1f711.html#aa3e0516ca815c840bfa479256aa1f711">model</a>-&gt;melt();</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160; </div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classpism_1_1surface_1_1diagnostics_1_1SurfaceMelt_adfc219d74ef48196eebffeae45033372.html#adfc219d74ef48196eebffeae45033372">m_kind</a> == <a class="code" href="namespacepism_1_1surface_1_1diagnostics_acadff920eb40e3febfa8f0cbd19b2986.html#acadff920eb40e3febfa8f0cbd19b2986a0a5cd199a02768d6005905118e4e8a0b">MASS</a>) {</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;      <span class="keywordtype">double</span> cell_area = <a class="code" href="classpism_1_1Diagnostic_af0eaf7c1c949d96b5c5ac945c7b744ca.html#af0eaf7c1c949d96b5c5ac945c7b744ca">m_grid</a>-&gt;cell_area();</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160; </div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;      <a class="code" href="classpism_1_1array_1_1AccessScope.html">array::AccessScope</a> list{&amp;<a class="code" href="classpism_1_1surface_1_1diagnostics_1_1SurfaceMelt_ac9e93461309f8b580fd1da27e40c8467.html#ac9e93461309f8b580fd1da27e40c8467">m_melt_mass</a>, &amp;melt_amount};</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160; </div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> p = <a class="code" href="classpism_1_1Diagnostic_af0eaf7c1c949d96b5c5ac945c7b744ca.html#af0eaf7c1c949d96b5c5ac945c7b744ca">m_grid</a>-&gt;points(); p; p.next()) {</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> i = p.i(), j = p.j();</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        <a class="code" href="classpism_1_1surface_1_1diagnostics_1_1SurfaceMelt_ac9e93461309f8b580fd1da27e40c8467.html#ac9e93461309f8b580fd1da27e40c8467">m_melt_mass</a>(i, j) = melt_amount(i, j) * cell_area;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;      }</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classpism_1_1surface_1_1diagnostics_1_1SurfaceMelt_ac9e93461309f8b580fd1da27e40c8467.html#ac9e93461309f8b580fd1da27e40c8467">m_melt_mass</a>;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    }</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160; </div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <span class="keywordflow">return</span> melt_amount;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  }</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00595"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1diagnostics_1_1SurfaceMelt_ac9e93461309f8b580fd1da27e40c8467.html#ac9e93461309f8b580fd1da27e40c8467">  595</a></span>&#160;  <a class="code" href="classpism_1_1array_1_1Scalar.html">array::Scalar</a> <a class="code" href="classpism_1_1surface_1_1diagnostics_1_1SurfaceMelt_ac9e93461309f8b580fd1da27e40c8467.html#ac9e93461309f8b580fd1da27e40c8467">m_melt_mass</a>;</div>
<div class="line"><a name="l00596"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1diagnostics_1_1SurfaceMelt_adfc219d74ef48196eebffeae45033372.html#adfc219d74ef48196eebffeae45033372">  596</a></span>&#160;  <a class="code" href="namespacepism_1_1surface_1_1diagnostics_acadff920eb40e3febfa8f0cbd19b2986.html#acadff920eb40e3febfa8f0cbd19b2986">AmountKind</a> <a class="code" href="classpism_1_1surface_1_1diagnostics_1_1SurfaceMelt_adfc219d74ef48196eebffeae45033372.html#adfc219d74ef48196eebffeae45033372">m_kind</a>;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;};</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;<span class="comment">/*! @brief Report surface runoff, averaged over the reporting interval */</span></div>
<div class="line"><a name="l00600"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1diagnostics_1_1SurfaceRunoff.html">  600</a></span>&#160;<span class="keyword">class </span><a class="code" href="classpism_1_1surface_1_1diagnostics_1_1SurfaceRunoff.html">SurfaceRunoff</a> : <span class="keyword">public</span> <a class="code" href="classpism_1_1DiagAverageRate.html">DiagAverageRate</a>&lt;SurfaceModel&gt;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;{</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00603"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1diagnostics_1_1SurfaceRunoff_ac397c9ea89e75de6e152f6b993845d9d.html#ac397c9ea89e75de6e152f6b993845d9d">  603</a></span>&#160;  <a class="code" href="classpism_1_1surface_1_1diagnostics_1_1SurfaceRunoff_ac397c9ea89e75de6e152f6b993845d9d.html#ac397c9ea89e75de6e152f6b993845d9d">SurfaceRunoff</a>(<span class="keyword">const</span> <a class="code" href="classpism_1_1surface_1_1SurfaceModel.html">SurfaceModel</a> *m, <a class="code" href="namespacepism_1_1surface_1_1diagnostics_acadff920eb40e3febfa8f0cbd19b2986.html#acadff920eb40e3febfa8f0cbd19b2986">AmountKind</a> kind)</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    : <a class="code" href="classpism_1_1DiagAverageRate.html">DiagAverageRate</a>&lt;<a class="code" href="classpism_1_1surface_1_1SurfaceModel.html">SurfaceModel</a>&gt;(m,</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                                        kind == <a class="code" href="namespacepism_1_1surface_1_1diagnostics_acadff920eb40e3febfa8f0cbd19b2986.html#acadff920eb40e3febfa8f0cbd19b2986ad6b52059629f1a3bbbbac787b803b93f">AMOUNT</a></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                                        ? <span class="stringliteral">&quot;surface_runoff_flux&quot;</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;                                        : <span class="stringliteral">&quot;surface_runoff_rate&quot;</span>,</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;                                        <a class="code" href="classpism_1_1DiagAverageRate_a44a50685701b5dcd19e71e4f2cc1e46f.html#a44a50685701b5dcd19e71e4f2cc1e46fa5ff14e4c51b9dfcb0540c0ce28d67cdd">TOTAL_CHANGE</a>),</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;      <a class="code" href="classpism_1_1surface_1_1diagnostics_1_1SurfaceRunoff_ad420e96b89174c90e220562a558804aa.html#ad420e96b89174c90e220562a558804aa">m_kind</a>(kind),</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;      <a class="code" href="classpism_1_1surface_1_1diagnostics_1_1SurfaceRunoff_aa51bc083f57d061676a08700b7a8f4de.html#aa51bc083f57d061676a08700b7a8f4de">m_runoff_mass</a>(<a class="code" href="classpism_1_1Diagnostic_af0eaf7c1c949d96b5c5ac945c7b744ca.html#af0eaf7c1c949d96b5c5ac945c7b744ca">m_grid</a>, <span class="stringliteral">&quot;runoff_mass&quot;</span>) {</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160; </div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    std::string</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;      name              = <span class="stringliteral">&quot;surface_runoff_flux&quot;</span>,</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;      long_name         = <span class="stringliteral">&quot;surface runoff, averaged over the reporting interval&quot;</span>,</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;      standard_name     = <span class="stringliteral">&quot;surface_runoff_flux&quot;</span>,</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;      accumulator_units = <span class="stringliteral">&quot;kg m-2&quot;</span>,</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;      internal_units    = <span class="stringliteral">&quot;kg m-2 second-1&quot;</span>,</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;      external_units    = <span class="stringliteral">&quot;kg m-2 year-1&quot;</span>;</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    <span class="keywordflow">if</span> (kind == <a class="code" href="namespacepism_1_1surface_1_1diagnostics_acadff920eb40e3febfa8f0cbd19b2986.html#acadff920eb40e3febfa8f0cbd19b2986a0a5cd199a02768d6005905118e4e8a0b">MASS</a>) {</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;      name              = <span class="stringliteral">&quot;surface_runoff_rate&quot;</span>;</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;      standard_name     = <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;      accumulator_units = <span class="stringliteral">&quot;kg&quot;</span>,</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;      internal_units    = <span class="stringliteral">&quot;kg second-1&quot;</span>;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;      external_units    = <span class="stringliteral">&quot;Gt year-1&quot;</span> ;</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    }</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160; </div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <a class="code" href="classpism_1_1DiagAverageRate_a252d2c1d0942cf6f75fd5c85255aae93.html#a252d2c1d0942cf6f75fd5c85255aae93">m_accumulator</a>.<a class="code" href="classpism_1_1array_1_1Array_af9eece42153cd03bfc8ba237ae5310c4.html#af9eece42153cd03bfc8ba237ae5310c4">metadata</a>()[<span class="stringliteral">&quot;units&quot;</span>] = accumulator_units;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160; </div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <a class="code" href="classpism_1_1Diagnostic_a7590d3d6d714ca1bbc99787baea537e0.html#a7590d3d6d714ca1bbc99787baea537e0">m_vars</a> = { { <a class="code" href="classpism_1_1Diagnostic_a66c35ec2a3236c20757ba9ce5880eb6d.html#a66c35ec2a3236c20757ba9ce5880eb6d">m_sys</a>, name } };</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <a class="code" href="classpism_1_1Diagnostic_a7590d3d6d714ca1bbc99787baea537e0.html#a7590d3d6d714ca1bbc99787baea537e0">m_vars</a>[0]</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        .long_name(long_name)</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;        .standard_name(standard_name)</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        .units(internal_units)</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        .output_units(external_units);</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    <a class="code" href="classpism_1_1Diagnostic_a7590d3d6d714ca1bbc99787baea537e0.html#a7590d3d6d714ca1bbc99787baea537e0">m_vars</a>[0][<span class="stringliteral">&quot;cell_methods&quot;</span>] = <span class="stringliteral">&quot;time: mean&quot;</span>;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    <a class="code" href="classpism_1_1Diagnostic_a7590d3d6d714ca1bbc99787baea537e0.html#a7590d3d6d714ca1bbc99787baea537e0">m_vars</a>[0][<span class="stringliteral">&quot;_FillValue&quot;</span>] = {<a class="code" href="classpism_1_1Diagnostic_a71431ab62fe704b0a9317140f3ab3bd3.html#a71431ab62fe704b0a9317140f3ab3bd3">to_internal</a>(<a class="code" href="classpism_1_1Diagnostic_a4d9fd84fa2feaaf986df8ecbe6832506.html#a4d9fd84fa2feaaf986df8ecbe6832506">m_fill_value</a>)};</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;  }</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160; </div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;<span class="keyword">protected</span>:</div>
<div class="line"><a name="l00640"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1diagnostics_1_1SurfaceRunoff_ac7469efc4e1ef8047064de91c53a6fa6.html#ac7469efc4e1ef8047064de91c53a6fa6">  640</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="classpism_1_1array_1_1Scalar.html">array::Scalar</a>&amp; <a class="code" href="classpism_1_1surface_1_1diagnostics_1_1SurfaceRunoff_ac7469efc4e1ef8047064de91c53a6fa6.html#ac7469efc4e1ef8047064de91c53a6fa6">model_input</a>() {</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <span class="keyword">const</span> <a class="code" href="classpism_1_1array_1_1Scalar.html">array::Scalar</a> &amp;runoff_amount = <a class="code" href="classpism_1_1Diag_aa3e0516ca815c840bfa479256aa1f711.html#aa3e0516ca815c840bfa479256aa1f711">model</a>-&gt;runoff();</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160; </div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classpism_1_1surface_1_1diagnostics_1_1SurfaceRunoff_ad420e96b89174c90e220562a558804aa.html#ad420e96b89174c90e220562a558804aa">m_kind</a> == <a class="code" href="namespacepism_1_1surface_1_1diagnostics_acadff920eb40e3febfa8f0cbd19b2986.html#acadff920eb40e3febfa8f0cbd19b2986a0a5cd199a02768d6005905118e4e8a0b">MASS</a>) {</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;      <span class="keywordtype">double</span> cell_area = <a class="code" href="classpism_1_1Diagnostic_af0eaf7c1c949d96b5c5ac945c7b744ca.html#af0eaf7c1c949d96b5c5ac945c7b744ca">m_grid</a>-&gt;cell_area();</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160; </div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;      <a class="code" href="classpism_1_1array_1_1AccessScope.html">array::AccessScope</a> list{&amp;<a class="code" href="classpism_1_1surface_1_1diagnostics_1_1SurfaceRunoff_aa51bc083f57d061676a08700b7a8f4de.html#aa51bc083f57d061676a08700b7a8f4de">m_runoff_mass</a>, &amp;runoff_amount};</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160; </div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> p = <a class="code" href="classpism_1_1Diagnostic_af0eaf7c1c949d96b5c5ac945c7b744ca.html#af0eaf7c1c949d96b5c5ac945c7b744ca">m_grid</a>-&gt;points(); p; p.next()) {</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> i = p.i(), j = p.j();</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;        <a class="code" href="classpism_1_1surface_1_1diagnostics_1_1SurfaceRunoff_aa51bc083f57d061676a08700b7a8f4de.html#aa51bc083f57d061676a08700b7a8f4de">m_runoff_mass</a>(i, j) = runoff_amount(i, j) * cell_area;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;      }</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classpism_1_1surface_1_1diagnostics_1_1SurfaceRunoff_aa51bc083f57d061676a08700b7a8f4de.html#aa51bc083f57d061676a08700b7a8f4de">m_runoff_mass</a>;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    }</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160; </div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    <span class="keywordflow">return</span> runoff_amount;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;  }</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00658"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1diagnostics_1_1SurfaceRunoff_ad420e96b89174c90e220562a558804aa.html#ad420e96b89174c90e220562a558804aa">  658</a></span>&#160;  <a class="code" href="namespacepism_1_1surface_1_1diagnostics_acadff920eb40e3febfa8f0cbd19b2986.html#acadff920eb40e3febfa8f0cbd19b2986">AmountKind</a> <a class="code" href="classpism_1_1surface_1_1diagnostics_1_1SurfaceRunoff_ad420e96b89174c90e220562a558804aa.html#ad420e96b89174c90e220562a558804aa">m_kind</a>;</div>
<div class="line"><a name="l00659"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1diagnostics_1_1SurfaceRunoff_aa51bc083f57d061676a08700b7a8f4de.html#aa51bc083f57d061676a08700b7a8f4de">  659</a></span>&#160;  <a class="code" href="classpism_1_1array_1_1Scalar.html">array::Scalar</a> <a class="code" href="classpism_1_1surface_1_1diagnostics_1_1SurfaceRunoff_aa51bc083f57d061676a08700b7a8f4de.html#aa51bc083f57d061676a08700b7a8f4de">m_runoff_mass</a>;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;};</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;<span class="comment">/*! @brief Report accumulation (precipitation minus rain), averaged over the reporting interval */</span></div>
<div class="line"><a name="l00663"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1diagnostics_1_1Accumulation.html">  663</a></span>&#160;<span class="keyword">class </span><a class="code" href="classpism_1_1surface_1_1diagnostics_1_1Accumulation.html">Accumulation</a> : <span class="keyword">public</span> <a class="code" href="classpism_1_1DiagAverageRate.html">DiagAverageRate</a>&lt;SurfaceModel&gt;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;{</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00666"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1diagnostics_1_1Accumulation_adbf0db9a1a3d3b91977cbfc1cbe36970.html#adbf0db9a1a3d3b91977cbfc1cbe36970">  666</a></span>&#160;  <a class="code" href="classpism_1_1surface_1_1diagnostics_1_1Accumulation_adbf0db9a1a3d3b91977cbfc1cbe36970.html#adbf0db9a1a3d3b91977cbfc1cbe36970">Accumulation</a>(<span class="keyword">const</span> <a class="code" href="classpism_1_1surface_1_1SurfaceModel.html">SurfaceModel</a> *m, <a class="code" href="namespacepism_1_1surface_1_1diagnostics_acadff920eb40e3febfa8f0cbd19b2986.html#acadff920eb40e3febfa8f0cbd19b2986">AmountKind</a> kind)</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    : <a class="code" href="classpism_1_1DiagAverageRate.html">DiagAverageRate</a>&lt;<a class="code" href="classpism_1_1surface_1_1SurfaceModel.html">SurfaceModel</a>&gt;(m,</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                                        kind == <a class="code" href="namespacepism_1_1surface_1_1diagnostics_acadff920eb40e3febfa8f0cbd19b2986.html#acadff920eb40e3febfa8f0cbd19b2986ad6b52059629f1a3bbbbac787b803b93f">AMOUNT</a></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;                                        ? <span class="stringliteral">&quot;surface_accumulation_flux&quot;</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;                                        : <span class="stringliteral">&quot;surface_accumulation_rate&quot;</span>,</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;                                        <a class="code" href="classpism_1_1DiagAverageRate_a44a50685701b5dcd19e71e4f2cc1e46f.html#a44a50685701b5dcd19e71e4f2cc1e46fa5ff14e4c51b9dfcb0540c0ce28d67cdd">TOTAL_CHANGE</a>),</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;      <a class="code" href="classpism_1_1surface_1_1diagnostics_1_1Accumulation_a66dc78694ff86655309ce33c4f126156.html#a66dc78694ff86655309ce33c4f126156">m_kind</a>(kind),</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;      <a class="code" href="classpism_1_1surface_1_1diagnostics_1_1Accumulation_a57855011e894e936b91efd826c77b47a.html#a57855011e894e936b91efd826c77b47a">m_accumulation_mass</a>(<a class="code" href="classpism_1_1Diagnostic_af0eaf7c1c949d96b5c5ac945c7b744ca.html#af0eaf7c1c949d96b5c5ac945c7b744ca">m_grid</a>, <span class="stringliteral">&quot;accumulation_mass&quot;</span>) {</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160; </div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    <span class="comment">// possible standard name: surface_accumulation_flux</span></div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    std::string</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;      name              = <span class="stringliteral">&quot;surface_accumulation_flux&quot;</span>,</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;      long_name         = <span class="stringliteral">&quot;accumulation (precipitation minus rain), averaged over the reporting interval&quot;</span>,</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;      accumulator_units = <span class="stringliteral">&quot;kg m-2&quot;</span>,</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;      internal_units    = <span class="stringliteral">&quot;kg m-2 second-1&quot;</span>,</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;      external_units    = <span class="stringliteral">&quot;kg m-2 year-1&quot;</span>;</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    <span class="keywordflow">if</span> (kind == <a class="code" href="namespacepism_1_1surface_1_1diagnostics_acadff920eb40e3febfa8f0cbd19b2986.html#acadff920eb40e3febfa8f0cbd19b2986a0a5cd199a02768d6005905118e4e8a0b">MASS</a>) {</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;      name              = <span class="stringliteral">&quot;surface_accumulation_rate&quot;</span>;</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;      accumulator_units = <span class="stringliteral">&quot;kg&quot;</span>,</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;      internal_units    = <span class="stringliteral">&quot;kg second-1&quot;</span>;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;      external_units    = <span class="stringliteral">&quot;Gt year-1&quot;</span> ;</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    }</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160; </div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <a class="code" href="classpism_1_1DiagAverageRate_a252d2c1d0942cf6f75fd5c85255aae93.html#a252d2c1d0942cf6f75fd5c85255aae93">m_accumulator</a>.<a class="code" href="classpism_1_1array_1_1Array_af9eece42153cd03bfc8ba237ae5310c4.html#af9eece42153cd03bfc8ba237ae5310c4">metadata</a>()[<span class="stringliteral">&quot;units&quot;</span>] = accumulator_units;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160; </div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    <a class="code" href="classpism_1_1Diagnostic_a7590d3d6d714ca1bbc99787baea537e0.html#a7590d3d6d714ca1bbc99787baea537e0">m_vars</a> = { { <a class="code" href="classpism_1_1Diagnostic_a66c35ec2a3236c20757ba9ce5880eb6d.html#a66c35ec2a3236c20757ba9ce5880eb6d">m_sys</a>, name } };</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <a class="code" href="classpism_1_1Diagnostic_a7590d3d6d714ca1bbc99787baea537e0.html#a7590d3d6d714ca1bbc99787baea537e0">m_vars</a>[0]</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;        .long_name(long_name)</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        .units(internal_units)</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        .output_units(external_units);</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    <a class="code" href="classpism_1_1Diagnostic_a7590d3d6d714ca1bbc99787baea537e0.html#a7590d3d6d714ca1bbc99787baea537e0">m_vars</a>[0][<span class="stringliteral">&quot;cell_methods&quot;</span>] = <span class="stringliteral">&quot;time: mean&quot;</span>;</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <a class="code" href="classpism_1_1Diagnostic_a7590d3d6d714ca1bbc99787baea537e0.html#a7590d3d6d714ca1bbc99787baea537e0">m_vars</a>[0][<span class="stringliteral">&quot;_FillValue&quot;</span>] = {<a class="code" href="classpism_1_1Diagnostic_a71431ab62fe704b0a9317140f3ab3bd3.html#a71431ab62fe704b0a9317140f3ab3bd3">to_internal</a>(<a class="code" href="classpism_1_1Diagnostic_a4d9fd84fa2feaaf986df8ecbe6832506.html#a4d9fd84fa2feaaf986df8ecbe6832506">m_fill_value</a>)};</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  }</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160; </div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;<span class="keyword">protected</span>:</div>
<div class="line"><a name="l00701"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1diagnostics_1_1Accumulation_a2f5bd8e89d1f88d5bae594e580a2be1c.html#a2f5bd8e89d1f88d5bae594e580a2be1c">  701</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="classpism_1_1array_1_1Scalar.html">array::Scalar</a>&amp; <a class="code" href="classpism_1_1surface_1_1diagnostics_1_1Accumulation_a2f5bd8e89d1f88d5bae594e580a2be1c.html#a2f5bd8e89d1f88d5bae594e580a2be1c">model_input</a>() {</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <span class="keyword">const</span> <a class="code" href="classpism_1_1array_1_1Scalar.html">array::Scalar</a> &amp;accumulation_amount = <a class="code" href="classpism_1_1Diag_aa3e0516ca815c840bfa479256aa1f711.html#aa3e0516ca815c840bfa479256aa1f711">model</a>-&gt;accumulation();</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160; </div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classpism_1_1surface_1_1diagnostics_1_1Accumulation_a66dc78694ff86655309ce33c4f126156.html#a66dc78694ff86655309ce33c4f126156">m_kind</a> == <a class="code" href="namespacepism_1_1surface_1_1diagnostics_acadff920eb40e3febfa8f0cbd19b2986.html#acadff920eb40e3febfa8f0cbd19b2986a0a5cd199a02768d6005905118e4e8a0b">MASS</a>) {</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;      <span class="keywordtype">double</span> cell_area = <a class="code" href="classpism_1_1Diagnostic_af0eaf7c1c949d96b5c5ac945c7b744ca.html#af0eaf7c1c949d96b5c5ac945c7b744ca">m_grid</a>-&gt;cell_area();</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160; </div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;      <a class="code" href="classpism_1_1array_1_1AccessScope.html">array::AccessScope</a> list{&amp;<a class="code" href="classpism_1_1surface_1_1diagnostics_1_1Accumulation_a57855011e894e936b91efd826c77b47a.html#a57855011e894e936b91efd826c77b47a">m_accumulation_mass</a>, &amp;accumulation_amount};</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160; </div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> p = <a class="code" href="classpism_1_1Diagnostic_af0eaf7c1c949d96b5c5ac945c7b744ca.html#af0eaf7c1c949d96b5c5ac945c7b744ca">m_grid</a>-&gt;points(); p; p.next()) {</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> i = p.i(), j = p.j();</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;        <a class="code" href="classpism_1_1surface_1_1diagnostics_1_1Accumulation_a57855011e894e936b91efd826c77b47a.html#a57855011e894e936b91efd826c77b47a">m_accumulation_mass</a>(i, j) = accumulation_amount(i, j) * cell_area;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;      }</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classpism_1_1surface_1_1diagnostics_1_1Accumulation_a57855011e894e936b91efd826c77b47a.html#a57855011e894e936b91efd826c77b47a">m_accumulation_mass</a>;</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    }</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160; </div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    <span class="keywordflow">return</span> accumulation_amount;</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;  }</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00719"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1diagnostics_1_1Accumulation_a66dc78694ff86655309ce33c4f126156.html#a66dc78694ff86655309ce33c4f126156">  719</a></span>&#160;  <a class="code" href="namespacepism_1_1surface_1_1diagnostics_acadff920eb40e3febfa8f0cbd19b2986.html#acadff920eb40e3febfa8f0cbd19b2986">AmountKind</a> <a class="code" href="classpism_1_1surface_1_1diagnostics_1_1Accumulation_a66dc78694ff86655309ce33c4f126156.html#a66dc78694ff86655309ce33c4f126156">m_kind</a>;</div>
<div class="line"><a name="l00720"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1diagnostics_1_1Accumulation_a57855011e894e936b91efd826c77b47a.html#a57855011e894e936b91efd826c77b47a">  720</a></span>&#160;  <a class="code" href="classpism_1_1array_1_1Scalar.html">array::Scalar</a> <a class="code" href="classpism_1_1surface_1_1diagnostics_1_1Accumulation_a57855011e894e936b91efd826c77b47a.html#a57855011e894e936b91efd826c77b47a">m_accumulation_mass</a>;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;};</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;<span class="comment">/*!</span></div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;<span class="comment"> * Integrate a field over the computational domain.</span></div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;<span class="comment"> * If the input has units kg/m^2, the output will be in kg.</span></div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00728"></a><span class="lineno"><a class="line" href="namespacepism_1_1surface_1_1diagnostics_acba2f854fade49a4e39db9125940622f.html#acba2f854fade49a4e39db9125940622f">  728</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">double</span> <a class="code" href="namespacepism_1_1surface_1_1diagnostics_acba2f854fade49a4e39db9125940622f.html#acba2f854fade49a4e39db9125940622f">integrate</a>(<span class="keyword">const</span> <a class="code" href="classpism_1_1array_1_1Scalar.html">array::Scalar</a> &amp;input) {</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  <span class="keyword">auto</span> grid = input.<a class="code" href="classpism_1_1array_1_1Array_a982fca110a5d7011f681b928b20e3577.html#a982fca110a5d7011f681b928b20e3577">grid</a>();</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160; </div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;  <span class="keywordtype">double</span> cell_area = grid-&gt;cell_area();</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160; </div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;  <a class="code" href="classpism_1_1array_1_1AccessScope.html">array::AccessScope</a> list{&amp;input};</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160; </div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;  <span class="keywordtype">double</span> result = 0.0;</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160; </div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> p = grid-&gt;points(); p; p.next()) {</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> i = p.i(), j = p.j();</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160; </div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    result += input(i, j) * cell_area;</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;  }</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160; </div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacepism_ac3e0190c23e7e63d2755343a89b3b239.html#ac3e0190c23e7e63d2755343a89b3b239">GlobalSum</a>(grid-&gt;com, result);</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;}</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160; </div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;<span class="comment">//! \brief Reports the total accumulation rate.</span></div>
<div class="line"><a name="l00748"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1diagnostics_1_1TotalSurfaceAccumulation.html">  748</a></span>&#160;<span class="comment"></span><span class="keyword">class </span><a class="code" href="classpism_1_1surface_1_1diagnostics_1_1TotalSurfaceAccumulation.html">TotalSurfaceAccumulation</a> : <span class="keyword">public</span> <a class="code" href="classpism_1_1TSDiag.html">TSDiag</a>&lt;TSFluxDiagnostic, SurfaceModel&gt;</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;{</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00751"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1diagnostics_1_1TotalSurfaceAccumulation_a41b575677c3277978c5b384000ef9334.html#a41b575677c3277978c5b384000ef9334">  751</a></span>&#160;  <a class="code" href="classpism_1_1surface_1_1diagnostics_1_1TotalSurfaceAccumulation_a41b575677c3277978c5b384000ef9334.html#a41b575677c3277978c5b384000ef9334">TotalSurfaceAccumulation</a>(<span class="keyword">const</span> <a class="code" href="classpism_1_1surface_1_1SurfaceModel.html">SurfaceModel</a> *m)</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    : <a class="code" href="classpism_1_1TSDiag.html">TSDiag</a>&lt;<a class="code" href="classpism_1_1TSFluxDiagnostic.html">TSFluxDiagnostic</a>, <a class="code" href="classpism_1_1surface_1_1SurfaceModel.html">SurfaceModel</a>&gt;(m, <span class="stringliteral">&quot;surface_accumulation_rate&quot;</span>) {</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160; </div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    <a class="code" href="classpism_1_1TSDiagnostic_a306640e98f77f12d01552c99828c7b77.html#a306640e98f77f12d01552c99828c7b77">set_units</a>(<span class="stringliteral">&quot;kg s-1&quot;</span>, <span class="stringliteral">&quot;kg year-1&quot;</span>);</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    <a class="code" href="classpism_1_1TSDiagnostic_a74cfa737bf45a52904bb13ef27182a88.html#a74cfa737bf45a52904bb13ef27182a88">m_variable</a>[<span class="stringliteral">&quot;long_name&quot;</span>] = <span class="stringliteral">&quot;surface accumulation rate (PDD model)&quot;</span>;</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;  }</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160; </div>
<div class="line"><a name="l00758"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1diagnostics_1_1TotalSurfaceAccumulation_afc6d71dc77dbed924e90dda8c44f8592.html#afc6d71dc77dbed924e90dda8c44f8592">  758</a></span>&#160;  <span class="keywordtype">double</span> <a class="code" href="classpism_1_1surface_1_1diagnostics_1_1TotalSurfaceAccumulation_afc6d71dc77dbed924e90dda8c44f8592.html#afc6d71dc77dbed924e90dda8c44f8592">compute</a>() {</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacepism_1_1surface_1_1diagnostics_acba2f854fade49a4e39db9125940622f.html#acba2f854fade49a4e39db9125940622f">integrate</a>(<a class="code" href="classpism_1_1TSDiag_a4e8e5a23f739bedd4faceecd858cdd81.html#a4e8e5a23f739bedd4faceecd858cdd81">model</a>-&gt;accumulation());</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;  }</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;};</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160; </div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;<span class="comment">//! \brief Reports the total melt rate.</span></div>
<div class="line"><a name="l00765"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1diagnostics_1_1TotalSurfaceMelt.html">  765</a></span>&#160;<span class="comment"></span><span class="keyword">class </span><a class="code" href="classpism_1_1surface_1_1diagnostics_1_1TotalSurfaceMelt.html">TotalSurfaceMelt</a> : <span class="keyword">public</span> <a class="code" href="classpism_1_1TSDiag.html">TSDiag</a>&lt;TSFluxDiagnostic, SurfaceModel&gt;</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;{</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00768"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1diagnostics_1_1TotalSurfaceMelt_a257f25305b08ced2d7315771228bad88.html#a257f25305b08ced2d7315771228bad88">  768</a></span>&#160;  <a class="code" href="classpism_1_1surface_1_1diagnostics_1_1TotalSurfaceMelt_a257f25305b08ced2d7315771228bad88.html#a257f25305b08ced2d7315771228bad88">TotalSurfaceMelt</a>(<span class="keyword">const</span> <a class="code" href="classpism_1_1surface_1_1SurfaceModel.html">SurfaceModel</a> *m)</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    : <a class="code" href="classpism_1_1TSDiag.html">TSDiag</a>&lt;<a class="code" href="classpism_1_1TSFluxDiagnostic.html">TSFluxDiagnostic</a>, <a class="code" href="classpism_1_1surface_1_1SurfaceModel.html">SurfaceModel</a>&gt;(m, <span class="stringliteral">&quot;surface_melt_rate&quot;</span>) {</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160; </div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <a class="code" href="classpism_1_1TSDiagnostic_a306640e98f77f12d01552c99828c7b77.html#a306640e98f77f12d01552c99828c7b77">set_units</a>(<span class="stringliteral">&quot;kg s-1&quot;</span>, <span class="stringliteral">&quot;kg year-1&quot;</span>);</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    <a class="code" href="classpism_1_1TSDiagnostic_a74cfa737bf45a52904bb13ef27182a88.html#a74cfa737bf45a52904bb13ef27182a88">m_variable</a>[<span class="stringliteral">&quot;long_name&quot;</span>] = <span class="stringliteral">&quot;surface melt rate (PDD model)&quot;</span>;</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;  }</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160; </div>
<div class="line"><a name="l00775"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1diagnostics_1_1TotalSurfaceMelt_acd7fe090da7769cf534f809127419d48.html#acd7fe090da7769cf534f809127419d48">  775</a></span>&#160;  <span class="keywordtype">double</span> <a class="code" href="classpism_1_1surface_1_1diagnostics_1_1TotalSurfaceMelt_acd7fe090da7769cf534f809127419d48.html#acd7fe090da7769cf534f809127419d48">compute</a>() {</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacepism_1_1surface_1_1diagnostics_acba2f854fade49a4e39db9125940622f.html#acba2f854fade49a4e39db9125940622f">integrate</a>(<a class="code" href="classpism_1_1TSDiag_a4e8e5a23f739bedd4faceecd858cdd81.html#a4e8e5a23f739bedd4faceecd858cdd81">model</a>-&gt;melt());</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;  }</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;};</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160; </div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;<span class="comment">//! \brief Reports the total top surface ice flux.</span></div>
<div class="line"><a name="l00782"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1diagnostics_1_1TotalSurfaceRunoff.html">  782</a></span>&#160;<span class="comment"></span><span class="keyword">class </span><a class="code" href="classpism_1_1surface_1_1diagnostics_1_1TotalSurfaceRunoff.html">TotalSurfaceRunoff</a> : <span class="keyword">public</span> <a class="code" href="classpism_1_1TSDiag.html">TSDiag</a>&lt;TSFluxDiagnostic, SurfaceModel&gt;</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;{</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00785"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1diagnostics_1_1TotalSurfaceRunoff_a8677b93df2432800791cf690d53ee02d.html#a8677b93df2432800791cf690d53ee02d">  785</a></span>&#160;  <a class="code" href="classpism_1_1surface_1_1diagnostics_1_1TotalSurfaceRunoff_a8677b93df2432800791cf690d53ee02d.html#a8677b93df2432800791cf690d53ee02d">TotalSurfaceRunoff</a>(<span class="keyword">const</span> <a class="code" href="classpism_1_1surface_1_1SurfaceModel.html">SurfaceModel</a> *m)</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    : <a class="code" href="classpism_1_1TSDiag.html">TSDiag</a>&lt;<a class="code" href="classpism_1_1TSFluxDiagnostic.html">TSFluxDiagnostic</a>, <a class="code" href="classpism_1_1surface_1_1SurfaceModel.html">SurfaceModel</a>&gt;(m, <span class="stringliteral">&quot;surface_runoff_rate&quot;</span>) {</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160; </div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    <a class="code" href="classpism_1_1TSDiagnostic_a306640e98f77f12d01552c99828c7b77.html#a306640e98f77f12d01552c99828c7b77">set_units</a>(<span class="stringliteral">&quot;kg s-1&quot;</span>, <span class="stringliteral">&quot;kg year-1&quot;</span>);</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    <a class="code" href="classpism_1_1TSDiagnostic_a74cfa737bf45a52904bb13ef27182a88.html#a74cfa737bf45a52904bb13ef27182a88">m_variable</a>[<span class="stringliteral">&quot;long_name&quot;</span>] = <span class="stringliteral">&quot;surface runoff rate (PDD model)&quot;</span>;</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;  }</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160; </div>
<div class="line"><a name="l00792"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1diagnostics_1_1TotalSurfaceRunoff_a0d21c561a4c69745813036b408b496ad.html#a0d21c561a4c69745813036b408b496ad">  792</a></span>&#160;  <span class="keywordtype">double</span> <a class="code" href="classpism_1_1surface_1_1diagnostics_1_1TotalSurfaceRunoff_a0d21c561a4c69745813036b408b496ad.html#a0d21c561a4c69745813036b408b496ad">compute</a>() {</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacepism_1_1surface_1_1diagnostics_acba2f854fade49a4e39db9125940622f.html#acba2f854fade49a4e39db9125940622f">integrate</a>(<a class="code" href="classpism_1_1TSDiag_a4e8e5a23f739bedd4faceecd858cdd81.html#a4e8e5a23f739bedd4faceecd858cdd81">model</a>-&gt;runoff());</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;  }</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;};</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160; </div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;} <span class="comment">// end of namespace diagnostics</span></div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160; </div>
<div class="line"><a name="l00799"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1SurfaceModel_a24c2488f992cf6f937cd08b87c5c89c8.html#a24c2488f992cf6f937cd08b87c5c89c8">  799</a></span>&#160;<a class="code" href="namespacepism_a6154a990ba873c6ca606d8a320c441ac.html#a6154a990ba873c6ca606d8a320c441ac">DiagnosticList</a> <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a24c2488f992cf6f937cd08b87c5c89c8.html#a24c2488f992cf6f937cd08b87c5c89c8">SurfaceModel::diagnostics_impl</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;  <span class="keyword">using namespace </span><a class="code" href="classpism_1_1Component_ac0ff4daf2dc8b23ea64b1d635666bdf0.html#ac0ff4daf2dc8b23ea64b1d635666bdf0">diagnostics</a>;</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160; </div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;  <a class="code" href="namespacepism_a6154a990ba873c6ca606d8a320c441ac.html#a6154a990ba873c6ca606d8a320c441ac">DiagnosticList</a> result = {</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    {<span class="stringliteral">&quot;surface_accumulation_flux&quot;</span>,         <a class="code" href="classpism_1_1Diagnostic_a94d5717226f2c89299c0c08168f01455.html#a94d5717226f2c89299c0c08168f01455">Diagnostic::Ptr</a>(<span class="keyword">new</span> Accumulation(<span class="keyword">this</span>, <a class="code" href="namespacepism_1_1surface_1_1diagnostics_acadff920eb40e3febfa8f0cbd19b2986.html#acadff920eb40e3febfa8f0cbd19b2986ad6b52059629f1a3bbbbac787b803b93f">AMOUNT</a>))},</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    {<span class="stringliteral">&quot;surface_accumulation_rate&quot;</span>,         <a class="code" href="classpism_1_1Diagnostic_a94d5717226f2c89299c0c08168f01455.html#a94d5717226f2c89299c0c08168f01455">Diagnostic::Ptr</a>(<span class="keyword">new</span> Accumulation(<span class="keyword">this</span>, <a class="code" href="namespacepism_1_1surface_1_1diagnostics_acadff920eb40e3febfa8f0cbd19b2986.html#acadff920eb40e3febfa8f0cbd19b2986a0a5cd199a02768d6005905118e4e8a0b">MASS</a>))},</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    {<span class="stringliteral">&quot;surface_melt_flux&quot;</span>,                 <a class="code" href="classpism_1_1Diagnostic_a94d5717226f2c89299c0c08168f01455.html#a94d5717226f2c89299c0c08168f01455">Diagnostic::Ptr</a>(<span class="keyword">new</span> SurfaceMelt(<span class="keyword">this</span>, <a class="code" href="namespacepism_1_1surface_1_1diagnostics_acadff920eb40e3febfa8f0cbd19b2986.html#acadff920eb40e3febfa8f0cbd19b2986ad6b52059629f1a3bbbbac787b803b93f">AMOUNT</a>))},</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    {<span class="stringliteral">&quot;surface_melt_rate&quot;</span>,                 <a class="code" href="classpism_1_1Diagnostic_a94d5717226f2c89299c0c08168f01455.html#a94d5717226f2c89299c0c08168f01455">Diagnostic::Ptr</a>(<span class="keyword">new</span> SurfaceMelt(<span class="keyword">this</span>, <a class="code" href="namespacepism_1_1surface_1_1diagnostics_acadff920eb40e3febfa8f0cbd19b2986.html#acadff920eb40e3febfa8f0cbd19b2986a0a5cd199a02768d6005905118e4e8a0b">MASS</a>))},</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    {<span class="stringliteral">&quot;surface_runoff_flux&quot;</span>,               <a class="code" href="classpism_1_1Diagnostic_a94d5717226f2c89299c0c08168f01455.html#a94d5717226f2c89299c0c08168f01455">Diagnostic::Ptr</a>(<span class="keyword">new</span> SurfaceRunoff(<span class="keyword">this</span>, <a class="code" href="namespacepism_1_1surface_1_1diagnostics_acadff920eb40e3febfa8f0cbd19b2986.html#acadff920eb40e3febfa8f0cbd19b2986ad6b52059629f1a3bbbbac787b803b93f">AMOUNT</a>))},</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    {<span class="stringliteral">&quot;surface_runoff_rate&quot;</span>,               <a class="code" href="classpism_1_1Diagnostic_a94d5717226f2c89299c0c08168f01455.html#a94d5717226f2c89299c0c08168f01455">Diagnostic::Ptr</a>(<span class="keyword">new</span> SurfaceRunoff(<span class="keyword">this</span>, <a class="code" href="namespacepism_1_1surface_1_1diagnostics_acadff920eb40e3febfa8f0cbd19b2986.html#acadff920eb40e3febfa8f0cbd19b2986a0a5cd199a02768d6005905118e4e8a0b">MASS</a>))},</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    {<span class="stringliteral">&quot;climatic_mass_balance&quot;</span>,             <a class="code" href="classpism_1_1Diagnostic_a94d5717226f2c89299c0c08168f01455.html#a94d5717226f2c89299c0c08168f01455">Diagnostic::Ptr</a>(<span class="keyword">new</span> PS_climatic_mass_balance(<span class="keyword">this</span>))},</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    {<span class="stringliteral">&quot;ice_surface_temp&quot;</span>,                  <a class="code" href="classpism_1_1Diagnostic_a94d5717226f2c89299c0c08168f01455.html#a94d5717226f2c89299c0c08168f01455">Diagnostic::Ptr</a>(<span class="keyword">new</span> PS_ice_surface_temp(<span class="keyword">this</span>))},</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    {<span class="stringliteral">&quot;ice_surface_liquid_water_fraction&quot;</span>, <a class="code" href="classpism_1_1Diagnostic_a94d5717226f2c89299c0c08168f01455.html#a94d5717226f2c89299c0c08168f01455">Diagnostic::Ptr</a>(<span class="keyword">new</span> PS_liquid_water_fraction(<span class="keyword">this</span>))},</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    {<span class="stringliteral">&quot;surface_layer_mass&quot;</span>,                <a class="code" href="classpism_1_1Diagnostic_a94d5717226f2c89299c0c08168f01455.html#a94d5717226f2c89299c0c08168f01455">Diagnostic::Ptr</a>(<span class="keyword">new</span> PS_layer_mass(<span class="keyword">this</span>))},</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    {<span class="stringliteral">&quot;surface_layer_thickness&quot;</span>,           <a class="code" href="classpism_1_1Diagnostic_a94d5717226f2c89299c0c08168f01455.html#a94d5717226f2c89299c0c08168f01455">Diagnostic::Ptr</a>(<span class="keyword">new</span> PS_layer_thickness(<span class="keyword">this</span>))}</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;  };</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160; </div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classpism_1_1Component_a28f298fc2133baae8cebf9dedf3b4d84.html#a28f298fc2133baae8cebf9dedf3b4d84">m_config</a>-&gt;get_flag(<span class="stringliteral">&quot;output.ISMIP6&quot;</span>)) {</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    result[<span class="stringliteral">&quot;litemptop&quot;</span>] = <a class="code" href="classpism_1_1Diagnostic_a94d5717226f2c89299c0c08168f01455.html#a94d5717226f2c89299c0c08168f01455">Diagnostic::Ptr</a>(<span class="keyword">new</span> PS_ice_surface_temp(<span class="keyword">this</span>));</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  }</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160; </div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classpism_1_1surface_1_1SurfaceModel_a22e31b57b550f96a22d16be8103d2bcc.html#a22e31b57b550f96a22d16be8103d2bcc">m_atmosphere</a>) {</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    result = <a class="code" href="namespacepism_ab50523fe25aadf4a123551726b2a2967.html#ab50523fe25aadf4a123551726b2a2967">pism::combine</a>(result, <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a22e31b57b550f96a22d16be8103d2bcc.html#a22e31b57b550f96a22d16be8103d2bcc">m_atmosphere</a>-&gt;diagnostics());</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;  }</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160; </div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classpism_1_1surface_1_1SurfaceModel_a7d5c078c2dbf02ac0a12fc4e209651c1.html#a7d5c078c2dbf02ac0a12fc4e209651c1">m_input_model</a>) {</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    result = <a class="code" href="namespacepism_ab50523fe25aadf4a123551726b2a2967.html#ab50523fe25aadf4a123551726b2a2967">pism::combine</a>(result, <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a7d5c078c2dbf02ac0a12fc4e209651c1.html#a7d5c078c2dbf02ac0a12fc4e209651c1">m_input_model</a>-&gt;diagnostics());</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;  }</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160; </div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;  <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;}</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160; </div>
<div class="line"><a name="l00831"></a><span class="lineno"><a class="line" href="classpism_1_1surface_1_1SurfaceModel_aaf90d1a7562554b4919b72917e150455.html#aaf90d1a7562554b4919b72917e150455">  831</a></span>&#160;<a class="code" href="namespacepism_a5cca85a16d08e7581dbc0ce9e341956a.html#a5cca85a16d08e7581dbc0ce9e341956a">TSDiagnosticList</a> <a class="code" href="classpism_1_1surface_1_1SurfaceModel_aaf90d1a7562554b4919b72917e150455.html#aaf90d1a7562554b4919b72917e150455">SurfaceModel::ts_diagnostics_impl</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;  <span class="keyword">using namespace </span><a class="code" href="classpism_1_1Component_ac0ff4daf2dc8b23ea64b1d635666bdf0.html#ac0ff4daf2dc8b23ea64b1d635666bdf0">diagnostics</a>;</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160; </div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;  <a class="code" href="namespacepism_a5cca85a16d08e7581dbc0ce9e341956a.html#a5cca85a16d08e7581dbc0ce9e341956a">TSDiagnosticList</a> result = {</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    {<span class="stringliteral">&quot;surface_accumulation_rate&quot;</span>, <a class="code" href="classpism_1_1TSDiagnostic_ad642866114d7b384b86091ac2c5e2882.html#ad642866114d7b384b86091ac2c5e2882">TSDiagnostic::Ptr</a>(<span class="keyword">new</span> TotalSurfaceAccumulation(<span class="keyword">this</span>))},</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    {<span class="stringliteral">&quot;surface_melt_rate&quot;</span>,         <a class="code" href="classpism_1_1TSDiagnostic_ad642866114d7b384b86091ac2c5e2882.html#ad642866114d7b384b86091ac2c5e2882">TSDiagnostic::Ptr</a>(<span class="keyword">new</span> TotalSurfaceMelt(<span class="keyword">this</span>))},</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    {<span class="stringliteral">&quot;surface_runoff_rate&quot;</span>,       <a class="code" href="classpism_1_1TSDiagnostic_ad642866114d7b384b86091ac2c5e2882.html#ad642866114d7b384b86091ac2c5e2882">TSDiagnostic::Ptr</a>(<span class="keyword">new</span> TotalSurfaceRunoff(<span class="keyword">this</span>))},</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;  };</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160; </div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classpism_1_1surface_1_1SurfaceModel_a22e31b57b550f96a22d16be8103d2bcc.html#a22e31b57b550f96a22d16be8103d2bcc">m_atmosphere</a>) {</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacepism_ab50523fe25aadf4a123551726b2a2967.html#ab50523fe25aadf4a123551726b2a2967">pism::combine</a>(result, <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a22e31b57b550f96a22d16be8103d2bcc.html#a22e31b57b550f96a22d16be8103d2bcc">m_atmosphere</a>-&gt;ts_diagnostics());</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;  }</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160; </div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classpism_1_1surface_1_1SurfaceModel_a7d5c078c2dbf02ac0a12fc4e209651c1.html#a7d5c078c2dbf02ac0a12fc4e209651c1">m_input_model</a>) {</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacepism_ab50523fe25aadf4a123551726b2a2967.html#ab50523fe25aadf4a123551726b2a2967">pism::combine</a>(result, <a class="code" href="classpism_1_1surface_1_1SurfaceModel_a7d5c078c2dbf02ac0a12fc4e209651c1.html#a7d5c078c2dbf02ac0a12fc4e209651c1">m_input_model</a>-&gt;ts_diagnostics());</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;  }</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160; </div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;  <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;}</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160; </div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;} <span class="comment">// end of namespace surface</span></div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;} <span class="comment">// end of namespace pism</span></div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160; </div>
<div class="ttc" id="aclasspism_1_1Component_a1d7fa2a58f259a9c5e464f8738db6ef0_html_a1d7fa2a58f259a9c5e464f8738db6ef0"><div class="ttname"><a href="classpism_1_1Component_a1d7fa2a58f259a9c5e464f8738db6ef0.html#a1d7fa2a58f259a9c5e464f8738db6ef0">pism::Component::grid</a></div><div class="ttdeci">std::shared_ptr&lt; const Grid &gt; grid() const</div><div class="ttdef"><b>Definition:</b> <a href="Component_8cc_source.html#l00105">Component.cc:105</a></div></div>
<div class="ttc" id="aclasspism_1_1Component_a28f298fc2133baae8cebf9dedf3b4d84_html_a28f298fc2133baae8cebf9dedf3b4d84"><div class="ttname"><a href="classpism_1_1Component_a28f298fc2133baae8cebf9dedf3b4d84.html#a28f298fc2133baae8cebf9dedf3b4d84">pism::Component::m_config</a></div><div class="ttdeci">const Config::ConstPtr m_config</div><div class="ttdoc">configuration database used by this component</div><div class="ttdef"><b>Definition:</b> <a href="Component_8hh_source.html#l00158">Component.hh:158</a></div></div>
<div class="ttc" id="aclasspism_1_1Component_a745aa37bc1b5da6db5bfc280ecb3c811_html_a745aa37bc1b5da6db5bfc280ecb3c811"><div class="ttname"><a href="classpism_1_1Component_a745aa37bc1b5da6db5bfc280ecb3c811.html#a745aa37bc1b5da6db5bfc280ecb3c811">pism::Component::m_grid</a></div><div class="ttdeci">const std::shared_ptr&lt; const Grid &gt; m_grid</div><div class="ttdoc">grid used by this component</div><div class="ttdef"><b>Definition:</b> <a href="Component_8hh_source.html#l00156">Component.hh:156</a></div></div>
<div class="ttc" id="aclasspism_1_1Component_ac0ff4daf2dc8b23ea64b1d635666bdf0_html_ac0ff4daf2dc8b23ea64b1d635666bdf0"><div class="ttname"><a href="classpism_1_1Component_ac0ff4daf2dc8b23ea64b1d635666bdf0.html#ac0ff4daf2dc8b23ea64b1d635666bdf0">pism::Component::diagnostics</a></div><div class="ttdeci">DiagnosticList diagnostics() const</div><div class="ttdef"><b>Definition:</b> <a href="Component_8cc_source.html#l00089">Component.cc:89</a></div></div>
<div class="ttc" id="aclasspism_1_1Component_html"><div class="ttname"><a href="classpism_1_1Component.html">pism::Component</a></div><div class="ttdoc">A class defining a common interface for most PISM sub-models.</div><div class="ttdef"><b>Definition:</b> <a href="Component_8hh_source.html#l00118">Component.hh:118</a></div></div>
<div class="ttc" id="aclasspism_1_1DiagAverageRate_a252d2c1d0942cf6f75fd5c85255aae93_html_a252d2c1d0942cf6f75fd5c85255aae93"><div class="ttname"><a href="classpism_1_1DiagAverageRate_a252d2c1d0942cf6f75fd5c85255aae93.html#a252d2c1d0942cf6f75fd5c85255aae93">pism::DiagAverageRate&lt; SurfaceModel &gt;::m_accumulator</a></div><div class="ttdeci">array::Scalar m_accumulator</div><div class="ttdef"><b>Definition:</b> <a href="Diagnostic_8hh_source.html#l00266">Diagnostic.hh:266</a></div></div>
<div class="ttc" id="aclasspism_1_1DiagAverageRate_a44a50685701b5dcd19e71e4f2cc1e46f_html_a44a50685701b5dcd19e71e4f2cc1e46fa5ff14e4c51b9dfcb0540c0ce28d67cdd"><div class="ttname"><a href="classpism_1_1DiagAverageRate_a44a50685701b5dcd19e71e4f2cc1e46f.html#a44a50685701b5dcd19e71e4f2cc1e46fa5ff14e4c51b9dfcb0540c0ce28d67cdd">pism::DiagAverageRate&lt; SurfaceModel &gt;::TOTAL_CHANGE</a></div><div class="ttdeci">@ TOTAL_CHANGE</div><div class="ttdef"><b>Definition:</b> <a href="Diagnostic_8hh_source.html#l00182">Diagnostic.hh:182</a></div></div>
<div class="ttc" id="aclasspism_1_1DiagAverageRate_html"><div class="ttname"><a href="classpism_1_1DiagAverageRate.html">pism::DiagAverageRate</a></div><div class="ttdef"><b>Definition:</b> <a href="Diagnostic_8hh_source.html#l00180">Diagnostic.hh:180</a></div></div>
<div class="ttc" id="aclasspism_1_1Diag_aa3e0516ca815c840bfa479256aa1f711_html_aa3e0516ca815c840bfa479256aa1f711"><div class="ttname"><a href="classpism_1_1Diag_aa3e0516ca815c840bfa479256aa1f711.html#aa3e0516ca815c840bfa479256aa1f711">pism::Diag&lt; SurfaceModel &gt;::model</a></div><div class="ttdeci">const SurfaceModel * model</div><div class="ttdef"><b>Definition:</b> <a href="Diagnostic_8hh_source.html#l00172">Diagnostic.hh:172</a></div></div>
<div class="ttc" id="aclasspism_1_1Diag_html"><div class="ttname"><a href="classpism_1_1Diag.html">pism::Diag</a></div><div class="ttdoc">A template derived from Diagnostic, adding a &quot;Model&quot;.</div><div class="ttdef"><b>Definition:</b> <a href="Diagnostic_8hh_source.html#l00166">Diagnostic.hh:166</a></div></div>
<div class="ttc" id="aclasspism_1_1Diagnostic_a4d9fd84fa2feaaf986df8ecbe6832506_html_a4d9fd84fa2feaaf986df8ecbe6832506"><div class="ttname"><a href="classpism_1_1Diagnostic_a4d9fd84fa2feaaf986df8ecbe6832506.html#a4d9fd84fa2feaaf986df8ecbe6832506">pism::Diagnostic::m_fill_value</a></div><div class="ttdeci">double m_fill_value</div><div class="ttdoc">fill value (used often enough to justify storing it)</div><div class="ttdef"><b>Definition:</b> <a href="Diagnostic_8hh_source.html#l00122">Diagnostic.hh:122</a></div></div>
<div class="ttc" id="aclasspism_1_1Diagnostic_a66c35ec2a3236c20757ba9ce5880eb6d_html_a66c35ec2a3236c20757ba9ce5880eb6d"><div class="ttname"><a href="classpism_1_1Diagnostic_a66c35ec2a3236c20757ba9ce5880eb6d.html#a66c35ec2a3236c20757ba9ce5880eb6d">pism::Diagnostic::m_sys</a></div><div class="ttdeci">const units::System::Ptr m_sys</div><div class="ttdoc">the unit system</div><div class="ttdef"><b>Definition:</b> <a href="Diagnostic_8hh_source.html#l00116">Diagnostic.hh:116</a></div></div>
<div class="ttc" id="aclasspism_1_1Diagnostic_a71431ab62fe704b0a9317140f3ab3bd3_html_a71431ab62fe704b0a9317140f3ab3bd3"><div class="ttname"><a href="classpism_1_1Diagnostic_a71431ab62fe704b0a9317140f3ab3bd3.html#a71431ab62fe704b0a9317140f3ab3bd3">pism::Diagnostic::to_internal</a></div><div class="ttdeci">double to_internal(double x) const</div><div class="ttdef"><b>Definition:</b> <a href="Diagnostic_8cc_source.html#l00059">Diagnostic.cc:59</a></div></div>
<div class="ttc" id="aclasspism_1_1Diagnostic_a7590d3d6d714ca1bbc99787baea537e0_html_a7590d3d6d714ca1bbc99787baea537e0"><div class="ttname"><a href="classpism_1_1Diagnostic_a7590d3d6d714ca1bbc99787baea537e0.html#a7590d3d6d714ca1bbc99787baea537e0">pism::Diagnostic::m_vars</a></div><div class="ttdeci">std::vector&lt; SpatialVariableMetadata &gt; m_vars</div><div class="ttdoc">metadata corresponding to NetCDF variables</div><div class="ttdef"><b>Definition:</b> <a href="Diagnostic_8hh_source.html#l00120">Diagnostic.hh:120</a></div></div>
<div class="ttc" id="aclasspism_1_1Diagnostic_a94d5717226f2c89299c0c08168f01455_html_a94d5717226f2c89299c0c08168f01455"><div class="ttname"><a href="classpism_1_1Diagnostic_a94d5717226f2c89299c0c08168f01455.html#a94d5717226f2c89299c0c08168f01455">pism::Diagnostic::Ptr</a></div><div class="ttdeci">std::shared_ptr&lt; Diagnostic &gt; Ptr</div><div class="ttdef"><b>Definition:</b> <a href="Diagnostic_8hh_source.html#l00065">Diagnostic.hh:65</a></div></div>
<div class="ttc" id="aclasspism_1_1Diagnostic_af0eaf7c1c949d96b5c5ac945c7b744ca_html_af0eaf7c1c949d96b5c5ac945c7b744ca"><div class="ttname"><a href="classpism_1_1Diagnostic_af0eaf7c1c949d96b5c5ac945c7b744ca.html#af0eaf7c1c949d96b5c5ac945c7b744ca">pism::Diagnostic::m_grid</a></div><div class="ttdeci">std::shared_ptr&lt; const Grid &gt; m_grid</div><div class="ttdoc">the grid</div><div class="ttdef"><b>Definition:</b> <a href="Diagnostic_8hh_source.html#l00114">Diagnostic.hh:114</a></div></div>
<div class="ttc" id="aclasspism_1_1Diagnostic_afdafdc402891ace41badf7a4c33bac10_html_afdafdc402891ace41badf7a4c33bac10"><div class="ttname"><a href="classpism_1_1Diagnostic_afdafdc402891ace41badf7a4c33bac10.html#afdafdc402891ace41badf7a4c33bac10">pism::Diagnostic::m_config</a></div><div class="ttdeci">const Config::ConstPtr m_config</div><div class="ttdoc">Configuration flags and parameters.</div><div class="ttdef"><b>Definition:</b> <a href="Diagnostic_8hh_source.html#l00118">Diagnostic.hh:118</a></div></div>
<div class="ttc" id="aclasspism_1_1File_html"><div class="ttname"><a href="classpism_1_1File.html">pism::File</a></div><div class="ttdoc">High-level PISM I/O class.</div><div class="ttdef"><b>Definition:</b> <a href="File_8hh_source.html#l00055">File.hh:56</a></div></div>
<div class="ttc" id="aclasspism_1_1Geometry_html"><div class="ttname"><a href="classpism_1_1Geometry.html">pism::Geometry</a></div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8hh_source.html#l00029">Geometry.hh:29</a></div></div>
<div class="ttc" id="aclasspism_1_1MaxTimestep_html"><div class="ttname"><a href="classpism_1_1MaxTimestep.html">pism::MaxTimestep</a></div><div class="ttdoc">Combines the max. time step with the flag indicating if a restriction is active. Makes is possible to...</div><div class="ttdef"><b>Definition:</b> <a href="MaxTimestep_8hh_source.html#l00031">MaxTimestep.hh:31</a></div></div>
<div class="ttc" id="aclasspism_1_1RuntimeError_ad0ed5f05a9a4e3e403a1d62f8d1e4e7d_html_ad0ed5f05a9a4e3e403a1d62f8d1e4e7d"><div class="ttname"><a href="classpism_1_1RuntimeError_ad0ed5f05a9a4e3e403a1d62f8d1e4e7d.html#ad0ed5f05a9a4e3e403a1d62f8d1e4e7d">pism::RuntimeError::formatted</a></div><div class="ttdeci">static RuntimeError formatted(const ErrorLocation &amp;location, const char format[],...) __attribute__((format(printf</div><div class="ttdoc">build a RuntimeError with a formatted message</div><div class="ttdef"><b>Definition:</b> <a href="error__handling_8cc_source.html#l00047">error_handling.cc:47</a></div></div>
<div class="ttc" id="aclasspism_1_1TSDiag_a4e8e5a23f739bedd4faceecd858cdd81_html_a4e8e5a23f739bedd4faceecd858cdd81"><div class="ttname"><a href="classpism_1_1TSDiag_a4e8e5a23f739bedd4faceecd858cdd81.html#a4e8e5a23f739bedd4faceecd858cdd81">pism::TSDiag&lt; TSFluxDiagnostic, SurfaceModel &gt;::model</a></div><div class="ttdeci">const SurfaceModel * model</div><div class="ttdef"><b>Definition:</b> <a href="Diagnostic_8hh_source.html#l00410">Diagnostic.hh:410</a></div></div>
<div class="ttc" id="aclasspism_1_1TSDiag_html"><div class="ttname"><a href="classpism_1_1TSDiag.html">pism::TSDiag</a></div><div class="ttdef"><b>Definition:</b> <a href="Diagnostic_8hh_source.html#l00404">Diagnostic.hh:404</a></div></div>
<div class="ttc" id="aclasspism_1_1TSDiagnostic_a306640e98f77f12d01552c99828c7b77_html_a306640e98f77f12d01552c99828c7b77"><div class="ttname"><a href="classpism_1_1TSDiagnostic_a306640e98f77f12d01552c99828c7b77.html#a306640e98f77f12d01552c99828c7b77">pism::TSDiagnostic::set_units</a></div><div class="ttdeci">void set_units(const std::string &amp;units, const std::string &amp;output_units)</div><div class="ttdef"><b>Definition:</b> <a href="Diagnostic_8cc_source.html#l00171">Diagnostic.cc:171</a></div></div>
<div class="ttc" id="aclasspism_1_1TSDiagnostic_a74cfa737bf45a52904bb13ef27182a88_html_a74cfa737bf45a52904bb13ef27182a88"><div class="ttname"><a href="classpism_1_1TSDiagnostic_a74cfa737bf45a52904bb13ef27182a88.html#a74cfa737bf45a52904bb13ef27182a88">pism::TSDiagnostic::m_variable</a></div><div class="ttdeci">VariableMetadata m_variable</div><div class="ttdef"><b>Definition:</b> <a href="Diagnostic_8hh_source.html#l00320">Diagnostic.hh:320</a></div></div>
<div class="ttc" id="aclasspism_1_1TSDiagnostic_ad642866114d7b384b86091ac2c5e2882_html_ad642866114d7b384b86091ac2c5e2882"><div class="ttname"><a href="classpism_1_1TSDiagnostic_ad642866114d7b384b86091ac2c5e2882.html#ad642866114d7b384b86091ac2c5e2882">pism::TSDiagnostic::Ptr</a></div><div class="ttdeci">std::shared_ptr&lt; TSDiagnostic &gt; Ptr</div><div class="ttdef"><b>Definition:</b> <a href="Diagnostic_8hh_source.html#l00280">Diagnostic.hh:280</a></div></div>
<div class="ttc" id="aclasspism_1_1TSFluxDiagnostic_html"><div class="ttname"><a href="classpism_1_1TSFluxDiagnostic.html">pism::TSFluxDiagnostic</a></div><div class="ttdoc">Scalar diagnostic reporting a &quot;flux&quot;.</div><div class="ttdef"><b>Definition:</b> <a href="Diagnostic_8hh_source.html#l00395">Diagnostic.hh:395</a></div></div>
<div class="ttc" id="aclasspism_1_1array_1_1AccessScope_html"><div class="ttname"><a href="classpism_1_1array_1_1AccessScope.html">pism::array::AccessScope</a></div><div class="ttdoc">Makes sure that we call begin_access() and end_access() for all accessed array::Arrays.</div><div class="ttdef"><b>Definition:</b> <a href="Array_8hh_source.html#l00065">Array.hh:65</a></div></div>
<div class="ttc" id="aclasspism_1_1array_1_1Array_a982fca110a5d7011f681b928b20e3577_html_a982fca110a5d7011f681b928b20e3577"><div class="ttname"><a href="classpism_1_1array_1_1Array_a982fca110a5d7011f681b928b20e3577.html#a982fca110a5d7011f681b928b20e3577">pism::array::Array::grid</a></div><div class="ttdeci">std::shared_ptr&lt; const Grid &gt; grid() const</div><div class="ttdef"><b>Definition:</b> <a href="Array_8cc_source.html#l00132">Array.cc:132</a></div></div>
<div class="ttc" id="aclasspism_1_1array_1_1Array_af9eece42153cd03bfc8ba237ae5310c4_html_af9eece42153cd03bfc8ba237ae5310c4"><div class="ttname"><a href="classpism_1_1array_1_1Array_af9eece42153cd03bfc8ba237ae5310c4.html#af9eece42153cd03bfc8ba237ae5310c4">pism::array::Array::metadata</a></div><div class="ttdeci">SpatialVariableMetadata &amp; metadata(unsigned int N=0)</div><div class="ttdoc">Returns a reference to the SpatialVariableMetadata object containing metadata for the compoment N.</div><div class="ttdef"><b>Definition:</b> <a href="Array_8cc_source.html#l00553">Array.cc:553</a></div></div>
<div class="ttc" id="aclasspism_1_1array_1_1Scalar_html"><div class="ttname"><a href="classpism_1_1array_1_1Scalar.html">pism::array::Scalar</a></div><div class="ttdef"><b>Definition:</b> <a href="Scalar_8hh_source.html#l00031">Scalar.hh:31</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1SurfaceModel_a058528b11b0add13753a5c5eb6307744_html_a058528b11b0add13753a5c5eb6307744"><div class="ttname"><a href="classpism_1_1surface_1_1SurfaceModel_a058528b11b0add13753a5c5eb6307744.html#a058528b11b0add13753a5c5eb6307744">pism::surface::SurfaceModel::melt</a></div><div class="ttdeci">const array::Scalar &amp; melt() const</div><div class="ttdoc">Returns melt.</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00178">SurfaceModel.cc:178</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1SurfaceModel_a0bc45dacd90ee84e94695505d3123ec6_html_a0bc45dacd90ee84e94695505d3123ec6"><div class="ttname"><a href="classpism_1_1surface_1_1SurfaceModel_a0bc45dacd90ee84e94695505d3123ec6.html#a0bc45dacd90ee84e94695505d3123ec6">pism::surface::SurfaceModel::allocate_runoff</a></div><div class="ttdeci">static std::shared_ptr&lt; array::Scalar &gt; allocate_runoff(std::shared_ptr&lt; const Grid &gt; grid)</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00124">SurfaceModel.cc:124</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1SurfaceModel_a104eba2c6613cfecd423c2a8771a20ee_html_a104eba2c6613cfecd423c2a8771a20ee"><div class="ttname"><a href="classpism_1_1surface_1_1SurfaceModel_a104eba2c6613cfecd423c2a8771a20ee.html#a104eba2c6613cfecd423c2a8771a20ee">pism::surface::SurfaceModel::layer_mass_impl</a></div><div class="ttdeci">virtual const array::Scalar &amp; layer_mass_impl() const</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00274">SurfaceModel.cc:274</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1SurfaceModel_a13a6a476c9e3057ce86bd9e1096cbf84_html_a13a6a476c9e3057ce86bd9e1096cbf84"><div class="ttname"><a href="classpism_1_1surface_1_1SurfaceModel_a13a6a476c9e3057ce86bd9e1096cbf84.html#a13a6a476c9e3057ce86bd9e1096cbf84">pism::surface::SurfaceModel::liquid_water_fraction</a></div><div class="ttdeci">const array::Scalar &amp; liquid_water_fraction() const</div><div class="ttdoc">Returns the liquid water fraction of the ice at the top ice surface.</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00202">SurfaceModel.cc:202</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1SurfaceModel_a1e53c5049ea1688a117e3f975eff5465_html_a1e53c5049ea1688a117e3f975eff5465"><div class="ttname"><a href="classpism_1_1surface_1_1SurfaceModel_a1e53c5049ea1688a117e3f975eff5465.html#a1e53c5049ea1688a117e3f975eff5465">pism::surface::SurfaceModel::layer_mass</a></div><div class="ttdeci">const array::Scalar &amp; layer_mass() const</div><div class="ttdoc">Returns mass held in the surface layer.</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00211">SurfaceModel.cc:211</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1SurfaceModel_a22c70c6c04eed7800c882e8948fbd1a2_html_a22c70c6c04eed7800c882e8948fbd1a2"><div class="ttname"><a href="classpism_1_1surface_1_1SurfaceModel_a22c70c6c04eed7800c882e8948fbd1a2.html#a22c70c6c04eed7800c882e8948fbd1a2">pism::surface::SurfaceModel::update</a></div><div class="ttdeci">void update(const Geometry &amp;geometry, double t, double dt)</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00304">SurfaceModel.cc:304</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1SurfaceModel_a22e31b57b550f96a22d16be8103d2bcc_html_a22e31b57b550f96a22d16be8103d2bcc"><div class="ttname"><a href="classpism_1_1surface_1_1SurfaceModel_a22e31b57b550f96a22d16be8103d2bcc.html#a22e31b57b550f96a22d16be8103d2bcc">pism::surface::SurfaceModel::m_atmosphere</a></div><div class="ttdeci">std::shared_ptr&lt; atmosphere::AtmosphereModel &gt; m_atmosphere</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8hh_source.html#l00108">SurfaceModel.hh:108</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1SurfaceModel_a2430149f4b9d6e36bfb1f5bcaa5601a7_html_a2430149f4b9d6e36bfb1f5bcaa5601a7"><div class="ttname"><a href="classpism_1_1surface_1_1SurfaceModel_a2430149f4b9d6e36bfb1f5bcaa5601a7.html#a2430149f4b9d6e36bfb1f5bcaa5601a7">pism::surface::SurfaceModel::allocate_mass_flux</a></div><div class="ttdeci">static std::shared_ptr&lt; array::Scalar &gt; allocate_mass_flux(std::shared_ptr&lt; const Grid &gt; grid)</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00073">SurfaceModel.cc:73</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1SurfaceModel_a24c2488f992cf6f937cd08b87c5c89c8_html_a24c2488f992cf6f937cd08b87c5c89c8"><div class="ttname"><a href="classpism_1_1surface_1_1SurfaceModel_a24c2488f992cf6f937cd08b87c5c89c8.html#a24c2488f992cf6f937cd08b87c5c89c8">pism::surface::SurfaceModel::diagnostics_impl</a></div><div class="ttdeci">virtual DiagnosticList diagnostics_impl() const</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00799">SurfaceModel.cc:799</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1SurfaceModel_a2672ef3ce9378b9da9d834dad76a04b4_html_a2672ef3ce9378b9da9d834dad76a04b4"><div class="ttname"><a href="classpism_1_1surface_1_1SurfaceModel_a2672ef3ce9378b9da9d834dad76a04b4.html#a2672ef3ce9378b9da9d834dad76a04b4">pism::surface::SurfaceModel::dummy_accumulation</a></div><div class="ttdeci">void dummy_accumulation(const array::Scalar &amp;smb, array::Scalar &amp;result)</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00360">SurfaceModel.cc:360</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1SurfaceModel_a28adc37bcde341bc0027d181ba838d40_html_a28adc37bcde341bc0027d181ba838d40"><div class="ttname"><a href="classpism_1_1surface_1_1SurfaceModel_a28adc37bcde341bc0027d181ba838d40.html#a28adc37bcde341bc0027d181ba838d40">pism::surface::SurfaceModel::update_impl</a></div><div class="ttdeci">virtual void update_impl(const Geometry &amp;geometry, double t, double dt)</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00308">SurfaceModel.cc:308</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1SurfaceModel_a28b0421a4a06f1f0086d6599b17f418a_html_a28b0421a4a06f1f0086d6599b17f418a"><div class="ttname"><a href="classpism_1_1surface_1_1SurfaceModel_a28b0421a4a06f1f0086d6599b17f418a.html#a28b0421a4a06f1f0086d6599b17f418a">pism::surface::SurfaceModel::m_melt</a></div><div class="ttdeci">std::shared_ptr&lt; array::Scalar &gt; m_melt</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8hh_source.html#l00104">SurfaceModel.hh:104</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1SurfaceModel_a2a0de4064fef0a537c91e49bad13f023_html_a2a0de4064fef0a537c91e49bad13f023"><div class="ttname"><a href="classpism_1_1surface_1_1SurfaceModel_a2a0de4064fef0a537c91e49bad13f023.html#a2a0de4064fef0a537c91e49bad13f023">pism::surface::SurfaceModel::init</a></div><div class="ttdeci">void init(const Geometry &amp;geometry)</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00290">SurfaceModel.cc:290</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1SurfaceModel_a2d7e7c56b9feab53f1b9058ed738ff24_html_a2d7e7c56b9feab53f1b9058ed738ff24"><div class="ttname"><a href="classpism_1_1surface_1_1SurfaceModel_a2d7e7c56b9feab53f1b9058ed738ff24.html#a2d7e7c56b9feab53f1b9058ed738ff24">pism::surface::SurfaceModel::write_model_state_impl</a></div><div class="ttdeci">virtual void write_model_state_impl(const File &amp;output) const</div><div class="ttdoc">The default (empty implementation).</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00328">SurfaceModel.cc:328</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1SurfaceModel_a2e6c1ed05226d150c8240ad865946999_html_a2e6c1ed05226d150c8240ad865946999"><div class="ttname"><a href="classpism_1_1surface_1_1SurfaceModel_a2e6c1ed05226d150c8240ad865946999.html#a2e6c1ed05226d150c8240ad865946999">pism::surface::SurfaceModel::define_model_state_impl</a></div><div class="ttdeci">virtual void define_model_state_impl(const File &amp;output) const</div><div class="ttdoc">The default (empty implementation).</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00318">SurfaceModel.cc:318</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1SurfaceModel_a3128cde9cc2a24937e1959f0fbd6d64b_html_a3128cde9cc2a24937e1959f0fbd6d64b"><div class="ttname"><a href="classpism_1_1surface_1_1SurfaceModel_a3128cde9cc2a24937e1959f0fbd6d64b.html#a3128cde9cc2a24937e1959f0fbd6d64b">pism::surface::SurfaceModel::m_layer_thickness</a></div><div class="ttdeci">std::shared_ptr&lt; array::Scalar &gt; m_layer_thickness</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8hh_source.html#l00102">SurfaceModel.hh:102</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1SurfaceModel_a31ee22d6c222a8672863eae196e10f87_html_a31ee22d6c222a8672863eae196e10f87"><div class="ttname"><a href="classpism_1_1surface_1_1SurfaceModel_a31ee22d6c222a8672863eae196e10f87.html#a31ee22d6c222a8672863eae196e10f87">pism::surface::SurfaceModel::mass_flux</a></div><div class="ttdeci">const array::Scalar &amp; mass_flux() const</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00190">SurfaceModel.cc:190</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1SurfaceModel_a32219dd14a6a9d77222fb9c600e91f4e_html_a32219dd14a6a9d77222fb9c600e91f4e"><div class="ttname"><a href="classpism_1_1surface_1_1SurfaceModel_a32219dd14a6a9d77222fb9c600e91f4e.html#a32219dd14a6a9d77222fb9c600e91f4e">pism::surface::SurfaceModel::allocate_temperature</a></div><div class="ttdeci">static std::shared_ptr&lt; array::Scalar &gt; allocate_temperature(std::shared_ptr&lt; const Grid &gt; grid)</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00092">SurfaceModel.cc:92</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1SurfaceModel_a34763695b3bc8d2d80ef0c5f6fb66e20_html_a34763695b3bc8d2d80ef0c5f6fb66e20"><div class="ttname"><a href="classpism_1_1surface_1_1SurfaceModel_a34763695b3bc8d2d80ef0c5f6fb66e20.html#a34763695b3bc8d2d80ef0c5f6fb66e20">pism::surface::SurfaceModel::accumulation_impl</a></div><div class="ttdeci">virtual const array::Scalar &amp; accumulation_impl() const</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00226">SurfaceModel.cc:226</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1SurfaceModel_a356651c8125dcb5552ea01d27b29ce1d_html_a356651c8125dcb5552ea01d27b29ce1d"><div class="ttname"><a href="classpism_1_1surface_1_1SurfaceModel_a356651c8125dcb5552ea01d27b29ce1d.html#a356651c8125dcb5552ea01d27b29ce1d">pism::surface::SurfaceModel::accumulation</a></div><div class="ttdeci">const array::Scalar &amp; accumulation() const</div><div class="ttdoc">Returns accumulation.</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00170">SurfaceModel.cc:170</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1SurfaceModel_a406fd2b8bf810e92e257275ed39f995a_html_a406fd2b8bf810e92e257275ed39f995a"><div class="ttname"><a href="classpism_1_1surface_1_1SurfaceModel_a406fd2b8bf810e92e257275ed39f995a.html#a406fd2b8bf810e92e257275ed39f995a">pism::surface::SurfaceModel::liquid_water_fraction_impl</a></div><div class="ttdeci">virtual const array::Scalar &amp; liquid_water_fraction_impl() const</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00266">SurfaceModel.cc:266</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1SurfaceModel_a459787d4d0c29c321bf56698190f2f12_html_a459787d4d0c29c321bf56698190f2f12"><div class="ttname"><a href="classpism_1_1surface_1_1SurfaceModel_a459787d4d0c29c321bf56698190f2f12.html#a459787d4d0c29c321bf56698190f2f12">pism::surface::SurfaceModel::allocate_accumulation</a></div><div class="ttdeci">static std::shared_ptr&lt; array::Scalar &gt; allocate_accumulation(std::shared_ptr&lt; const Grid &gt; grid)</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00106">SurfaceModel.cc:106</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1SurfaceModel_a4a8a5b6d913f4d57a7dfe69d0a939192_html_a4a8a5b6d913f4d57a7dfe69d0a939192"><div class="ttname"><a href="classpism_1_1surface_1_1SurfaceModel_a4a8a5b6d913f4d57a7dfe69d0a939192.html#a4a8a5b6d913f4d57a7dfe69d0a939192">pism::surface::SurfaceModel::max_timestep_impl</a></div><div class="ttdeci">virtual MaxTimestep max_timestep_impl(double my_t) const</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00338">SurfaceModel.cc:338</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1SurfaceModel_a4b35686cb1a1884ddbe2d21689a46df7_html_a4b35686cb1a1884ddbe2d21689a46df7"><div class="ttname"><a href="classpism_1_1surface_1_1SurfaceModel_a4b35686cb1a1884ddbe2d21689a46df7.html#a4b35686cb1a1884ddbe2d21689a46df7">pism::surface::SurfaceModel::allocate_melt</a></div><div class="ttdeci">static std::shared_ptr&lt; array::Scalar &gt; allocate_melt(std::shared_ptr&lt; const Grid &gt; grid)</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00115">SurfaceModel.cc:115</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1SurfaceModel_a5a44a5205121f46aea0e2aae11de6bc8_html_a5a44a5205121f46aea0e2aae11de6bc8"><div class="ttname"><a href="classpism_1_1surface_1_1SurfaceModel_a5a44a5205121f46aea0e2aae11de6bc8.html#a5a44a5205121f46aea0e2aae11de6bc8">pism::surface::SurfaceModel::SurfaceModel</a></div><div class="ttdeci">SurfaceModel(std::shared_ptr&lt; const Grid &gt; g)</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00133">SurfaceModel.cc:133</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1SurfaceModel_a5b33896b5a67acdb275214c64e499967_html_a5b33896b5a67acdb275214c64e499967"><div class="ttname"><a href="classpism_1_1surface_1_1SurfaceModel_a5b33896b5a67acdb275214c64e499967.html#a5b33896b5a67acdb275214c64e499967">pism::surface::SurfaceModel::m_runoff</a></div><div class="ttdeci">std::shared_ptr&lt; array::Scalar &gt; m_runoff</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8hh_source.html#l00105">SurfaceModel.hh:105</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1SurfaceModel_a5c770412f37f5201274f1f12658c1935_html_a5c770412f37f5201274f1f12658c1935"><div class="ttname"><a href="classpism_1_1surface_1_1SurfaceModel_a5c770412f37f5201274f1f12658c1935.html#a5c770412f37f5201274f1f12658c1935">pism::surface::SurfaceModel::allocate_layer_thickness</a></div><div class="ttdeci">static std::shared_ptr&lt; array::Scalar &gt; allocate_layer_thickness(std::shared_ptr&lt; const Grid &gt; grid)</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00047">SurfaceModel.cc:47</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1SurfaceModel_a7b9a08a3dd1e7b83f722ac4badb98e55_html_a7b9a08a3dd1e7b83f722ac4badb98e55"><div class="ttname"><a href="classpism_1_1surface_1_1SurfaceModel_a7b9a08a3dd1e7b83f722ac4badb98e55.html#a7b9a08a3dd1e7b83f722ac4badb98e55">pism::surface::SurfaceModel::dummy_melt</a></div><div class="ttdeci">void dummy_melt(const array::Scalar &amp;smb, array::Scalar &amp;result)</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00399">SurfaceModel.cc:399</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1SurfaceModel_a7d5c078c2dbf02ac0a12fc4e209651c1_html_a7d5c078c2dbf02ac0a12fc4e209651c1"><div class="ttname"><a href="classpism_1_1surface_1_1SurfaceModel_a7d5c078c2dbf02ac0a12fc4e209651c1.html#a7d5c078c2dbf02ac0a12fc4e209651c1">pism::surface::SurfaceModel::m_input_model</a></div><div class="ttdeci">std::shared_ptr&lt; SurfaceModel &gt; m_input_model</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8hh_source.html#l00107">SurfaceModel.hh:107</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1SurfaceModel_a8bb12e76aa2f6e223fb33268f1c4a1ff_html_a8bb12e76aa2f6e223fb33268f1c4a1ff"><div class="ttname"><a href="classpism_1_1surface_1_1SurfaceModel_a8bb12e76aa2f6e223fb33268f1c4a1ff.html#a8bb12e76aa2f6e223fb33268f1c4a1ff">pism::surface::SurfaceModel::allocate_layer_mass</a></div><div class="ttdeci">static std::shared_ptr&lt; array::Scalar &gt; allocate_layer_mass(std::shared_ptr&lt; const Grid &gt; grid)</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00035">SurfaceModel.cc:35</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1SurfaceModel_a99619f416c4c3549f5b1f1d3ae81be79_html_a99619f416c4c3549f5b1f1d3ae81be79"><div class="ttname"><a href="classpism_1_1surface_1_1SurfaceModel_a99619f416c4c3549f5b1f1d3ae81be79.html#a99619f416c4c3549f5b1f1d3ae81be79">pism::surface::SurfaceModel::temperature</a></div><div class="ttdeci">const array::Scalar &amp; temperature() const</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00194">SurfaceModel.cc:194</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1SurfaceModel_aa6b840dc7d294c56acf584792f1c2655_html_aa6b840dc7d294c56acf584792f1c2655"><div class="ttname"><a href="classpism_1_1surface_1_1SurfaceModel_aa6b840dc7d294c56acf584792f1c2655.html#aa6b840dc7d294c56acf584792f1c2655">pism::surface::SurfaceModel::m_layer_mass</a></div><div class="ttdeci">std::shared_ptr&lt; array::Scalar &gt; m_layer_mass</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8hh_source.html#l00101">SurfaceModel.hh:101</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1SurfaceModel_aa73b80c8ebb294587f206b7d45977a30_html_aa73b80c8ebb294587f206b7d45977a30"><div class="ttname"><a href="classpism_1_1surface_1_1SurfaceModel_aa73b80c8ebb294587f206b7d45977a30.html#aa73b80c8ebb294587f206b7d45977a30">pism::surface::SurfaceModel::mass_flux_impl</a></div><div class="ttdeci">virtual const array::Scalar &amp; mass_flux_impl() const</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00250">SurfaceModel.cc:250</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1SurfaceModel_aaf90d1a7562554b4919b72917e150455_html_aaf90d1a7562554b4919b72917e150455"><div class="ttname"><a href="classpism_1_1surface_1_1SurfaceModel_aaf90d1a7562554b4919b72917e150455.html#aaf90d1a7562554b4919b72917e150455">pism::surface::SurfaceModel::ts_diagnostics_impl</a></div><div class="ttdeci">virtual TSDiagnosticList ts_diagnostics_impl() const</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00831">SurfaceModel.cc:831</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1SurfaceModel_ac88c8c944c2c1722351589125c603b5e_html_ac88c8c944c2c1722351589125c603b5e"><div class="ttname"><a href="classpism_1_1surface_1_1SurfaceModel_ac88c8c944c2c1722351589125c603b5e.html#ac88c8c944c2c1722351589125c603b5e">pism::surface::SurfaceModel::runoff_impl</a></div><div class="ttdeci">virtual const array::Scalar &amp; runoff_impl() const</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00242">SurfaceModel.cc:242</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1SurfaceModel_acda04081d1de45b0b4996264dd58896c_html_acda04081d1de45b0b4996264dd58896c"><div class="ttname"><a href="classpism_1_1surface_1_1SurfaceModel_acda04081d1de45b0b4996264dd58896c.html#acda04081d1de45b0b4996264dd58896c">pism::surface::SurfaceModel::m_accumulation</a></div><div class="ttdeci">std::shared_ptr&lt; array::Scalar &gt; m_accumulation</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8hh_source.html#l00103">SurfaceModel.hh:103</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1SurfaceModel_acef85e81cf91fd47f9a03a2a571f4861_html_acef85e81cf91fd47f9a03a2a571f4861"><div class="ttname"><a href="classpism_1_1surface_1_1SurfaceModel_acef85e81cf91fd47f9a03a2a571f4861.html#acef85e81cf91fd47f9a03a2a571f4861">pism::surface::SurfaceModel::m_liquid_water_fraction</a></div><div class="ttdeci">std::shared_ptr&lt; array::Scalar &gt; m_liquid_water_fraction</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8hh_source.html#l00100">SurfaceModel.hh:100</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1SurfaceModel_ad96db6e402a90adb744b7e7ad9322cb3_html_ad96db6e402a90adb744b7e7ad9322cb3"><div class="ttname"><a href="classpism_1_1surface_1_1SurfaceModel_ad96db6e402a90adb744b7e7ad9322cb3.html#ad96db6e402a90adb744b7e7ad9322cb3">pism::surface::SurfaceModel::init_impl</a></div><div class="ttdeci">virtual void init_impl(const Geometry &amp;geometry)</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00294">SurfaceModel.cc:294</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1SurfaceModel_ae37a02de4c933356c550faba073e4427_html_ae37a02de4c933356c550faba073e4427"><div class="ttname"><a href="classpism_1_1surface_1_1SurfaceModel_ae37a02de4c933356c550faba073e4427.html#ae37a02de4c933356c550faba073e4427">pism::surface::SurfaceModel::layer_thickness</a></div><div class="ttdeci">const array::Scalar &amp; layer_thickness() const</div><div class="ttdoc">Returns thickness of the surface layer. Could be used to compute surface elevation as a sum of elevat...</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00222">SurfaceModel.cc:222</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1SurfaceModel_aea81322270ddd2fc7c428c99f48dcda5_html_aea81322270ddd2fc7c428c99f48dcda5"><div class="ttname"><a href="classpism_1_1surface_1_1SurfaceModel_aea81322270ddd2fc7c428c99f48dcda5.html#aea81322270ddd2fc7c428c99f48dcda5">pism::surface::SurfaceModel::runoff</a></div><div class="ttdeci">const array::Scalar &amp; runoff() const</div><div class="ttdoc">Returns runoff.</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00186">SurfaceModel.cc:186</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1SurfaceModel_aecd7af4c3aef21e45a1954b141422f33_html_aecd7af4c3aef21e45a1954b141422f33"><div class="ttname"><a href="classpism_1_1surface_1_1SurfaceModel_aecd7af4c3aef21e45a1954b141422f33.html#aecd7af4c3aef21e45a1954b141422f33">pism::surface::SurfaceModel::melt_impl</a></div><div class="ttdeci">virtual const array::Scalar &amp; melt_impl() const</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00234">SurfaceModel.cc:234</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1SurfaceModel_af750b591bb3d15c2bf851c6fcb201470_html_af750b591bb3d15c2bf851c6fcb201470"><div class="ttname"><a href="classpism_1_1surface_1_1SurfaceModel_af750b591bb3d15c2bf851c6fcb201470.html#af750b591bb3d15c2bf851c6fcb201470">pism::surface::SurfaceModel::layer_thickness_impl</a></div><div class="ttdeci">virtual const array::Scalar &amp; layer_thickness_impl() const</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00282">SurfaceModel.cc:282</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1SurfaceModel_af7718482a79bc0ad7c8fa8b7ccfe2ffc_html_af7718482a79bc0ad7c8fa8b7ccfe2ffc"><div class="ttname"><a href="classpism_1_1surface_1_1SurfaceModel_af7718482a79bc0ad7c8fa8b7ccfe2ffc.html#af7718482a79bc0ad7c8fa8b7ccfe2ffc">pism::surface::SurfaceModel::dummy_runoff</a></div><div class="ttdeci">void dummy_runoff(const array::Scalar &amp;smb, array::Scalar &amp;result)</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00380">SurfaceModel.cc:380</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1SurfaceModel_afaca7f71589a0b66947c88af47b6b5d1_html_afaca7f71589a0b66947c88af47b6b5d1"><div class="ttname"><a href="classpism_1_1surface_1_1SurfaceModel_afaca7f71589a0b66947c88af47b6b5d1.html#afaca7f71589a0b66947c88af47b6b5d1">pism::surface::SurfaceModel::temperature_impl</a></div><div class="ttdeci">virtual const array::Scalar &amp; temperature_impl() const</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00258">SurfaceModel.cc:258</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1SurfaceModel_afb40e99e6ee5b177a4d8b783e7329973_html_afb40e99e6ee5b177a4d8b783e7329973"><div class="ttname"><a href="classpism_1_1surface_1_1SurfaceModel_afb40e99e6ee5b177a4d8b783e7329973.html#afb40e99e6ee5b177a4d8b783e7329973">pism::surface::SurfaceModel::allocate_liquid_water_fraction</a></div><div class="ttdeci">static std::shared_ptr&lt; array::Scalar &gt; allocate_liquid_water_fraction(std::shared_ptr&lt; const Grid &gt; grid)</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00060">SurfaceModel.cc:60</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1SurfaceModel_html"><div class="ttname"><a href="classpism_1_1surface_1_1SurfaceModel.html">pism::surface::SurfaceModel</a></div><div class="ttdoc">The interface of PISM's surface models.</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8hh_source.html#l00042">SurfaceModel.hh:42</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1diagnostics_1_1Accumulation_a2f5bd8e89d1f88d5bae594e580a2be1c_html_a2f5bd8e89d1f88d5bae594e580a2be1c"><div class="ttname"><a href="classpism_1_1surface_1_1diagnostics_1_1Accumulation_a2f5bd8e89d1f88d5bae594e580a2be1c.html#a2f5bd8e89d1f88d5bae594e580a2be1c">pism::surface::diagnostics::Accumulation::model_input</a></div><div class="ttdeci">const array::Scalar &amp; model_input()</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00701">SurfaceModel.cc:701</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1diagnostics_1_1Accumulation_a57855011e894e936b91efd826c77b47a_html_a57855011e894e936b91efd826c77b47a"><div class="ttname"><a href="classpism_1_1surface_1_1diagnostics_1_1Accumulation_a57855011e894e936b91efd826c77b47a.html#a57855011e894e936b91efd826c77b47a">pism::surface::diagnostics::Accumulation::m_accumulation_mass</a></div><div class="ttdeci">array::Scalar m_accumulation_mass</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00720">SurfaceModel.cc:720</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1diagnostics_1_1Accumulation_a66dc78694ff86655309ce33c4f126156_html_a66dc78694ff86655309ce33c4f126156"><div class="ttname"><a href="classpism_1_1surface_1_1diagnostics_1_1Accumulation_a66dc78694ff86655309ce33c4f126156.html#a66dc78694ff86655309ce33c4f126156">pism::surface::diagnostics::Accumulation::m_kind</a></div><div class="ttdeci">AmountKind m_kind</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00719">SurfaceModel.cc:719</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1diagnostics_1_1Accumulation_adbf0db9a1a3d3b91977cbfc1cbe36970_html_adbf0db9a1a3d3b91977cbfc1cbe36970"><div class="ttname"><a href="classpism_1_1surface_1_1diagnostics_1_1Accumulation_adbf0db9a1a3d3b91977cbfc1cbe36970.html#adbf0db9a1a3d3b91977cbfc1cbe36970">pism::surface::diagnostics::Accumulation::Accumulation</a></div><div class="ttdeci">Accumulation(const SurfaceModel *m, AmountKind kind)</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00666">SurfaceModel.cc:666</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1diagnostics_1_1Accumulation_html"><div class="ttname"><a href="classpism_1_1surface_1_1diagnostics_1_1Accumulation.html">pism::surface::diagnostics::Accumulation</a></div><div class="ttdoc">Report accumulation (precipitation minus rain), averaged over the reporting interval.</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00663">SurfaceModel.cc:664</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1diagnostics_1_1PS__climatic__mass__balance_a1002a2b3728685e7740c54b6f95eea6f_html_a1002a2b3728685e7740c54b6f95eea6f"><div class="ttname"><a href="classpism_1_1surface_1_1diagnostics_1_1PS__climatic__mass__balance_a1002a2b3728685e7740c54b6f95eea6f.html#a1002a2b3728685e7740c54b6f95eea6f">pism::surface::diagnostics::PS_climatic_mass_balance::PS_climatic_mass_balance</a></div><div class="ttdeci">PS_climatic_mass_balance(const SurfaceModel *m)</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00452">SurfaceModel.cc:452</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1diagnostics_1_1PS__climatic__mass__balance_a85ee4c8baea81c199cd04d78480862de_html_a85ee4c8baea81c199cd04d78480862de"><div class="ttname"><a href="classpism_1_1surface_1_1diagnostics_1_1PS__climatic__mass__balance_a85ee4c8baea81c199cd04d78480862de.html#a85ee4c8baea81c199cd04d78480862de">pism::surface::diagnostics::PS_climatic_mass_balance::compute_impl</a></div><div class="ttdeci">std::shared_ptr&lt; array::Array &gt; compute_impl() const</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00464">SurfaceModel.cc:464</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1diagnostics_1_1PS__climatic__mass__balance_html"><div class="ttname"><a href="classpism_1_1surface_1_1diagnostics_1_1PS__climatic__mass__balance.html">pism::surface::diagnostics::PS_climatic_mass_balance</a></div><div class="ttdoc">Climatic mass balance.</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00408">SurfaceModel.cc:409</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1diagnostics_1_1PS__ice__surface__temp_a65e86b3bf823a0c62baf1538e31dee21_html_a65e86b3bf823a0c62baf1538e31dee21"><div class="ttname"><a href="classpism_1_1surface_1_1diagnostics_1_1PS__ice__surface__temp_a65e86b3bf823a0c62baf1538e31dee21.html#a65e86b3bf823a0c62baf1538e31dee21">pism::surface::diagnostics::PS_ice_surface_temp::compute_impl</a></div><div class="ttdeci">std::shared_ptr&lt; array::Array &gt; compute_impl() const</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00483">SurfaceModel.cc:483</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1diagnostics_1_1PS__ice__surface__temp_aca7440a29432d92d6f56f8705b337a5d_html_aca7440a29432d92d6f56f8705b337a5d"><div class="ttname"><a href="classpism_1_1surface_1_1diagnostics_1_1PS__ice__surface__temp_aca7440a29432d92d6f56f8705b337a5d.html#aca7440a29432d92d6f56f8705b337a5d">pism::surface::diagnostics::PS_ice_surface_temp::PS_ice_surface_temp</a></div><div class="ttdeci">PS_ice_surface_temp(const SurfaceModel *m)</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00472">SurfaceModel.cc:472</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1diagnostics_1_1PS__ice__surface__temp_html"><div class="ttname"><a href="classpism_1_1surface_1_1diagnostics_1_1PS__ice__surface__temp.html">pism::surface::diagnostics::PS_ice_surface_temp</a></div><div class="ttdoc">Ice surface temperature.</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00417">SurfaceModel.cc:418</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1diagnostics_1_1PS__layer__mass_ac966d78670dfca68f45f8c507c8c7549_html_ac966d78670dfca68f45f8c507c8c7549"><div class="ttname"><a href="classpism_1_1surface_1_1diagnostics_1_1PS__layer__mass_ac966d78670dfca68f45f8c507c8c7549.html#ac966d78670dfca68f45f8c507c8c7549">pism::surface::diagnostics::PS_layer_mass::compute_impl</a></div><div class="ttdeci">std::shared_ptr&lt; array::Array &gt; compute_impl() const</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00510">SurfaceModel.cc:510</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1diagnostics_1_1PS__layer__mass_ae41c7cfa31339ee9c6a706d31ceece37_html_ae41c7cfa31339ee9c6a706d31ceece37"><div class="ttname"><a href="classpism_1_1surface_1_1diagnostics_1_1PS__layer__mass_ae41c7cfa31339ee9c6a706d31ceece37.html#ae41c7cfa31339ee9c6a706d31ceece37">pism::surface::diagnostics::PS_layer_mass::PS_layer_mass</a></div><div class="ttdeci">PS_layer_mass(const SurfaceModel *m)</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00505">SurfaceModel.cc:505</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1diagnostics_1_1PS__layer__mass_html"><div class="ttname"><a href="classpism_1_1surface_1_1diagnostics_1_1PS__layer__mass.html">pism::surface::diagnostics::PS_layer_mass</a></div><div class="ttdoc">Mass of the surface layer (snow and firn).</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00435">SurfaceModel.cc:436</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1diagnostics_1_1PS__layer__thickness_a69d7d189f78d53142a0a4044e018e8c8_html_a69d7d189f78d53142a0a4044e018e8c8"><div class="ttname"><a href="classpism_1_1surface_1_1diagnostics_1_1PS__layer__thickness_a69d7d189f78d53142a0a4044e018e8c8.html#a69d7d189f78d53142a0a4044e018e8c8">pism::surface::diagnostics::PS_layer_thickness::PS_layer_thickness</a></div><div class="ttdeci">PS_layer_thickness(const SurfaceModel *m)</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00519">SurfaceModel.cc:519</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1diagnostics_1_1PS__layer__thickness_a97d5d07803328d9cc478d9aa79b25862_html_a97d5d07803328d9cc478d9aa79b25862"><div class="ttname"><a href="classpism_1_1surface_1_1diagnostics_1_1PS__layer__thickness_a97d5d07803328d9cc478d9aa79b25862.html#a97d5d07803328d9cc478d9aa79b25862">pism::surface::diagnostics::PS_layer_thickness::compute_impl</a></div><div class="ttdeci">std::shared_ptr&lt; array::Array &gt; compute_impl() const</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00524">SurfaceModel.cc:524</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1diagnostics_1_1PS__layer__thickness_html"><div class="ttname"><a href="classpism_1_1surface_1_1diagnostics_1_1PS__layer__thickness.html">pism::surface::diagnostics::PS_layer_thickness</a></div><div class="ttdoc">Surface layer (snow and firn) thickness.</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00444">SurfaceModel.cc:445</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1diagnostics_1_1PS__liquid__water__fraction_a0b0792d414e0b20c91ce2e3482812c4e_html_a0b0792d414e0b20c91ce2e3482812c4e"><div class="ttname"><a href="classpism_1_1surface_1_1diagnostics_1_1PS__liquid__water__fraction_a0b0792d414e0b20c91ce2e3482812c4e.html#a0b0792d414e0b20c91ce2e3482812c4e">pism::surface::diagnostics::PS_liquid_water_fraction::compute_impl</a></div><div class="ttdeci">std::shared_ptr&lt; array::Array &gt; compute_impl() const</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00496">SurfaceModel.cc:496</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1diagnostics_1_1PS__liquid__water__fraction_aa6c56cfccf09b828ce501ece98e5b8fb_html_aa6c56cfccf09b828ce501ece98e5b8fb"><div class="ttname"><a href="classpism_1_1surface_1_1diagnostics_1_1PS__liquid__water__fraction_aa6c56cfccf09b828ce501ece98e5b8fb.html#aa6c56cfccf09b828ce501ece98e5b8fb">pism::surface::diagnostics::PS_liquid_water_fraction::PS_liquid_water_fraction</a></div><div class="ttdeci">PS_liquid_water_fraction(const SurfaceModel *m)</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00491">SurfaceModel.cc:491</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1diagnostics_1_1PS__liquid__water__fraction_html"><div class="ttname"><a href="classpism_1_1surface_1_1diagnostics_1_1PS__liquid__water__fraction.html">pism::surface::diagnostics::PS_liquid_water_fraction</a></div><div class="ttdoc">Ice liquid water fraction at the ice surface.</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00426">SurfaceModel.cc:427</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1diagnostics_1_1SurfaceMelt_a777e1b0c7e865ea1a56b34ebd1e14e58_html_a777e1b0c7e865ea1a56b34ebd1e14e58"><div class="ttname"><a href="classpism_1_1surface_1_1diagnostics_1_1SurfaceMelt_a777e1b0c7e865ea1a56b34ebd1e14e58.html#a777e1b0c7e865ea1a56b34ebd1e14e58">pism::surface::diagnostics::SurfaceMelt::SurfaceMelt</a></div><div class="ttdeci">SurfaceMelt(const SurfaceModel *m, AmountKind kind)</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00539">SurfaceModel.cc:539</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1diagnostics_1_1SurfaceMelt_aa6f28a94303d66bf64e89cc75e9731b8_html_aa6f28a94303d66bf64e89cc75e9731b8"><div class="ttname"><a href="classpism_1_1surface_1_1diagnostics_1_1SurfaceMelt_aa6f28a94303d66bf64e89cc75e9731b8.html#aa6f28a94303d66bf64e89cc75e9731b8">pism::surface::diagnostics::SurfaceMelt::model_input</a></div><div class="ttdeci">const array::Scalar &amp; model_input()</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00577">SurfaceModel.cc:577</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1diagnostics_1_1SurfaceMelt_ac9e93461309f8b580fd1da27e40c8467_html_ac9e93461309f8b580fd1da27e40c8467"><div class="ttname"><a href="classpism_1_1surface_1_1diagnostics_1_1SurfaceMelt_ac9e93461309f8b580fd1da27e40c8467.html#ac9e93461309f8b580fd1da27e40c8467">pism::surface::diagnostics::SurfaceMelt::m_melt_mass</a></div><div class="ttdeci">array::Scalar m_melt_mass</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00595">SurfaceModel.cc:595</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1diagnostics_1_1SurfaceMelt_adfc219d74ef48196eebffeae45033372_html_adfc219d74ef48196eebffeae45033372"><div class="ttname"><a href="classpism_1_1surface_1_1diagnostics_1_1SurfaceMelt_adfc219d74ef48196eebffeae45033372.html#adfc219d74ef48196eebffeae45033372">pism::surface::diagnostics::SurfaceMelt::m_kind</a></div><div class="ttdeci">AmountKind m_kind</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00596">SurfaceModel.cc:596</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1diagnostics_1_1SurfaceMelt_html"><div class="ttname"><a href="classpism_1_1surface_1_1diagnostics_1_1SurfaceMelt.html">pism::surface::diagnostics::SurfaceMelt</a></div><div class="ttdoc">Report surface melt, averaged over the reporting interval.</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00536">SurfaceModel.cc:537</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1diagnostics_1_1SurfaceRunoff_aa51bc083f57d061676a08700b7a8f4de_html_aa51bc083f57d061676a08700b7a8f4de"><div class="ttname"><a href="classpism_1_1surface_1_1diagnostics_1_1SurfaceRunoff_aa51bc083f57d061676a08700b7a8f4de.html#aa51bc083f57d061676a08700b7a8f4de">pism::surface::diagnostics::SurfaceRunoff::m_runoff_mass</a></div><div class="ttdeci">array::Scalar m_runoff_mass</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00659">SurfaceModel.cc:659</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1diagnostics_1_1SurfaceRunoff_ac397c9ea89e75de6e152f6b993845d9d_html_ac397c9ea89e75de6e152f6b993845d9d"><div class="ttname"><a href="classpism_1_1surface_1_1diagnostics_1_1SurfaceRunoff_ac397c9ea89e75de6e152f6b993845d9d.html#ac397c9ea89e75de6e152f6b993845d9d">pism::surface::diagnostics::SurfaceRunoff::SurfaceRunoff</a></div><div class="ttdeci">SurfaceRunoff(const SurfaceModel *m, AmountKind kind)</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00603">SurfaceModel.cc:603</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1diagnostics_1_1SurfaceRunoff_ac7469efc4e1ef8047064de91c53a6fa6_html_ac7469efc4e1ef8047064de91c53a6fa6"><div class="ttname"><a href="classpism_1_1surface_1_1diagnostics_1_1SurfaceRunoff_ac7469efc4e1ef8047064de91c53a6fa6.html#ac7469efc4e1ef8047064de91c53a6fa6">pism::surface::diagnostics::SurfaceRunoff::model_input</a></div><div class="ttdeci">const array::Scalar &amp; model_input()</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00640">SurfaceModel.cc:640</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1diagnostics_1_1SurfaceRunoff_ad420e96b89174c90e220562a558804aa_html_ad420e96b89174c90e220562a558804aa"><div class="ttname"><a href="classpism_1_1surface_1_1diagnostics_1_1SurfaceRunoff_ad420e96b89174c90e220562a558804aa.html#ad420e96b89174c90e220562a558804aa">pism::surface::diagnostics::SurfaceRunoff::m_kind</a></div><div class="ttdeci">AmountKind m_kind</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00658">SurfaceModel.cc:658</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1diagnostics_1_1SurfaceRunoff_html"><div class="ttname"><a href="classpism_1_1surface_1_1diagnostics_1_1SurfaceRunoff.html">pism::surface::diagnostics::SurfaceRunoff</a></div><div class="ttdoc">Report surface runoff, averaged over the reporting interval.</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00600">SurfaceModel.cc:601</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1diagnostics_1_1TotalSurfaceAccumulation_a41b575677c3277978c5b384000ef9334_html_a41b575677c3277978c5b384000ef9334"><div class="ttname"><a href="classpism_1_1surface_1_1diagnostics_1_1TotalSurfaceAccumulation_a41b575677c3277978c5b384000ef9334.html#a41b575677c3277978c5b384000ef9334">pism::surface::diagnostics::TotalSurfaceAccumulation::TotalSurfaceAccumulation</a></div><div class="ttdeci">TotalSurfaceAccumulation(const SurfaceModel *m)</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00751">SurfaceModel.cc:751</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1diagnostics_1_1TotalSurfaceAccumulation_afc6d71dc77dbed924e90dda8c44f8592_html_afc6d71dc77dbed924e90dda8c44f8592"><div class="ttname"><a href="classpism_1_1surface_1_1diagnostics_1_1TotalSurfaceAccumulation_afc6d71dc77dbed924e90dda8c44f8592.html#afc6d71dc77dbed924e90dda8c44f8592">pism::surface::diagnostics::TotalSurfaceAccumulation::compute</a></div><div class="ttdeci">double compute()</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00758">SurfaceModel.cc:758</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1diagnostics_1_1TotalSurfaceAccumulation_html"><div class="ttname"><a href="classpism_1_1surface_1_1diagnostics_1_1TotalSurfaceAccumulation.html">pism::surface::diagnostics::TotalSurfaceAccumulation</a></div><div class="ttdoc">Reports the total accumulation rate.</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00748">SurfaceModel.cc:749</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1diagnostics_1_1TotalSurfaceMelt_a257f25305b08ced2d7315771228bad88_html_a257f25305b08ced2d7315771228bad88"><div class="ttname"><a href="classpism_1_1surface_1_1diagnostics_1_1TotalSurfaceMelt_a257f25305b08ced2d7315771228bad88.html#a257f25305b08ced2d7315771228bad88">pism::surface::diagnostics::TotalSurfaceMelt::TotalSurfaceMelt</a></div><div class="ttdeci">TotalSurfaceMelt(const SurfaceModel *m)</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00768">SurfaceModel.cc:768</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1diagnostics_1_1TotalSurfaceMelt_acd7fe090da7769cf534f809127419d48_html_acd7fe090da7769cf534f809127419d48"><div class="ttname"><a href="classpism_1_1surface_1_1diagnostics_1_1TotalSurfaceMelt_acd7fe090da7769cf534f809127419d48.html#acd7fe090da7769cf534f809127419d48">pism::surface::diagnostics::TotalSurfaceMelt::compute</a></div><div class="ttdeci">double compute()</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00775">SurfaceModel.cc:775</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1diagnostics_1_1TotalSurfaceMelt_html"><div class="ttname"><a href="classpism_1_1surface_1_1diagnostics_1_1TotalSurfaceMelt.html">pism::surface::diagnostics::TotalSurfaceMelt</a></div><div class="ttdoc">Reports the total melt rate.</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00765">SurfaceModel.cc:766</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1diagnostics_1_1TotalSurfaceRunoff_a0d21c561a4c69745813036b408b496ad_html_a0d21c561a4c69745813036b408b496ad"><div class="ttname"><a href="classpism_1_1surface_1_1diagnostics_1_1TotalSurfaceRunoff_a0d21c561a4c69745813036b408b496ad.html#a0d21c561a4c69745813036b408b496ad">pism::surface::diagnostics::TotalSurfaceRunoff::compute</a></div><div class="ttdeci">double compute()</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00792">SurfaceModel.cc:792</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1diagnostics_1_1TotalSurfaceRunoff_a8677b93df2432800791cf690d53ee02d_html_a8677b93df2432800791cf690d53ee02d"><div class="ttname"><a href="classpism_1_1surface_1_1diagnostics_1_1TotalSurfaceRunoff_a8677b93df2432800791cf690d53ee02d.html#a8677b93df2432800791cf690d53ee02d">pism::surface::diagnostics::TotalSurfaceRunoff::TotalSurfaceRunoff</a></div><div class="ttdeci">TotalSurfaceRunoff(const SurfaceModel *m)</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00785">SurfaceModel.cc:785</a></div></div>
<div class="ttc" id="aclasspism_1_1surface_1_1diagnostics_1_1TotalSurfaceRunoff_html"><div class="ttname"><a href="classpism_1_1surface_1_1diagnostics_1_1TotalSurfaceRunoff.html">pism::surface::diagnostics::TotalSurfaceRunoff</a></div><div class="ttdoc">Reports the total top surface ice flux.</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00782">SurfaceModel.cc:783</a></div></div>
<div class="ttc" id="aerror__handling_8hh_aa0c260bffe8a4dbd77d48e8feee7c526_html_aa0c260bffe8a4dbd77d48e8feee7c526"><div class="ttname"><a href="error__handling_8hh_aa0c260bffe8a4dbd77d48e8feee7c526.html#aa0c260bffe8a4dbd77d48e8feee7c526">PISM_ERROR_LOCATION</a></div><div class="ttdeci">#define PISM_ERROR_LOCATION</div><div class="ttdef"><b>Definition:</b> <a href="error__handling_8hh_source.html#l00043">error_handling.hh:43</a></div></div>
<div class="ttc" id="anamespacepism_1_1array_a8957d08741c6f48d1e554ac7ea98530a_html_a8957d08741c6f48d1e554ac7ea98530a"><div class="ttname"><a href="namespacepism_1_1array_a8957d08741c6f48d1e554ac7ea98530a.html#a8957d08741c6f48d1e554ac7ea98530a">pism::array::max</a></div><div class="ttdeci">double max(const array::Scalar &amp;input)</div><div class="ttdoc">Finds maximum over all the values in an array::Scalar object. Ignores ghosts.</div><div class="ttdef"><b>Definition:</b> <a href="Scalar_8cc_source.html#l00165">Scalar.cc:165</a></div></div>
<div class="ttc" id="anamespacepism_1_1surface_1_1diagnostics_acadff920eb40e3febfa8f0cbd19b2986_html_acadff920eb40e3febfa8f0cbd19b2986"><div class="ttname"><a href="namespacepism_1_1surface_1_1diagnostics_acadff920eb40e3febfa8f0cbd19b2986.html#acadff920eb40e3febfa8f0cbd19b2986">pism::surface::diagnostics::AmountKind</a></div><div class="ttdeci">AmountKind</div><div class="ttdef"><b>Definition:</b> <a href="DEBMSimple_8cc_source.html#l00607">DEBMSimple.cc:607</a></div></div>
<div class="ttc" id="anamespacepism_1_1surface_1_1diagnostics_acadff920eb40e3febfa8f0cbd19b2986_html_acadff920eb40e3febfa8f0cbd19b2986a0a5cd199a02768d6005905118e4e8a0b"><div class="ttname"><a href="namespacepism_1_1surface_1_1diagnostics_acadff920eb40e3febfa8f0cbd19b2986.html#acadff920eb40e3febfa8f0cbd19b2986a0a5cd199a02768d6005905118e4e8a0b">pism::surface::diagnostics::MASS</a></div><div class="ttdeci">@ MASS</div><div class="ttdef"><b>Definition:</b> <a href="DEBMSimple_8cc_source.html#l00607">DEBMSimple.cc:607</a></div></div>
<div class="ttc" id="anamespacepism_1_1surface_1_1diagnostics_acadff920eb40e3febfa8f0cbd19b2986_html_acadff920eb40e3febfa8f0cbd19b2986ad6b52059629f1a3bbbbac787b803b93f"><div class="ttname"><a href="namespacepism_1_1surface_1_1diagnostics_acadff920eb40e3febfa8f0cbd19b2986.html#acadff920eb40e3febfa8f0cbd19b2986ad6b52059629f1a3bbbbac787b803b93f">pism::surface::diagnostics::AMOUNT</a></div><div class="ttdeci">@ AMOUNT</div><div class="ttdef"><b>Definition:</b> <a href="DEBMSimple_8cc_source.html#l00607">DEBMSimple.cc:607</a></div></div>
<div class="ttc" id="anamespacepism_1_1surface_1_1diagnostics_acba2f854fade49a4e39db9125940622f_html_acba2f854fade49a4e39db9125940622f"><div class="ttname"><a href="namespacepism_1_1surface_1_1diagnostics_acba2f854fade49a4e39db9125940622f.html#acba2f854fade49a4e39db9125940622f">pism::surface::diagnostics::integrate</a></div><div class="ttdeci">static double integrate(const array::Scalar &amp;input)</div><div class="ttdef"><b>Definition:</b> <a href="SurfaceModel_8cc_source.html#l00728">SurfaceModel.cc:728</a></div></div>
<div class="ttc" id="anamespacepism_a47d754ed3e959d5866b02a1b78b6a5b5_html_a47d754ed3e959d5866b02a1b78b6a5b5"><div class="ttname"><a href="namespacepism_a47d754ed3e959d5866b02a1b78b6a5b5.html#a47d754ed3e959d5866b02a1b78b6a5b5">pism::g</a></div><div class="ttdeci">static const double g</div><div class="ttdef"><b>Definition:</b> <a href="exactTestP_8cc_source.html#l00036">exactTestP.cc:36</a></div></div>
<div class="ttc" id="anamespacepism_a5cca85a16d08e7581dbc0ce9e341956a_html_a5cca85a16d08e7581dbc0ce9e341956a"><div class="ttname"><a href="namespacepism_a5cca85a16d08e7581dbc0ce9e341956a.html#a5cca85a16d08e7581dbc0ce9e341956a">pism::TSDiagnosticList</a></div><div class="ttdeci">std::map&lt; std::string, TSDiagnostic::Ptr &gt; TSDiagnosticList</div><div class="ttdef"><b>Definition:</b> <a href="Diagnostic_8hh_source.html#l00343">Diagnostic.hh:343</a></div></div>
<div class="ttc" id="anamespacepism_a6154a990ba873c6ca606d8a320c441ac_html_a6154a990ba873c6ca606d8a320c441ac"><div class="ttname"><a href="namespacepism_a6154a990ba873c6ca606d8a320c441ac.html#a6154a990ba873c6ca606d8a320c441ac">pism::DiagnosticList</a></div><div class="ttdeci">std::map&lt; std::string, Diagnostic::Ptr &gt; DiagnosticList</div><div class="ttdef"><b>Definition:</b> <a href="Diagnostic_8hh_source.html#l00125">Diagnostic.hh:125</a></div></div>
<div class="ttc" id="anamespacepism_ab50523fe25aadf4a123551726b2a2967_html_ab50523fe25aadf4a123551726b2a2967"><div class="ttname"><a href="namespacepism_ab50523fe25aadf4a123551726b2a2967.html#ab50523fe25aadf4a123551726b2a2967">pism::combine</a></div><div class="ttdeci">T combine(const T &amp;a, const T &amp;b)</div><div class="ttdef"><b>Definition:</b> <a href="pism__utilities_8hh_source.html#l00095">pism_utilities.hh:95</a></div></div>
<div class="ttc" id="anamespacepism_ac3e0190c23e7e63d2755343a89b3b239_html_ac3e0190c23e7e63d2755343a89b3b239"><div class="ttname"><a href="namespacepism_ac3e0190c23e7e63d2755343a89b3b239.html#ac3e0190c23e7e63d2755343a89b3b239">pism::GlobalSum</a></div><div class="ttdeci">void GlobalSum(MPI_Comm comm, double *local, double *result, int count)</div><div class="ttdef"><b>Definition:</b> <a href="pism__utilities_8cc_source.html#l00186">pism_utilities.cc:186</a></div></div>
<div class="ttc" id="anamespacepism_html"><div class="ttname"><a href="namespacepism.html">pism</a></div><div class="ttdef"><b>Definition:</b> <a href="AgeColumnSystem_8cc_source.html#l00023">AgeColumnSystem.cc:23</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
