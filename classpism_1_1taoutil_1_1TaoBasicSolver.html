<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PISM, A Parallel Ice Sheet Model: pism::taoutil::TaoBasicSolver&lt; Problem &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="browser.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PISM, A Parallel Ice Sheet Model
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacepism.html">pism</a></li><li class="navelem"><a class="el" href="namespacepism_1_1taoutil.html">taoutil</a></li><li class="navelem"><a class="el" href="classpism_1_1taoutil_1_1TaoBasicSolver.html">TaoBasicSolver</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classpism_1_1taoutil_1_1TaoBasicSolver-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">pism::taoutil::TaoBasicSolver&lt; Problem &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>An interface for solving an optimization problem with TAO where the problem itself is defined by a separate Problem class.  
 <a href="classpism_1_1taoutil_1_1TaoBasicSolver.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="TaoUtil_8hh_source.html">TaoUtil.hh</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a9745c51170cb679e975629ac9b27afc1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpism_1_1taoutil_1_1TaoBasicSolver_a9745c51170cb679e975629ac9b27afc1.html#a9745c51170cb679e975629ac9b27afc1">TaoBasicSolver</a> (MPI_Comm comm, const std::string &amp;tao_type, Problem &amp;prob)</td></tr>
<tr class="memdesc:a9745c51170cb679e975629ac9b27afc1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a solver to solve <code>prob</code> using TAO algorithm <code>tao_type</code>.  <a href="classpism_1_1taoutil_1_1TaoBasicSolver_a9745c51170cb679e975629ac9b27afc1.html#a9745c51170cb679e975629ac9b27afc1">More...</a><br /></td></tr>
<tr class="separator:a9745c51170cb679e975629ac9b27afc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59ad63867968df3bd4a4276a6c670b8c"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpism_1_1taoutil_1_1TaoBasicSolver_a59ad63867968df3bd4a4276a6c670b8c.html#a59ad63867968df3bd4a4276a6c670b8c">~TaoBasicSolver</a> ()</td></tr>
<tr class="separator:a59ad63867968df3bd4a4276a6c670b8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac558ac54c58b6826d9ace730f1fc0946"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classpism_1_1TerminationReason_a1477a9427838815f537ee44d6df00c3e.html#a1477a9427838815f537ee44d6df00c3e">TerminationReason::Ptr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpism_1_1taoutil_1_1TaoBasicSolver_ac558ac54c58b6826d9ace730f1fc0946.html#ac558ac54c58b6826d9ace730f1fc0946">solve</a> ()</td></tr>
<tr class="memdesc:ac558ac54c58b6826d9ace730f1fc0946"><td class="mdescLeft">&#160;</td><td class="mdescRight">Solve the minimization problem.  <a href="classpism_1_1taoutil_1_1TaoBasicSolver_ac558ac54c58b6826d9ace730f1fc0946.html#ac558ac54c58b6826d9ace730f1fc0946">More...</a><br /></td></tr>
<tr class="separator:ac558ac54c58b6826d9ace730f1fc0946"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae79ef9fded806df99adb45888b63d501"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpism_1_1taoutil_1_1TaoBasicSolver_ae79ef9fded806df99adb45888b63d501.html#ae79ef9fded806df99adb45888b63d501">setMaximumIterations</a> (int max_it)</td></tr>
<tr class="separator:ae79ef9fded806df99adb45888b63d501"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95f50857e7abb82c350799a16c030116"><td class="memItemLeft" align="right" valign="top">virtual Problem &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpism_1_1taoutil_1_1TaoBasicSolver_a95f50857e7abb82c350799a16c030116.html#a95f50857e7abb82c350799a16c030116">problem</a> ()</td></tr>
<tr class="separator:a95f50857e7abb82c350799a16c030116"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a409496274251932bdda6d20b14d721d2"><td class="memItemLeft" align="right" valign="top">MPI_Comm&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpism_1_1taoutil_1_1TaoBasicSolver_a409496274251932bdda6d20b14d721d2.html#a409496274251932bdda6d20b14d721d2">m_comm</a></td></tr>
<tr class="separator:a409496274251932bdda6d20b14d721d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a555d2761659d7a0f3f8b0bb1ea596fe5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classpism_1_1petsc_1_1Tao.html">petsc::Tao</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpism_1_1taoutil_1_1TaoBasicSolver_a555d2761659d7a0f3f8b0bb1ea596fe5.html#a555d2761659d7a0f3f8b0bb1ea596fe5">m_tao</a></td></tr>
<tr class="separator:a555d2761659d7a0f3f8b0bb1ea596fe5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf91a08451ad8e4d80ecb24f2bc43303"><td class="memItemLeft" align="right" valign="top">Problem &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpism_1_1taoutil_1_1TaoBasicSolver_acf91a08451ad8e4d80ecb24f2bc43303.html#acf91a08451ad8e4d80ecb24f2bc43303">m_problem</a></td></tr>
<tr class="separator:acf91a08451ad8e4d80ecb24f2bc43303"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;class Problem&gt;<br />
class pism::taoutil::TaoBasicSolver&lt; Problem &gt;</h3>

<p>An interface for solving an optimization problem with TAO where the problem itself is defined by a separate Problem class. </p>
<p>The primary interface to a TAO optimization problem is mediated by a PETSc-style <code>TaoSolver</code> object. The PISM <a class="el" href="classpism_1_1taoutil_1_1TaoBasicSolver.html" title="An interface for solving an optimization problem with TAO where the problem itself is defined by a se...">TaoBasicSolver</a> C++ class wraps a <code>TaoSolver</code> and some of its initialization boilierplate, and allows a separate class to define the function to be minimized.</p>
<p>To use a <a class="el" href="classpism_1_1taoutil_1_1TaoBasicSolver.html" title="An interface for solving an optimization problem with TAO where the problem itself is defined by a se...">TaoBasicSolver</a> you create a <code>Problem</code> class that defines the objective function and initial guess, as well any auxilliary callbacks desired. The Problem class must define a</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> Problem::connect(TaoSolver solver);</div>
</div><!-- fragment --><p>method which gives the <code>Problem</code> an opportunity to register its methods as callbacks to the solver, perhaps taking advantage of the various <code>TaoFooCallback</code> classes provided in <a class="el" href="TaoUtil_8hh.html">TaoUtil.hh</a> to facilitate this. For example, a problem class MyProblem that did nothing more than register a combined objective/gradient callback could define</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> MyProblem::connect(TaoSolver tao) {</div>
<div class="line"><span class="keyword">typedef</span> TaoObjGradCallback&lt;Problem,&amp;MyProblem::evaluateObjectiveAndGradient&gt; ObjGradCallback; </div>
<div class="line">ObjGradCallback::connect(tao,*<span class="keyword">this</span>);</div>
<div class="line">}</div>
</div><!-- fragment --><p>In addition to the <code>connect</code> method, a <code>Problem</code> must define </p><div class="fragment"><div class="line"><a class="code" href="classpism_1_1TerminationReason_a1477a9427838815f537ee44d6df00c3e.html#a1477a9427838815f537ee44d6df00c3e">TerminationReason::Ptr</a> MyProblem::formInitialGuess(Vec *v)</div>
<div class="ttc" id="aclasspism_1_1TerminationReason_a1477a9427838815f537ee44d6df00c3e_html_a1477a9427838815f537ee44d6df00c3e"><div class="ttname"><a href="classpism_1_1TerminationReason_a1477a9427838815f537ee44d6df00c3e.html#a1477a9427838815f537ee44d6df00c3e">pism::TerminationReason::Ptr</a></div><div class="ttdeci">std::shared_ptr&lt; TerminationReason &gt; Ptr</div><div class="ttdef"><b>Definition:</b> <a href="TerminationReason_8hh_source.html#l00044">TerminationReason.hh:44</a></div></div>
</div><!-- fragment --><p> which allows the problem to set the initial guess for optimization. If the minimization is successful, the solution will be found in the same vector that was returned by this method.</p>
<p>Assuming a <code>MyProblem</code> called <code>problem</code> has been constructed, solution of the minimization is done using, for example, the TAO algorithm tao_cg:</p>
<div class="fragment"><div class="line">TaoBasicSolver&lt;MyProblem&gt; solver(com,<span class="stringliteral">&quot;tao_cg&quot;</span>,<a class="code" href="classpism_1_1taoutil_1_1TaoBasicSolver_a95f50857e7abb82c350799a16c030116.html#a95f50857e7abb82c350799a16c030116">problem</a>);</div>
<div class="line"> </div>
<div class="line"><a class="code" href="classpism_1_1TerminationReason_a1477a9427838815f537ee44d6df00c3e.html#a1477a9427838815f537ee44d6df00c3e">TerminationReason::Ptr</a> reason = solver.solve();</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> (reason-&gt;succeeded()) {</div>
<div class="line"><a class="code" href="namespacepism_a5d5d5714fb63a96518ffbe7be151e90b.html#a5d5d5714fb63a96518ffbe7be151e90b">printf</a>(<span class="stringliteral">&quot;Success: %s\n&quot;</span>,reason-&gt;description().c_str());</div>
<div class="line">} <span class="keywordflow">else</span> {</div>
<div class="line"><a class="code" href="namespacepism_a5d5d5714fb63a96518ffbe7be151e90b.html#a5d5d5714fb63a96518ffbe7be151e90b">printf</a>(<span class="stringliteral">&quot;Failure: %s\n&quot;</span>,reason-&gt;description().c_str());</div>
<div class="line">}</div>
<div class="ttc" id="aclasspism_1_1taoutil_1_1TaoBasicSolver_a95f50857e7abb82c350799a16c030116_html_a95f50857e7abb82c350799a16c030116"><div class="ttname"><a href="classpism_1_1taoutil_1_1TaoBasicSolver_a95f50857e7abb82c350799a16c030116.html#a95f50857e7abb82c350799a16c030116">pism::taoutil::TaoBasicSolver::problem</a></div><div class="ttdeci">virtual Problem &amp; problem()</div><div class="ttdef"><b>Definition:</b> <a href="TaoUtil_8hh_source.html#l00148">TaoUtil.hh:148</a></div></div>
<div class="ttc" id="anamespacepism_a5d5d5714fb63a96518ffbe7be151e90b_html_a5d5d5714fb63a96518ffbe7be151e90b"><div class="ttname"><a href="namespacepism_a5d5d5714fb63a96518ffbe7be151e90b.html#a5d5d5714fb63a96518ffbe7be151e90b">pism::printf</a></div><div class="ttdeci">std::string printf(const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="pism__utilities_8cc_source.html#l00384">pism_utilities.cc:384</a></div></div>
</div><!-- fragment --> 
<p class="definition">Definition at line <a class="el" href="TaoUtil_8hh_source.html#l00092">92</a> of file <a class="el" href="TaoUtil_8hh_source.html">TaoUtil.hh</a>.</p>
</div><hr/>The documentation for this class was generated from the following file:<ul>
<li>src/inverse/<a class="el" href="TaoUtil_8hh_source.html">TaoUtil.hh</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
